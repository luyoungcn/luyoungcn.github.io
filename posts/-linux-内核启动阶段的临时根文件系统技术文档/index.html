<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>ğŸ§© Linux å†…æ ¸å¯åŠ¨é˜¶æ®µçš„ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£ | Luyangã®Blog</title>
<link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml" /><meta property="og:url" content="/posts/-linux-%E5%86%85%E6%A0%B8%E5%90%AF%E5%8A%A8%E9%98%B6%E6%AE%B5%E7%9A%84%E4%B8%B4%E6%97%B6%E6%A0%B9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/">
  <meta property="og:site_name" content="Luyangã®Blog">
  <meta property="og:title" content="ğŸ§© Linux å†…æ ¸å¯åŠ¨é˜¶æ®µçš„ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£">
  <meta property="og:description" content="ğŸ§© Linux å†…æ ¸å¯åŠ¨é˜¶æ®µçš„ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£ ğŸ“˜ 1. æ¦‚è¿°ï¼ˆOverviewï¼‰ åœ¨ Linux å¯åŠ¨çš„æ—©æœŸé˜¶æ®µï¼Œå†…æ ¸å°šæœªæŒ‚è½½å®é™…çš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆä¾‹å¦‚ eMMC ä¸Šçš„ ext4 æˆ– NFS æ ¹ç›®å½•ï¼‰ã€‚
ä¸ºäº†è®©ç³»ç»Ÿå…·å¤‡è¿è¡ŒåŸºæœ¬å‘½ä»¤ã€åŠ è½½é©±åŠ¨ã€æŒ‚è½½çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿçš„èƒ½åŠ›ï¼Œ
å†…æ ¸å¼•å…¥äº†ä¸€ç§ç§°ä¸º ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»Ÿ (Early Root Filesystem) çš„æœºåˆ¶ã€‚
è¯¥æœºåˆ¶åœ¨ä¸åŒå†…æ ¸æ—¶ä»£æœ‰ä¸¤ç§ä¸»è¦å®ç°ï¼š
é˜¶æ®µ æŠ€æœ¯åç§° å®ç°æ–¹å¼ Linux 2.4 åŠä»¥å‰ initrd (initial RAM disk) å°†å‹ç¼©é•œåƒåŠ è½½ä¸ºè™šæ‹Ÿå—è®¾å¤‡ /dev/ram0ï¼Œå†æŒ‚è½½ Linux 2.6 åŠä»¥å initramfs (initial RAM filesystem) å°† cpio å‹ç¼©åŒ…ç›´æ¥è§£åŒ…è¿›å†…å­˜æ–‡ä»¶ç³»ç»Ÿï¼ˆramfs/tmpfsï¼‰ âš™ï¸ 2. å¯åŠ¨é˜¶æ®µæµç¨‹æ¦‚è§ˆ Linux å¯åŠ¨é˜¶æ®µæ¶‰åŠä» bootloader â†’ å†…æ ¸ â†’ initramfs/initrd â†’ ç”¨æˆ·ç©ºé—´ init çš„å®Œæ•´é“¾è·¯ã€‚
1. BIOS/UEFI â†“ 2. Bootloader (GRUB/U-Boot) - åŠ è½½ vmlinuz (å†…æ ¸æ˜ åƒ) - åŠ è½½ initramfs/initrd åˆ°å†…å­˜ â†“ 3. Linux Kernel - åˆå§‹åŒ–å†…æ ¸å­ç³»ç»Ÿ - åˆ›å»º rootfs (ramfs/tmpfs) - è§£åŒ… initramfs æˆ–æŒ‚è½½ initrd - æ‰§è¡Œä¸´æ—¶æ ¹ä¸­çš„ /init â†“ 4. /init - æ¢æµ‹çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆeMMC/NFS/overlayï¼‰ - æŒ‚è½½ç›®æ ‡æ ¹ç›®å½• - è°ƒç”¨ `switch_root` æˆ– `pivot_root` â†“ 5. å¯åŠ¨çœŸæ­£çš„ /sbin/init æˆ– systemd ğŸ§© 3. æŠ€æœ¯æ¶æ„ä¸æ•°æ®æµ 3.1 é€»è¾‘ç»“æ„å›¾ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Bootloader â”‚ â”‚ - åŠ è½½ Kernel &#43; Initramfs â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Linux Kernel â”‚ â”‚ - åˆ›å»º rootfs (ramfs) â”‚ â”‚ - è§£åŒ… initramfs.cpio.gz â”‚ â”‚ - æ‰§è¡Œ /init â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ /init ç”¨æˆ·æ€è„šæœ¬ â”‚ â”‚ - æ¢æµ‹çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿ â”‚ â”‚ - æŒ‚è½½ /new_root â”‚ â”‚ - switch_root /new_root â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ çœŸæ­£æ ¹æ–‡ä»¶ç³»ç»Ÿ (ext4/NFS) â”‚ â”‚ /sbin/init â†’ systemd/init â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ğŸ§± 4. Initramfs å†…éƒ¨ç»“æ„ Initramfs æ˜¯ä¸€ä¸ª cpio æ ¼å¼çš„å‹ç¼©åŒ…ï¼ŒåŒ…å«æ—©æœŸå¯åŠ¨æ‰€éœ€çš„æœ€å°æ–‡ä»¶é›†ï¼š">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-10-11T23:30:00+08:00">
    <meta property="article:modified_time" content="2025-10-11T23:30:00+08:00">
    <meta property="article:tag" content="Ubuntu">
    <meta property="article:tag" content="Systemd">
    <meta property="article:tag" content="Init">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="ğŸ§© Linux å†…æ ¸å¯åŠ¨é˜¶æ®µçš„ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£">
  <meta name="twitter:description" content="ğŸ§© Linux å†…æ ¸å¯åŠ¨é˜¶æ®µçš„ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£ ğŸ“˜ 1. æ¦‚è¿°ï¼ˆOverviewï¼‰ åœ¨ Linux å¯åŠ¨çš„æ—©æœŸé˜¶æ®µï¼Œå†…æ ¸å°šæœªæŒ‚è½½å®é™…çš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆä¾‹å¦‚ eMMC ä¸Šçš„ ext4 æˆ– NFS æ ¹ç›®å½•ï¼‰ã€‚
ä¸ºäº†è®©ç³»ç»Ÿå…·å¤‡è¿è¡ŒåŸºæœ¬å‘½ä»¤ã€åŠ è½½é©±åŠ¨ã€æŒ‚è½½çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿçš„èƒ½åŠ›ï¼Œ
å†…æ ¸å¼•å…¥äº†ä¸€ç§ç§°ä¸º ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»Ÿ (Early Root Filesystem) çš„æœºåˆ¶ã€‚
è¯¥æœºåˆ¶åœ¨ä¸åŒå†…æ ¸æ—¶ä»£æœ‰ä¸¤ç§ä¸»è¦å®ç°ï¼š
é˜¶æ®µ æŠ€æœ¯åç§° å®ç°æ–¹å¼ Linux 2.4 åŠä»¥å‰ initrd (initial RAM disk) å°†å‹ç¼©é•œåƒåŠ è½½ä¸ºè™šæ‹Ÿå—è®¾å¤‡ /dev/ram0ï¼Œå†æŒ‚è½½ Linux 2.6 åŠä»¥å initramfs (initial RAM filesystem) å°† cpio å‹ç¼©åŒ…ç›´æ¥è§£åŒ…è¿›å†…å­˜æ–‡ä»¶ç³»ç»Ÿï¼ˆramfs/tmpfsï¼‰ âš™ï¸ 2. å¯åŠ¨é˜¶æ®µæµç¨‹æ¦‚è§ˆ Linux å¯åŠ¨é˜¶æ®µæ¶‰åŠä» bootloader â†’ å†…æ ¸ â†’ initramfs/initrd â†’ ç”¨æˆ·ç©ºé—´ init çš„å®Œæ•´é“¾è·¯ã€‚
1. BIOS/UEFI â†“ 2. Bootloader (GRUB/U-Boot) - åŠ è½½ vmlinuz (å†…æ ¸æ˜ åƒ) - åŠ è½½ initramfs/initrd åˆ°å†…å­˜ â†“ 3. Linux Kernel - åˆå§‹åŒ–å†…æ ¸å­ç³»ç»Ÿ - åˆ›å»º rootfs (ramfs/tmpfs) - è§£åŒ… initramfs æˆ–æŒ‚è½½ initrd - æ‰§è¡Œä¸´æ—¶æ ¹ä¸­çš„ /init â†“ 4. /init - æ¢æµ‹çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆeMMC/NFS/overlayï¼‰ - æŒ‚è½½ç›®æ ‡æ ¹ç›®å½• - è°ƒç”¨ `switch_root` æˆ– `pivot_root` â†“ 5. å¯åŠ¨çœŸæ­£çš„ /sbin/init æˆ– systemd ğŸ§© 3. æŠ€æœ¯æ¶æ„ä¸æ•°æ®æµ 3.1 é€»è¾‘ç»“æ„å›¾ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Bootloader â”‚ â”‚ - åŠ è½½ Kernel &#43; Initramfs â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Linux Kernel â”‚ â”‚ - åˆ›å»º rootfs (ramfs) â”‚ â”‚ - è§£åŒ… initramfs.cpio.gz â”‚ â”‚ - æ‰§è¡Œ /init â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ /init ç”¨æˆ·æ€è„šæœ¬ â”‚ â”‚ - æ¢æµ‹çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿ â”‚ â”‚ - æŒ‚è½½ /new_root â”‚ â”‚ - switch_root /new_root â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ çœŸæ­£æ ¹æ–‡ä»¶ç³»ç»Ÿ (ext4/NFS) â”‚ â”‚ /sbin/init â†’ systemd/init â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ğŸ§± 4. Initramfs å†…éƒ¨ç»“æ„ Initramfs æ˜¯ä¸€ä¸ª cpio æ ¼å¼çš„å‹ç¼©åŒ…ï¼ŒåŒ…å«æ—©æœŸå¯åŠ¨æ‰€éœ€çš„æœ€å°æ–‡ä»¶é›†ï¼š">

      <link rel="stylesheet" href="/css/root.min.0e732b812b9751962e01a7c4798a1211cd5f8ac8abec7f99793fe306989e459f.css" integrity="sha256-DnMrgSuXUZYuAafEeYoSEc1fisir7H&#43;ZeT/jBpieRZ8=" crossorigin="anonymous">
      <link rel="stylesheet" href="/css/bundle.min.d95a325399a05b50fe47dcf35b8229b8a2a014fcee5435cfb28204c6ac335fc5.css" integrity="sha256-2VoyU5mgW1D&#43;R9zzW4IpuKKgFPzuVDXPsoIExqwzX8U=" crossorigin="anonymous">

      <script src="/js/bundle.cc8ae9952dbfb731affafabdf26e5c60a6910047ff59ccdeaf1daebaa26c8830.js" integrity="sha256-zIrplS2/tzGv&#43;vq98m5cYKaRAEf/Wczerx2uuqJsiDA=" crossorigin="anonymous"></script><script defer src="/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js" integrity="sha256-ZFlLEl97eL30&#43;oMWlVkiu&#43;uxzWuu8/FmVL/KIDCfGPg="></script>
<script defer src="/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js" integrity="sha256-HZgPhN8R8&#43;t8jF8X9UHUmgYRYI3xed10&#43;n8GIl61as4="></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

</head>
<body class="notransition">
  <div id="container">
    <header id="main-header"><div role="navigation" aria-label="Main">
  <div class="nav-left">
    <a href="/" style="color: inherit;">Luyangã®Blog</a>
  </div>
  <div class="nav-right">
    <div style="position:absolute;width:0px;height:0px;">
      <div id="nav-dropdown-menu" class="hidden" href="#">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="/features/"
      >Features</a>
    </div>
    <div class="nav-item">
      <a href="/about/"
      >About</a>
    </div>
</div>
    </div>
    <a id="nav-dropdown-button" href="#"><svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
    <div id="nav-menu">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="/features/"
      >Features</a>
    </div>
    <div class="nav-item">
      <a href="/about/"
      >About</a>
    </div>
</div>
    <a id="theme-switcher" href="#">
<svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

<svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
  </div>
</div>
</header>
    <div class="flex grow">
      <div id="main-pane">
        <main id="main-content"><div class="single-header">
<ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="/">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content='1' />
    </li>
    <span>&nbspÂ»&nbsp</span>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="/posts/">
        <span itemprop="name">Posts</span>
      </a>
      <meta itemprop="position" content='2' />
    </li>
    <span>&nbspÂ»&nbsp</span>
</ol>
<h1>ğŸ§© Linux å†…æ ¸å¯åŠ¨é˜¶æ®µçš„ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£</h1><time class="dim" datetime="2025-10-11T23:30:00&#43;08:00">October 11, 2025</time><div class="term-container"><div class="tag">
        <a href="/tags/ubuntu/">#ubuntu</a>
      </div><div class="tag">
        <a href="/tags/systemd/">#systemd</a>
      </div><div class="tag">
        <a href="/tags/init/">#init</a>
      </div></ol></div>
  <section class="page-section"><h1 id="-linux-å†…æ ¸å¯åŠ¨é˜¶æ®µçš„ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£">ğŸ§© Linux å†…æ ¸å¯åŠ¨é˜¶æ®µçš„ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£</h1>
<h2 id="-1-æ¦‚è¿°overview">ğŸ“˜ 1. æ¦‚è¿°ï¼ˆOverviewï¼‰</h2>
<p>åœ¨ Linux å¯åŠ¨çš„æ—©æœŸé˜¶æ®µï¼Œå†…æ ¸å°šæœªæŒ‚è½½å®é™…çš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆä¾‹å¦‚ eMMC ä¸Šçš„ ext4 æˆ– NFS æ ¹ç›®å½•ï¼‰ã€‚<br>
ä¸ºäº†è®©ç³»ç»Ÿå…·å¤‡è¿è¡ŒåŸºæœ¬å‘½ä»¤ã€åŠ è½½é©±åŠ¨ã€æŒ‚è½½çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿçš„èƒ½åŠ›ï¼Œ<br>
å†…æ ¸å¼•å…¥äº†ä¸€ç§ç§°ä¸º <strong>ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»Ÿ (Early Root Filesystem)</strong> çš„æœºåˆ¶ã€‚</p>
<p>è¯¥æœºåˆ¶åœ¨ä¸åŒå†…æ ¸æ—¶ä»£æœ‰ä¸¤ç§ä¸»è¦å®ç°ï¼š</p>
<table>
  <thead>
      <tr>
          <th>é˜¶æ®µ</th>
          <th>æŠ€æœ¯åç§°</th>
          <th>å®ç°æ–¹å¼</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Linux 2.4 åŠä»¥å‰</td>
          <td><strong>initrd (initial RAM disk)</strong></td>
          <td>å°†å‹ç¼©é•œåƒåŠ è½½ä¸ºè™šæ‹Ÿå—è®¾å¤‡ <code>/dev/ram0</code>ï¼Œå†æŒ‚è½½</td>
      </tr>
      <tr>
          <td>Linux 2.6 åŠä»¥å</td>
          <td><strong>initramfs (initial RAM filesystem)</strong></td>
          <td>å°† <code>cpio</code> å‹ç¼©åŒ…ç›´æ¥è§£åŒ…è¿›å†…å­˜æ–‡ä»¶ç³»ç»Ÿï¼ˆramfs/tmpfsï¼‰</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="-2-å¯åŠ¨é˜¶æ®µæµç¨‹æ¦‚è§ˆ">âš™ï¸ 2. å¯åŠ¨é˜¶æ®µæµç¨‹æ¦‚è§ˆ</h2>
<p>Linux å¯åŠ¨é˜¶æ®µæ¶‰åŠä» <strong>bootloader â†’ å†…æ ¸ â†’ initramfs/initrd â†’ ç”¨æˆ·ç©ºé—´ init</strong> çš„å®Œæ•´é“¾è·¯ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1. BIOS/UEFI
</span></span><span style="display:flex;"><span>   â†“
</span></span><span style="display:flex;"><span>2. Bootloader (GRUB/U-Boot)
</span></span><span style="display:flex;"><span>   - åŠ è½½ vmlinuz (å†…æ ¸æ˜ åƒ)
</span></span><span style="display:flex;"><span>   - åŠ è½½ initramfs/initrd åˆ°å†…å­˜
</span></span><span style="display:flex;"><span>   â†“
</span></span><span style="display:flex;"><span>3. Linux Kernel
</span></span><span style="display:flex;"><span>   - åˆå§‹åŒ–å†…æ ¸å­ç³»ç»Ÿ
</span></span><span style="display:flex;"><span>   - åˆ›å»º rootfs (ramfs/tmpfs)
</span></span><span style="display:flex;"><span>   - è§£åŒ… initramfs æˆ–æŒ‚è½½ initrd
</span></span><span style="display:flex;"><span>   - æ‰§è¡Œä¸´æ—¶æ ¹ä¸­çš„ /init
</span></span><span style="display:flex;"><span>   â†“
</span></span><span style="display:flex;"><span>4. /init
</span></span><span style="display:flex;"><span>   - æ¢æµ‹çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆeMMC/NFS/overlayï¼‰
</span></span><span style="display:flex;"><span>   - æŒ‚è½½ç›®æ ‡æ ¹ç›®å½•
</span></span><span style="display:flex;"><span>   - è°ƒç”¨ `switch_root` æˆ– `pivot_root`
</span></span><span style="display:flex;"><span>   â†“
</span></span><span style="display:flex;"><span>5. å¯åŠ¨çœŸæ­£çš„ /sbin/init æˆ– systemd
</span></span></code></pre></div><hr>
<h2 id="-3-æŠ€æœ¯æ¶æ„ä¸æ•°æ®æµ">ğŸ§© 3. æŠ€æœ¯æ¶æ„ä¸æ•°æ®æµ</h2>
<h3 id="31-é€»è¾‘ç»“æ„å›¾">3.1 é€»è¾‘ç»“æ„å›¾</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>â”‚ Bootloader                 â”‚
</span></span><span style="display:flex;"><span>â”‚  - åŠ è½½ Kernel + Initramfs â”‚
</span></span><span style="display:flex;"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span>             â”‚
</span></span><span style="display:flex;"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>â”‚ Linux Kernel               â”‚
</span></span><span style="display:flex;"><span>â”‚  - åˆ›å»º rootfs (ramfs)     â”‚
</span></span><span style="display:flex;"><span>â”‚  - è§£åŒ… initramfs.cpio.gz  â”‚
</span></span><span style="display:flex;"><span>â”‚  - æ‰§è¡Œ /init              â”‚
</span></span><span style="display:flex;"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span>             â”‚
</span></span><span style="display:flex;"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>â”‚ /init ç”¨æˆ·æ€è„šæœ¬           â”‚
</span></span><span style="display:flex;"><span>â”‚  - æ¢æµ‹çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿ      â”‚
</span></span><span style="display:flex;"><span>â”‚  - æŒ‚è½½ /new_root          â”‚
</span></span><span style="display:flex;"><span>â”‚  - switch_root /new_root   â”‚
</span></span><span style="display:flex;"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span>             â”‚
</span></span><span style="display:flex;"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>â”‚ çœŸæ­£æ ¹æ–‡ä»¶ç³»ç»Ÿ (ext4/NFS)  â”‚
</span></span><span style="display:flex;"><span>â”‚ /sbin/init â†’ systemd/init  â”‚
</span></span><span style="display:flex;"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span></code></pre></div><hr>
<h2 id="-4-initramfs-å†…éƒ¨ç»“æ„">ğŸ§± 4. Initramfs å†…éƒ¨ç»“æ„</h2>
<p>Initramfs æ˜¯ä¸€ä¸ª <strong>cpio æ ¼å¼çš„å‹ç¼©åŒ…</strong>ï¼ŒåŒ…å«æ—©æœŸå¯åŠ¨æ‰€éœ€çš„æœ€å°æ–‡ä»¶é›†ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>initramfs/
</span></span><span style="display:flex;"><span>â”œâ”€â”€ bin/
</span></span><span style="display:flex;"><span>â”‚   â””â”€â”€ busybox
</span></span><span style="display:flex;"><span>â”œâ”€â”€ dev/
</span></span><span style="display:flex;"><span>â”œâ”€â”€ etc/
</span></span><span style="display:flex;"><span>â”œâ”€â”€ proc/
</span></span><span style="display:flex;"><span>â”œâ”€â”€ sys/
</span></span><span style="display:flex;"><span>â”œâ”€â”€ init          â† å¯åŠ¨è„šæœ¬ï¼ˆæœ€å…³é”®ï¼‰
</span></span><span style="display:flex;"><span>â””â”€â”€ lib/
</span></span></code></pre></div><p>å…¸å‹åˆ›å»ºå‘½ä»¤ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>find . | cpio -H newc -o | gzip &gt; ../initramfs.cpio.gz
</span></span></code></pre></div><p>åŠ è½½æ–¹å¼ï¼ˆç”± Bootloader æŒ‡å®šï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>qemu-system-x86_64 -kernel bzImage -initrd initramfs.cpio.gz -append <span style="color:#e6db74">&#34;console=ttyS0&#34;</span>
</span></span></code></pre></div><hr>
<h2 id="-5-å†…æ ¸è§£åŒ…ä¸æŒ‚è½½æµç¨‹æºç çº§">ğŸ§© 5. å†…æ ¸è§£åŒ…ä¸æŒ‚è½½æµç¨‹ï¼ˆæºç çº§ï¼‰</h2>
<p>ä»¥ Linux 6.x ä¸ºä¾‹ï¼Œä¸»æµç¨‹å¦‚ä¸‹ï¼š</p>
<h3 id="51-è°ƒç”¨é“¾æ¦‚è§ˆ">5.1 è°ƒç”¨é“¾æ¦‚è§ˆ</h3>
<pre tabindex="0"><code>start_kernel()
 â””â”€â”€ rest_init()
      â””â”€â”€ kernel_init()
           â””â”€â”€ prepare_namespace()
                â”œâ”€â”€ create_rootfs()
                â”œâ”€â”€ unpack_to_rootfs()     â† è§£åŒ… initramfs.cpio
                â””â”€â”€ run_init_process(&#34;/init&#34;)
</code></pre><h3 id="52-å…³é”®å‡½æ•°è¯´æ˜">5.2 å…³é”®å‡½æ•°è¯´æ˜</h3>
<table>
  <thead>
      <tr>
          <th>å‡½æ•°</th>
          <th>æ–‡ä»¶</th>
          <th>åŠŸèƒ½æè¿°</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>populate_rootfs()</code></td>
          <td><code>init/initramfs.c</code></td>
          <td>å°† cpio åŒ…å†…å®¹è§£åŒ…åˆ°å†…å­˜æ–‡ä»¶ç³»ç»Ÿ</td>
      </tr>
      <tr>
          <td><code>do_mounts_initrd()</code></td>
          <td><code>init/do_mounts_initrd.c</code></td>
          <td>è‹¥ä¸ºæ—§ç‰ˆ initrdï¼ŒæŒ‚è½½ <code>/dev/ram0</code></td>
      </tr>
      <tr>
          <td><code>run_init_process()</code></td>
          <td><code>init/main.c</code></td>
          <td>å°è¯•æ‰§è¡Œ <code>/init</code>ã€<code>/sbin/init</code> ç­‰</td>
      </tr>
      <tr>
          <td><code>switch_root()</code></td>
          <td><code>/usr/sbin/switch_root.c</code></td>
          <td>ä» initramfs åˆ‡æ¢åˆ°çœŸæ­£ rootfs</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="-6-å…³é”®å†…æ ¸é…ç½®é¡¹">ğŸ§© 6. å…³é”®å†…æ ¸é…ç½®é¡¹</h2>
<table>
  <thead>
      <tr>
          <th>é…ç½®é¡¹</th>
          <th>ä½œç”¨</th>
          <th>å…¸å‹å€¼</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>CONFIG_BLK_DEV_INITRD</code></td>
          <td>å¯ç”¨æ—§ç‰ˆ initrd æ”¯æŒ</td>
          <td><code>y</code></td>
      </tr>
      <tr>
          <td><code>CONFIG_INITRAMFS_SOURCE</code></td>
          <td>æŒ‡å®šå†…åµŒ initramfs æºè·¯å¾„</td>
          <td><code>&quot;initramfs_list&quot;</code></td>
      </tr>
      <tr>
          <td><code>CONFIG_RD_GZIP</code></td>
          <td>æ”¯æŒ gzip å‹ç¼©</td>
          <td><code>y</code></td>
      </tr>
      <tr>
          <td><code>CONFIG_TMPFS</code></td>
          <td>å…è®¸ tmpfs ç”¨ä½œ rootfs</td>
          <td><code>y</code></td>
      </tr>
      <tr>
          <td><code>CONFIG_INIT_ENV_ARG_LIMIT</code></td>
          <td>æ§åˆ¶ <code>/init</code> å‚æ•°é™åˆ¶</td>
          <td>é»˜è®¤ 32</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="-7-å†…æ ¸å†…åµŒ-initramfs">ğŸ§© 7. å†…æ ¸å†…åµŒ Initramfs</h2>
<p>å¯ä»¥ç›´æ¥å°† initramfs æ‰“åŒ…è¿›å†…æ ¸ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make menuconfig
</span></span><span style="display:flex;"><span>â†’ General setup â†’ Initramfs source file<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>æˆ–é€šè¿‡ç¯å¢ƒå˜é‡ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make INITRAMFS_SOURCE<span style="color:#f92672">=</span>../rootfs
</span></span></code></pre></div><p>ç”Ÿæˆçš„å†…æ ¸ä¼šåœ¨ <code>usr/initramfs_data.c</code> ä¸­åµŒå…¥äºŒè¿›åˆ¶æ•°æ®ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> __initramfs_start[];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> __initramfs_end[];
</span></span></code></pre></div><hr>
<h2 id="-8-init-å¯åŠ¨è„šæœ¬èŒè´£">âš™ï¸ 8. /init å¯åŠ¨è„šæœ¬èŒè´£</h2>
<p><code>/init</code> æ˜¯ initramfs çš„â€œå…¥å£ç‚¹â€ï¼Œå®ƒåœ¨çœŸæ­£çš„ <code>/sbin/init</code> å¯åŠ¨å‰æ‰§è¡Œã€‚</p>
<p>å…¸å‹å®ç°ï¼ˆBusyBox é£æ ¼ï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>echo <span style="color:#e6db74">&#34;[INITRAMFS] Booting early init system...&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mount -t proc proc /proc
</span></span><span style="display:flex;"><span>mount -t sysfs sysfs /sys
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ£€æµ‹çœŸå®æ ¹åˆ†åŒº</span>
</span></span><span style="display:flex;"><span>mount /dev/mmcblk0p2 /new_root
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åˆ‡æ¢æ ¹æ–‡ä»¶ç³»ç»Ÿ</span>
</span></span><span style="display:flex;"><span>exec switch_root /new_root /sbin/init
</span></span></code></pre></div><hr>
<h2 id="-9-ä¸çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿçš„åˆ‡æ¢æœºåˆ¶">ğŸ”© 9. ä¸çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿçš„åˆ‡æ¢æœºåˆ¶</h2>
<h3 id="91-pivot_rootæ—§æ–¹å¼">9.1 pivot_rootï¼ˆæ—§æ–¹å¼ï¼‰</h3>
<ul>
<li>å°†æ–°æ ¹æ–‡ä»¶ç³»ç»Ÿåˆ‡æ¢åˆ° <code>/new_root</code></li>
<li>åŸæ ¹æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ° <code>/new_root/initrd</code></li>
<li>å·²å¼ƒç”¨ï¼Œéœ€æ‰‹åŠ¨å¸è½½æ—§æ ¹</li>
</ul>
<h3 id="92-switch_rootç°ä»£æ–¹å¼">9.2 switch_rootï¼ˆç°ä»£æ–¹å¼ï¼‰</h3>
<ul>
<li>æ›¿æ¢æ ¹å¹¶æ¸…ç©ºæ—§æ–‡ä»¶ç³»ç»Ÿ</li>
<li>ç”± BusyBox æˆ– util-linux æä¾›</li>
<li>æ›´ç®€æ´ã€å®‰å…¨</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>switch_root /new_root /sbin/init
</span></span></code></pre></div><hr>
<h2 id="-10-è°ƒè¯•ä¸éªŒè¯">ğŸ§© 10. è°ƒè¯•ä¸éªŒè¯</h2>
<table>
  <thead>
      <tr>
          <th>æ“ä½œç›®æ ‡</th>
          <th>å‘½ä»¤æˆ–æ–¹æ³•</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>æŸ¥çœ‹å†…æ ¸æ˜¯å¦åŠ è½½ initramfs</td>
          <td><code>dmesg</code></td>
      </tr>
      <tr>
          <td>è§£åŒ… initramfs æ–‡ä»¶</td>
          <td><code>gzip -dc initramfs.cpio.gz</code></td>
      </tr>
      <tr>
          <td>åœ¨ /init ä¸­æ‰“è°ƒè¯•æ—¥å¿—</td>
          <td><code>echo &quot;step 1...&quot; &gt; /dev/console</code></td>
      </tr>
      <tr>
          <td>æŸ¥çœ‹ rootfs ç±»å‹</td>
          <td><code>cat /proc/filesystems</code></td>
      </tr>
      <tr>
          <td>åˆ‡æ¢å¤±è´¥åŸå› åˆ†æ</td>
          <td>æ£€æŸ¥ <code>/dev</code>, <code>/proc</code>, <code>/sys</code> æ˜¯å¦æŒ‚è½½</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="-11-åµŒå…¥å¼ç³»ç»Ÿåº”ç”¨æ¡ˆä¾‹">ğŸ§© 11. åµŒå…¥å¼ç³»ç»Ÿåº”ç”¨æ¡ˆä¾‹</h2>
<table>
  <thead>
      <tr>
          <th>åº”ç”¨åœºæ™¯</th>
          <th>æè¿°</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>å•é•œåƒç³»ç»Ÿ</strong></td>
          <td>BusyBox + initramfs ç›´æ¥ä½œä¸ºç³»ç»Ÿæ ¹ï¼Œæ— éœ€å¤–éƒ¨å­˜å‚¨</td>
      </tr>
      <tr>
          <td><strong>å›ºä»¶å‡çº§ç³»ç»Ÿ</strong></td>
          <td>initramfs å¯åŠ¨åæ ¡éªŒã€åˆ·å†™ã€é‡å¯</td>
      </tr>
      <tr>
          <td><strong>åŠ å¯†æ–‡ä»¶ç³»ç»Ÿå¯åŠ¨</strong></td>
          <td>initramfs ä¸­è´Ÿè´£è§£å¯†æ ¹åˆ†åŒºååˆ‡æ¢æ ¹</td>
      </tr>
      <tr>
          <td><strong>å®¹ç¾/æ•‘æ´ç³»ç»Ÿ</strong></td>
          <td>æä¾›æœ€å°æ¢å¤ç¯å¢ƒ (rescue shell)</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="-12-å®éªŒéªŒè¯qemu-demo">ğŸ§© 12. å®éªŒéªŒè¯ï¼ˆQEMU Demoï¼‰</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># æ„å»º busybox</span>
</span></span><span style="display:flex;"><span>make defconfig
</span></span><span style="display:flex;"><span>make install
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ„å»º initramfs</span>
</span></span><span style="display:flex;"><span>mkdir -p rootfs/<span style="color:#f92672">{</span>bin,dev,proc,sys<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>cp -a _install/* rootfs/
</span></span><span style="display:flex;"><span>echo -e <span style="color:#e6db74">&#39;#!/bin/sh\nmount -t proc proc /proc\nmount -t sysfs sysfs /sys\necho &#34;Hello Initramfs&#34;\nexec /bin/sh&#39;</span> &gt; rootfs/init
</span></span><span style="display:flex;"><span>chmod +x rootfs/init
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>find . | cpio -H newc -o | gzip &gt; ../initramfs.cpio.gz
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¯åŠ¨ QEMU</span>
</span></span><span style="display:flex;"><span>qemu-system-x86_64 -kernel bzImage -initrd initramfs.cpio.gz -append <span style="color:#e6db74">&#34;console=ttyS0&#34;</span>
</span></span></code></pre></div><p>è¾“å‡ºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>[INITRAMFS] Booting...
</span></span><span style="display:flex;"><span>Hello Initramfs
</span></span><span style="display:flex;"><span>/ #
</span></span></code></pre></div><hr>
<h2 id="-13-å†…å­˜å ç”¨ä¸æ€§èƒ½åˆ†æ">ğŸ§© 13. å†…å­˜å ç”¨ä¸æ€§èƒ½åˆ†æ</h2>
<table>
  <thead>
      <tr>
          <th>é¡¹ç›®</th>
          <th>initrd</th>
          <th>initramfs</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>è§£åŒ…æ–¹å¼</td>
          <td>è§£å‹åˆ°å—è®¾å¤‡</td>
          <td>ç›´æ¥å±•å¼€åˆ° tmpfs</td>
      </tr>
      <tr>
          <td>å†…å­˜å ç”¨</td>
          <td>åŒå€ï¼ˆå—è®¾å¤‡+æ–‡ä»¶ç³»ç»Ÿï¼‰</td>
          <td>å•ä»½ï¼ˆç›´æ¥æ–‡ä»¶ç¼“å­˜ï¼‰</td>
      </tr>
      <tr>
          <td>å¯åŠ¨é€Ÿåº¦</td>
          <td>è¾ƒæ…¢</td>
          <td>å¿« 30â€“50%</td>
      </tr>
      <tr>
          <td>å ç”¨ç»“æ„</td>
          <td>é¡µç¼“å­˜ + ramdisk</td>
          <td>VFS ç¼“å­˜</td>
      </tr>
      <tr>
          <td>å›æ”¶æœºåˆ¶</td>
          <td>æ‰‹åŠ¨å¸è½½</td>
          <td>è‡ªåŠ¨å›æ”¶ tmpfs ç©ºé—´</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="-14-æ€»ç»“">ğŸ§© 14. æ€»ç»“</h2>
<table>
  <thead>
      <tr>
          <th>é¡¹ç›®</th>
          <th>initrd</th>
          <th>initramfs</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>æ–‡ä»¶æ ¼å¼</td>
          <td>ext2 é•œåƒ</td>
          <td>cpio åŒ…</td>
      </tr>
      <tr>
          <td>æ˜¯å¦éœ€å—è®¾å¤‡</td>
          <td>æ˜¯</td>
          <td>å¦</td>
      </tr>
      <tr>
          <td>æ–‡ä»¶ç³»ç»Ÿç±»å‹</td>
          <td>ext2</td>
          <td>tmpfs/ramfs</td>
      </tr>
      <tr>
          <td>å…¼å®¹æ€§</td>
          <td>è€å†…æ ¸</td>
          <td>æ–°å†…æ ¸ï¼ˆ2.6+ï¼‰</td>
      </tr>
      <tr>
          <td>æ€§èƒ½</td>
          <td>ä¸€èˆ¬</td>
          <td>ä¼˜ç§€</td>
      </tr>
      <tr>
          <td>æ¨èä½¿ç”¨</td>
          <td>âŒ</td>
          <td>âœ…</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="-15-å‚è€ƒèµ„æ–™">ğŸ§© 15. å‚è€ƒèµ„æ–™</h2>
<ul>
<li>Linux Kernel Documentation<br>
<code>/usr/src/linux/Documentation/filesystems/ramfs-rootfs-initramfs.txt</code></li>
<li>BusyBox å®˜æ–¹æ–‡æ¡£: <a href="https://busybox.net/">https://busybox.net/</a></li>
<li>å†…æ ¸æºç ï¼š<code>init/initramfs.c</code>, <code>init/main.c</code></li>
<li>LWN: <em>&ldquo;Early userspace in Linux 2.6&rdquo;</em></li>
<li>Yocto Project: <em>initramfs integration guide</em></li>
</ul>
</section></main>
        <footer id="main-footer"><div class="footer">
  <a href="#">Scroll to Top</a>
  <div class="footer-copyright">
    <div class="dim">Â© 2025 Lu Yang</div>
    <div>Made with â¤ï¸ and powered by <a href="https://github.com/math-queiroz/rusty-typewriter" target="_blank">Rusty Typewriter</a> theme for <a href="https://gohugo.io/" target="_blank">Hugo</a></div>
  </div>
</div>
</footer>
      </div><aside id="side-pane" class="side-sticky"><div class="side-details">
    <span>604 words</span>
    <span>7 - 9 minutes read</span></div><h3>Table Of Contents</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#-1-æ¦‚è¿°overview">ğŸ“˜ 1. æ¦‚è¿°ï¼ˆOverviewï¼‰</a></li>
    <li><a href="#-2-å¯åŠ¨é˜¶æ®µæµç¨‹æ¦‚è§ˆ">âš™ï¸ 2. å¯åŠ¨é˜¶æ®µæµç¨‹æ¦‚è§ˆ</a></li>
    <li><a href="#-3-æŠ€æœ¯æ¶æ„ä¸æ•°æ®æµ">ğŸ§© 3. æŠ€æœ¯æ¶æ„ä¸æ•°æ®æµ</a>
      <ul>
        <li><a href="#31-é€»è¾‘ç»“æ„å›¾">3.1 é€»è¾‘ç»“æ„å›¾</a></li>
      </ul>
    </li>
    <li><a href="#-4-initramfs-å†…éƒ¨ç»“æ„">ğŸ§± 4. Initramfs å†…éƒ¨ç»“æ„</a></li>
    <li><a href="#-5-å†…æ ¸è§£åŒ…ä¸æŒ‚è½½æµç¨‹æºç çº§">ğŸ§© 5. å†…æ ¸è§£åŒ…ä¸æŒ‚è½½æµç¨‹ï¼ˆæºç çº§ï¼‰</a>
      <ul>
        <li><a href="#51-è°ƒç”¨é“¾æ¦‚è§ˆ">5.1 è°ƒç”¨é“¾æ¦‚è§ˆ</a></li>
        <li><a href="#52-å…³é”®å‡½æ•°è¯´æ˜">5.2 å…³é”®å‡½æ•°è¯´æ˜</a></li>
      </ul>
    </li>
    <li><a href="#-6-å…³é”®å†…æ ¸é…ç½®é¡¹">ğŸ§© 6. å…³é”®å†…æ ¸é…ç½®é¡¹</a></li>
    <li><a href="#-7-å†…æ ¸å†…åµŒ-initramfs">ğŸ§© 7. å†…æ ¸å†…åµŒ Initramfs</a></li>
    <li><a href="#-8-init-å¯åŠ¨è„šæœ¬èŒè´£">âš™ï¸ 8. /init å¯åŠ¨è„šæœ¬èŒè´£</a></li>
    <li><a href="#-9-ä¸çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿçš„åˆ‡æ¢æœºåˆ¶">ğŸ”© 9. ä¸çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿçš„åˆ‡æ¢æœºåˆ¶</a>
      <ul>
        <li><a href="#91-pivot_rootæ—§æ–¹å¼">9.1 pivot_rootï¼ˆæ—§æ–¹å¼ï¼‰</a></li>
        <li><a href="#92-switch_rootç°ä»£æ–¹å¼">9.2 switch_rootï¼ˆç°ä»£æ–¹å¼ï¼‰</a></li>
      </ul>
    </li>
    <li><a href="#-10-è°ƒè¯•ä¸éªŒè¯">ğŸ§© 10. è°ƒè¯•ä¸éªŒè¯</a></li>
    <li><a href="#-11-åµŒå…¥å¼ç³»ç»Ÿåº”ç”¨æ¡ˆä¾‹">ğŸ§© 11. åµŒå…¥å¼ç³»ç»Ÿåº”ç”¨æ¡ˆä¾‹</a></li>
    <li><a href="#-12-å®éªŒéªŒè¯qemu-demo">ğŸ§© 12. å®éªŒéªŒè¯ï¼ˆQEMU Demoï¼‰</a></li>
    <li><a href="#-13-å†…å­˜å ç”¨ä¸æ€§èƒ½åˆ†æ">ğŸ§© 13. å†…å­˜å ç”¨ä¸æ€§èƒ½åˆ†æ</a></li>
    <li><a href="#-14-æ€»ç»“">ğŸ§© 14. æ€»ç»“</a></li>
    <li><a href="#-15-å‚è€ƒèµ„æ–™">ğŸ§© 15. å‚è€ƒèµ„æ–™</a></li>
  </ul>
</nav><h3>Related</h3>
    <ul><li><a href="/posts/--dracut-vs-initramfs-tools-%E4%B8%80%E5%9C%BAlinux%E6%97%A9%E6%9C%9F%E5%BC%95%E5%AF%BC%E7%9A%84%E6%B7%B1%E5%BA%A6%E5%8F%98%E9%9D%A9/">ğŸ§©  Dracut vs Initramfs-tools ä¸€åœºLinuxæ—©æœŸå¼•å¯¼çš„æ·±åº¦å˜é©</a></li><li><a href="/posts/linux-%E5%88%9D%E5%A7%8B%E5%8C%96%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%E4%BB%8E-sysvinit-%E5%88%B0-systemd-%E7%9A%84%E6%BC%94%E8%BF%9B/">ğŸ“˜Linux åˆå§‹åŒ–ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£ï¼šä» SysVinit åˆ° systemd çš„æ¼”è¿›</a></li><li><a href="/posts/systemd-%E5%8D%95%E5%85%83%E6%96%87%E4%BB%B6/">ğŸ“˜systemd å•å…ƒæ–‡ä»¶</a></li><li><a href="/posts/svn-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">ğŸ“˜SVN æœåŠ¡å™¨ç¯å¢ƒæ­å»º</a></li><li><a href="/posts/ubuntu_git_server_build_push_code/">Ubuntu git ä»“åº“æ­å»ºåŠä»£ç ä¸Šä¼ </a></li></ul></aside></div>
  </div>
</body>
</html>
