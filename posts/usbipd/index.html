<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>wsl 使用 usbipd 访问 USB 设备 | LuyangのBlog</title>
<link rel="icon" href="favicon.svg" sizes="any" type="image/svg+xml" /><meta property="og:url" content="https://luyoungcn.github.io/posts/usbipd/">
  <meta property="og:site_name" content="LuyangのBlog">
  <meta property="og:title" content="wsl 使用 usbipd 访问 USB 设备">
  <meta property="og:description" content="注意：如下 usbipd 命令需要在 以管理员身份运行 的 powershell 中执行
usbipd: USB/IP open-source project
PS C:\WINDOWS\system32&gt; usbipd wsl attach --busid 4-4 usbipd: error: The service is currently not running; a reboot should fix that. https://github.com/dorssel/usbipd-win/issues/122
参考了上述链接，也做了重启，仍然报错，于是决定升级 usbipd
如下步骤也可以作为如何安装 usbipd，wsl 通过 usbipd 访问 USB 设备
usbipd 安装使用 https://github.com/dorssel/usbipd-win/releases/tag/v4.0.0
下载 usbipd-win_4.0.0.msi 并安装
需要注意的是，安装了这个版本发现 usbipd 命令的使用方式变了
PS C:\WINDOWS\system32&gt; usbipd.exe wsl list usbipd: error: The &#39;wsl&#39; subcommand has been removed. Learn about the new syntax at https://learn.microsoft.com/windows/wsl/connect-usb#attach-a-usb-device. PS C:\WINDOWS\system32&gt; usbipd attach --busid 4-4 Option &#39;--wsl&#39; is required. usbipd-win 4.0.0 Description: Attaches a USB device to a client. Currently, only WSL is supported. Other clients need to perform an attach using client-side tooling. Exactly one of the options &#39;--busid&#39; or &#39;--hardware-id&#39; is required. Usage: usbipd attach [options] Options: -a, --auto-attach Automatically re-attach when the device is detached or unplugged -b, --busid &lt;BUSID&gt; Attach device having &lt;BUSID&gt; -i, --hardware-id &lt;VID:PID&gt; Attach device having &lt;VID&gt;:&lt;PID&gt; -w, --wsl &lt;[DISTRIBUTION]&gt; (REQUIRED) Attach to WSL, optionally specifying the distribution to use -?, -h, --help Show help and usage information https://github.com/MicrosoftDocs/WSL/issues/1868">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="1970-01-01T00:00:00+08:00">
    <meta property="article:modified_time" content="1970-01-01T00:00:00+08:00">
    <meta property="article:tag" content="PUBLIC">
    <meta property="article:tag" content="Usb">
    <meta property="article:tag" content="Wsl">
    <meta property="article:tag" content="Usbipd">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="wsl 使用 usbipd 访问 USB 设备">
  <meta name="twitter:description" content="注意：如下 usbipd 命令需要在 以管理员身份运行 的 powershell 中执行
usbipd: USB/IP open-source project
PS C:\WINDOWS\system32&gt; usbipd wsl attach --busid 4-4 usbipd: error: The service is currently not running; a reboot should fix that. https://github.com/dorssel/usbipd-win/issues/122
参考了上述链接，也做了重启，仍然报错，于是决定升级 usbipd
如下步骤也可以作为如何安装 usbipd，wsl 通过 usbipd 访问 USB 设备
usbipd 安装使用 https://github.com/dorssel/usbipd-win/releases/tag/v4.0.0
下载 usbipd-win_4.0.0.msi 并安装
需要注意的是，安装了这个版本发现 usbipd 命令的使用方式变了
PS C:\WINDOWS\system32&gt; usbipd.exe wsl list usbipd: error: The &#39;wsl&#39; subcommand has been removed. Learn about the new syntax at https://learn.microsoft.com/windows/wsl/connect-usb#attach-a-usb-device. PS C:\WINDOWS\system32&gt; usbipd attach --busid 4-4 Option &#39;--wsl&#39; is required. usbipd-win 4.0.0 Description: Attaches a USB device to a client. Currently, only WSL is supported. Other clients need to perform an attach using client-side tooling. Exactly one of the options &#39;--busid&#39; or &#39;--hardware-id&#39; is required. Usage: usbipd attach [options] Options: -a, --auto-attach Automatically re-attach when the device is detached or unplugged -b, --busid &lt;BUSID&gt; Attach device having &lt;BUSID&gt; -i, --hardware-id &lt;VID:PID&gt; Attach device having &lt;VID&gt;:&lt;PID&gt; -w, --wsl &lt;[DISTRIBUTION]&gt; (REQUIRED) Attach to WSL, optionally specifying the distribution to use -?, -h, --help Show help and usage information https://github.com/MicrosoftDocs/WSL/issues/1868">

      <link rel="stylesheet" href="/css/root.min.0e732b812b9751962e01a7c4798a1211cd5f8ac8abec7f99793fe306989e459f.css" integrity="sha256-DnMrgSuXUZYuAafEeYoSEc1fisir7H&#43;ZeT/jBpieRZ8=" crossorigin="anonymous">
      <link rel="stylesheet" href="/css/bundle.min.e139b0e3b3aff8f0e8e0272554b671a06c857a42278b36c539d96c69ddee2ca2.css" integrity="sha256-4Tmw47Ov&#43;PDo4CclVLZxoGyFekInizbFOdlsad3uLKI=" crossorigin="anonymous">

      <script src="/js/bundle.995e4ec99401021e081ec256bee66154ef7f4e5136809432513b2e6d014b4b1d.js" integrity="sha256-mV5OyZQBAh4IHsJWvuZhVO9/TlE2gJQyUTsubQFLSx0=" crossorigin="anonymous"></script><script defer src="/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js" integrity="sha256-ZFlLEl97eL30&#43;oMWlVkiu&#43;uxzWuu8/FmVL/KIDCfGPg="></script>
<script defer src="/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js" integrity="sha256-HZgPhN8R8&#43;t8jF8X9UHUmgYRYI3xed10&#43;n8GIl61as4="></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

</head>
<body class="notransition">
  <div id="container">
    <header id="main-header"><div role="navigation" aria-label="Main">
  <div class="nav-left">
    <a href="https://luyoungcn.github.io/" style="color: inherit;">LuyangのBlog</a>
  </div>
  <div class="nav-right">
    <div style="position:absolute;width:0px;height:0px;">
      <div id="nav-dropdown-menu" class="hidden" href="#">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
</div>
    </div>
    <a id="nav-dropdown-button" href="#"><svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
    <div id="nav-menu">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
</div>
    <a id="theme-switcher" href="#">
<svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

<svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
  </div>
</div>
</header>
    <div class="flex grow">
      <div id="main-pane">
        <main id="main-content"><div class="single-header">
<ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="https://luyoungcn.github.io/">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content='1' />
    </li>
    <span>&nbsp»&nbsp</span>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="https://luyoungcn.github.io/posts/">
        <span itemprop="name">Posts</span>
      </a>
      <meta itemprop="position" content='2' />
    </li>
    <span>&nbsp»&nbsp</span>
</ol>
<h1>wsl 使用 usbipd 访问 USB 设备</h1><time class="dim" datetime="1970-01-01T00:00:00&#43;08:00">January 1, 1970</time><div class="term-container"><div class="tag">
        <a href="https://luyoungcn.github.io/tags/public/">#PUBLIC</a>
      </div><div class="tag">
        <a href="https://luyoungcn.github.io/tags/usb/">#USB</a>
      </div><div class="tag">
        <a href="https://luyoungcn.github.io/tags/wsl/">#WSL</a>
      </div><div class="tag">
        <a href="https://luyoungcn.github.io/tags/usbipd/">#usbipd</a>
      </div></ol></div>
  <section class="page-section"><blockquote>
<p>注意：如下 usbipd 命令需要在 <code>以管理员身份运行</code> 的 powershell 中执行</p></blockquote>
<p>usbipd: USB/IP open-source project</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>PS C:<span style="color:#ae81ff">\W</span>INDOWS<span style="color:#ae81ff">\s</span>ystem32&gt; usbipd wsl attach --busid 4-4
</span></span><span style="display:flex;"><span>usbipd: error: The service is currently not running; a reboot should fix that.
</span></span></code></pre></div><p><a href="https://github.com/dorssel/usbipd-win/issues/122">https://github.com/dorssel/usbipd-win/issues/122</a></p>
<p>参考了上述链接，也做了重启，仍然报错，于是决定升级 <code>usbipd</code></p>
<p>如下步骤也可以作为如何安装 usbipd，wsl 通过 usbipd 访问 USB 设备</p>
<h2 id="usbipd-安装使用">usbipd 安装使用</h2>
<p><a href="https://github.com/dorssel/usbipd-win/releases/tag/v4.0.0">https://github.com/dorssel/usbipd-win/releases/tag/v4.0.0</a></p>
<p>下载 <a href="https://github.com/dorssel/usbipd-win/releases/download/v4.0.0/usbipd-win_4.0.0.msi">usbipd-win_4.0.0.msi</a> 并安装</p>
<p>需要注意的是，安装了这个版本发现 usbipd 命令的使用方式变了</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>PS C:<span style="color:#ae81ff">\W</span>INDOWS<span style="color:#ae81ff">\s</span>ystem32&gt; usbipd.exe wsl list
</span></span><span style="display:flex;"><span>usbipd: error: The <span style="color:#e6db74">&#39;wsl&#39;</span> subcommand has been removed. Learn about the new syntax at https://learn.microsoft.com/windows/wsl/connect-usb#attach-a-usb-device.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>PS C:<span style="color:#ae81ff">\W</span>INDOWS<span style="color:#ae81ff">\s</span>ystem32&gt; usbipd attach --busid 4-4
</span></span><span style="display:flex;"><span>Option <span style="color:#e6db74">&#39;--wsl&#39;</span> is required.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>usbipd-win 4.0.0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Description:
</span></span><span style="display:flex;"><span>  Attaches a USB device to a client.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Currently, only WSL is supported. Other clients need to perform an attach using client-side tooling.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Exactly one of the options <span style="color:#e6db74">&#39;--busid&#39;</span> or <span style="color:#e6db74">&#39;--hardware-id&#39;</span> is required.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Usage:
</span></span><span style="display:flex;"><span>  usbipd attach <span style="color:#f92672">[</span>options<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Options:
</span></span><span style="display:flex;"><span>  -a, --auto-attach                      Automatically re-attach when the device is detached or unplugged
</span></span><span style="display:flex;"><span>  -b, --busid &lt;BUSID&gt;                    Attach device having &lt;BUSID&gt;
</span></span><span style="display:flex;"><span>  -i, --hardware-id &lt;VID:PID&gt;            Attach device having &lt;VID&gt;:&lt;PID&gt;
</span></span><span style="display:flex;"><span>  -w, --wsl &lt;<span style="color:#f92672">[</span>DISTRIBUTION<span style="color:#f92672">]</span>&gt; <span style="color:#f92672">(</span>REQUIRED<span style="color:#f92672">)</span>  Attach to WSL, optionally specifying the distribution to use
</span></span><span style="display:flex;"><span>  -?, -h, --help                         Show help and usage information
</span></span></code></pre></div><p><a href="https://github.com/MicrosoftDocs/WSL/issues/1868">https://github.com/MicrosoftDocs/WSL/issues/1868</a></p>
<p>正确的使用方式</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>PS C:<span style="color:#ae81ff">\W</span>INDOWS<span style="color:#ae81ff">\s</span>ystem32&gt; usbipd.exe list
</span></span><span style="display:flex;"><span>Connected:
</span></span><span style="display:flex;"><span>BUSID  VID:PID    DEVICE                                                        STATE
</span></span><span style="display:flex;"><span>1-1    30c9:0096  HP 5MP Camera, HP IR Camera, Camera DFU Device                Not shared
</span></span><span style="display:flex;"><span>1-10   8087:0033  英特尔<span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> 无线 Bluetooth<span style="color:#f92672">(</span>R<span style="color:#f92672">)</span>                                   Not shared
</span></span><span style="display:flex;"><span>4-3    0483:572a  USB 串行设备 <span style="color:#f92672">(</span>COM5<span style="color:#f92672">)</span>, USB 大容量存储设备                       Not shared
</span></span><span style="display:flex;"><span>4-4    3415:0308  adb                                                           Not shared
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Persisted:
</span></span><span style="display:flex;"><span>GUID                                  DEVICE
</span></span><span style="display:flex;"><span>1bfb0182-4c41-487f-bdcb-530e2d2cd7ea  USB Serial Converter
</span></span><span style="display:flex;"><span>d7c7745c-3765-49a5-8ad0-c4697d874eb4  Silicon Labs Dual CP2105 USB to UART Bridge: Enhanced COM...r
</span></span><span style="display:flex;"><span>e7af58b3-5b09-4385-a043-6256222507d3  bst usb gadget <span style="color:#66d9ef">function</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>usbipd: warning: USB filter <span style="color:#e6db74">&#39;USBPcap&#39;</span> is known to be incompatible with this software; <span style="color:#e6db74">&#39;bind --force&#39;</span> will be required.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>PS C:<span style="color:#ae81ff">\W</span>INDOWS<span style="color:#ae81ff">\s</span>ystem32&gt; usbipd bind -b 4-4
</span></span><span style="display:flex;"><span>usbipd: warning: USB filter <span style="color:#e6db74">&#39;USBPcap&#39;</span> is known to be incompatible with this software; <span style="color:#e6db74">&#39;bind --force&#39;</span> will be required.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>PS C:<span style="color:#ae81ff">\W</span>INDOWS<span style="color:#ae81ff">\s</span>ystem32&gt; usbipd bind -b 4-4
</span></span><span style="display:flex;"><span>usbipd: warning: USB filter <span style="color:#e6db74">&#39;USBPcap&#39;</span> is known to be incompatible with this software; <span style="color:#e6db74">&#39;bind --force&#39;</span> will be required.
</span></span><span style="display:flex;"><span>PS C:<span style="color:#ae81ff">\W</span>INDOWS<span style="color:#ae81ff">\s</span>ystem32&gt; usbipd attach -w --busid 4-4
</span></span><span style="display:flex;"><span>usbipd: info: Using WSL distribution <span style="color:#e6db74">&#39;Ubuntu&#39;</span> to attach; the device will be available in all WSL <span style="color:#ae81ff">2</span> distributions.
</span></span><span style="display:flex;"><span>usbipd: info: Using IP address 172.25.192.1 to reach the host.
</span></span></code></pre></div><p>然后 wsl 中就可以访问到刚刚挂载的 usb 设备了 <code>Bus 001 Device 002: ID 3415:0308 bst bst usb adb Gadget</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>luyang@KFC:/tmp$ sudo lsusb
</span></span><span style="display:flex;"><span>Bus <span style="color:#ae81ff">002</span> Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
</span></span><span style="display:flex;"><span>Bus <span style="color:#ae81ff">001</span> Device 002: ID 3415:0308 bst bst usb adb Gadget
</span></span><span style="display:flex;"><span>Bus <span style="color:#ae81ff">001</span> Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</span></span></code></pre></div><blockquote>
<p>注意：usbipd attach 之前要先执行 bind 否则会报错误</p></blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>PS C:<span style="color:#ae81ff">\W</span>INDOWS<span style="color:#ae81ff">\s</span>ystem32&gt; usbipd attach -w --busid 4-4
</span></span><span style="display:flex;"><span>usbipd: error: Device is not shared; run <span style="color:#e6db74">&#39;usbipd bind -b 4-4&#39;</span> as administrator first.
</span></span></code></pre></div><h2 id="参考链接">参考链接</h2>
<p><a href="https://blog.csdn.net/qq_59475883/article/details/123299689">WSL2识别USB设备——安装开源 usbipd-win 项目-CSDN博客</a></p>
</section></main>
        <footer id="main-footer"><div class="footer">
  <a href="#">Scroll to Top</a>
  <div class="footer-copyright">
    <div class="dim">© 2025 </div>
    <div>Made with ❤️ and powered by <a href="https://github.com/math-queiroz/rusty-typewriter" target="_blank">Rusty Typewriter</a> theme for <a href="https://gohugo.io/" target="_blank">Hugo</a></div>
  </div>
</div>
</footer>
      </div><aside id="side-pane" class="side-sticky"><div class="side-details">
    <span>417 words</span>
    <span>3 - 4 minutes read</span><div class="side-details-taxonomy">
        <small>categories: 
          <span class="details-taxonomy"><a href="https://luyoungcn.github.io/categories/%E5%B7%A5%E5%85%B7">工具</a></span></small>
      </div></div><h3>Table Of Contents</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#usbipd-安装使用">usbipd 安装使用</a></li>
    <li><a href="#参考链接">参考链接</a></li>
  </ul>
</nav></aside></div>
  </div>
</body>
</html>
