<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>windows10 WSL setup | LuyangのBlog</title>
<meta name="keywords" content="windows, wsl, linux, ext4, usbipd">
<meta name="description" content="win10 安装 wsl2
安装 WSL | Microsoft Docs
必须运行 Windows 10 版本 2004 及更高版本（内部版本 19041 及更高版本）或 Windows 11。
→ 我的电脑win10已经更新到最新，应该没问题。
设置→系统→关于

以管理员身份运行 powershell
wsl —install
如果没有安装wsl，则会进入安装过程，如果已经安装会打印帮助信息
要在安装新的 Linux 发行版时将默认版本设置为 WSL 1 或 WSL 2，请使用命令 wsl --set-default-version &lt;Version#&gt;，将 &lt;Version#&gt;替换为 1 或 2。
wsl --set-default-version 2
wsl2 安装ubuntu distro
wsl --list --online
以下是可安装的有效分发的列表。
请使用“wsl &ndash;install -d &lt;分发&gt;”安装。
NAME            FRIENDLY NAME
Ubuntu          Ubuntu
Debian          Debian GNU/Linux
kali-linux      Kali Linux Rolling
openSUSE-42     openSUSE Leap 42
SLES-12         SUSE Linux Enterprise Server v12
Ubuntu-16.04    Ubuntu 16.04 LTS
Ubuntu-18.04    Ubuntu 18.04 LTS
Ubuntu-20.04    Ubuntu 20.04 LTS
wsl --install -d Ubuntu-20.04
卸载 wsl2 distro
wsl -l -v
wsl --unregister Debian
限制vmmem进程内存占用过高">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="https://adityatelange.github.io/hugo-PaperMod/post/windows10_wsl/">
<link crossorigin="anonymous" href="/hugo-PaperMod/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://adityatelange.github.io/hugo-PaperMod/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://adityatelange.github.io/hugo-PaperMod/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://adityatelange.github.io/hugo-PaperMod/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://adityatelange.github.io/hugo-PaperMod/apple-touch-icon.png">
<link rel="mask-icon" href="https://adityatelange.github.io/hugo-PaperMod/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://adityatelange.github.io/hugo-PaperMod/post/windows10_wsl/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://adityatelange.github.io/hugo-PaperMod/post/windows10_wsl/">
  <meta property="og:site_name" content="LuyangのBlog">
  <meta property="og:title" content="windows10 WSL setup">
  <meta property="og:description" content="win10 安装 wsl2 安装 WSL | Microsoft Docs
必须运行 Windows 10 版本 2004 及更高版本（内部版本 19041 及更高版本）或 Windows 11。
→ 我的电脑win10已经更新到最新，应该没问题。
设置→系统→关于
以管理员身份运行 powershell
wsl —install 如果没有安装wsl，则会进入安装过程，如果已经安装会打印帮助信息
要在安装新的 Linux 发行版时将默认版本设置为 WSL 1 或 WSL 2，请使用命令 wsl --set-default-version &lt;Version#&gt;，将 &lt;Version#&gt;替换为 1 或 2。
wsl --set-default-version 2 wsl2 安装ubuntu distro wsl --list --online 以下是可安装的有效分发的列表。 请使用“wsl –install -d &lt;分发&gt;”安装。
NAME FRIENDLY NAME Ubuntu Ubuntu Debian Debian GNU/Linux kali-linux Kali Linux Rolling openSUSE-42 openSUSE Leap 42 SLES-12 SUSE Linux Enterprise Server v12 Ubuntu-16.04 Ubuntu 16.04 LTS Ubuntu-18.04 Ubuntu 18.04 LTS Ubuntu-20.04 Ubuntu 20.04 LTS wsl --install -d Ubuntu-20.04 卸载 wsl2 distro wsl -l -v wsl --unregister Debian 限制vmmem进程内存占用过高">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2023-02-09T00:00:00+08:00">
    <meta property="article:modified_time" content="2023-02-09T00:00:00+08:00">
    <meta property="article:tag" content="Windows">
    <meta property="article:tag" content="Wsl">
    <meta property="article:tag" content="Linux">
    <meta property="article:tag" content="Ext4">
    <meta property="article:tag" content="Usbipd">
      <meta property="og:image" content="https://adityatelange.github.io/hugo-PaperMod/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://adityatelange.github.io/hugo-PaperMod/images/papermod-cover.png">
<meta name="twitter:title" content="windows10 WSL setup">
<meta name="twitter:description" content="win10 安装 wsl2
安装 WSL | Microsoft Docs
必须运行 Windows 10 版本 2004 及更高版本（内部版本 19041 及更高版本）或 Windows 11。
→ 我的电脑win10已经更新到最新，应该没问题。
设置→系统→关于

以管理员身份运行 powershell
wsl —install
如果没有安装wsl，则会进入安装过程，如果已经安装会打印帮助信息
要在安装新的 Linux 发行版时将默认版本设置为 WSL 1 或 WSL 2，请使用命令 wsl --set-default-version &lt;Version#&gt;，将 &lt;Version#&gt;替换为 1 或 2。
wsl --set-default-version 2
wsl2 安装ubuntu distro
wsl --list --online
以下是可安装的有效分发的列表。
请使用“wsl &ndash;install -d &lt;分发&gt;”安装。
NAME            FRIENDLY NAME
Ubuntu          Ubuntu
Debian          Debian GNU/Linux
kali-linux      Kali Linux Rolling
openSUSE-42     openSUSE Leap 42
SLES-12         SUSE Linux Enterprise Server v12
Ubuntu-16.04    Ubuntu 16.04 LTS
Ubuntu-18.04    Ubuntu 18.04 LTS
Ubuntu-20.04    Ubuntu 20.04 LTS
wsl --install -d Ubuntu-20.04
卸载 wsl2 distro
wsl -l -v
wsl --unregister Debian
限制vmmem进程内存占用过高">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://adityatelange.github.io/hugo-PaperMod/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "windows10 WSL setup",
      "item": "https://adityatelange.github.io/hugo-PaperMod/post/windows10_wsl/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "windows10 WSL setup",
  "name": "windows10 WSL setup",
  "description": "win10 安装 wsl2 安装 WSL | Microsoft Docs\n必须运行 Windows 10 版本 2004 及更高版本（内部版本 19041 及更高版本）或 Windows 11。\n→ 我的电脑win10已经更新到最新，应该没问题。\n设置→系统→关于\n以管理员身份运行 powershell\nwsl —install 如果没有安装wsl，则会进入安装过程，如果已经安装会打印帮助信息\n要在安装新的 Linux 发行版时将默认版本设置为 WSL 1 或 WSL 2，请使用命令 wsl --set-default-version \u0026lt;Version#\u0026gt;，将 \u0026lt;Version#\u0026gt;替换为 1 或 2。\nwsl --set-default-version 2 wsl2 安装ubuntu distro wsl --list --online 以下是可安装的有效分发的列表。 请使用“wsl \u0026ndash;install -d \u0026lt;分发\u0026gt;”安装。\nNAME FRIENDLY NAME Ubuntu Ubuntu Debian Debian GNU/Linux kali-linux Kali Linux Rolling openSUSE-42 openSUSE Leap 42 SLES-12 SUSE Linux Enterprise Server v12 Ubuntu-16.04 Ubuntu 16.04 LTS Ubuntu-18.04 Ubuntu 18.04 LTS Ubuntu-20.04 Ubuntu 20.04 LTS wsl --install -d Ubuntu-20.04 卸载 wsl2 distro wsl -l -v wsl --unregister Debian 限制vmmem进程内存占用过高\n",
  "keywords": [
    "windows", "wsl", "linux", "ext4", "usbipd"
  ],
  "articleBody": "win10 安装 wsl2 安装 WSL | Microsoft Docs\n必须运行 Windows 10 版本 2004 及更高版本（内部版本 19041 及更高版本）或 Windows 11。\n→ 我的电脑win10已经更新到最新，应该没问题。\n设置→系统→关于\n以管理员身份运行 powershell\nwsl —install 如果没有安装wsl，则会进入安装过程，如果已经安装会打印帮助信息\n要在安装新的 Linux 发行版时将默认版本设置为 WSL 1 或 WSL 2，请使用命令 wsl --set-default-version ，将 替换为 1 或 2。\nwsl --set-default-version 2 wsl2 安装ubuntu distro wsl --list --online 以下是可安装的有效分发的列表。 请使用“wsl –install -d \u003c分发\u003e”安装。\nNAME FRIENDLY NAME Ubuntu Ubuntu Debian Debian GNU/Linux kali-linux Kali Linux Rolling openSUSE-42 openSUSE Leap 42 SLES-12 SUSE Linux Enterprise Server v12 Ubuntu-16.04 Ubuntu 16.04 LTS Ubuntu-18.04 Ubuntu 18.04 LTS Ubuntu-20.04 Ubuntu 20.04 LTS wsl --install -d Ubuntu-20.04 卸载 wsl2 distro wsl -l -v wsl --unregister Debian 限制vmmem进程内存占用过高\n%UserProfile% 目录下新建 .wslconfig , 内容如下\n[wsl2] memory=2GB Access WSL2/Ubuntu Drive from File Explorer Open File Explorer Type \\\\wsl$ in the address bar My distro shows up and click on it and you can see the file system. Mount a Linux filesystem disk in WSL2 win usbipd .exe\n下载wsl2内核源码，开启USB Mass Storage 编译安装\nwsl2\nhttps://github.com/dorssel/usbipd-win/wiki/WSL-support#usbip-client-tools https://docs.microsoft.com/zh-tw/windows/wsl/connect-usb sudo apt install linux-tools-virtual hwdata sudo update-alternatives --install /usr/local/bin/usbip usbip /usr/lib/linux-tools/*/usbip 20 OK\n让 WSL 2 支持 USB WSL 2 connect a USB device\nConnect USB devices USB/IP open-source project uspipd-win is needed Once the USB/IP project has completed installing, you will need to install the user space tools and a database of USB hardware identifiers. These instructions are for Ubuntu — other distributions may require a different usbip client package. sudo apt install linux-tools-5.4.0-77-generic hwdata sudo update-alternatives --install /usr/local/bin/usbip usbip /usr/lib/linux-tools/5.4.0-77-generic/usbip 20 Running Linux kernel 5.10.60.1 or higher\nluyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ uname -a Linux DESKTOP-DM1TKNP 5.10.16.3-microsoft-standard-WSL2 #1 SMP Fri Apr 2 22:23:49 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux It has recently become simpler to update the WSL 2 Kernel: turn on “Receive updates for other Microsoft products when you update Windows” in the Advanced options for Windows update. The WSL2 kernel will get updated automatically.\n以管理员身份运行 powershell\nPS C:\\Windows\\system32\u003e wsl --update 正在检查更新... 正在下载更新... 正在安装更新... 此更改将在 WSL 下次完全重启时生效。若要强制重启，请运行“wsl --shutdown”。 内核版本： 5.10.102.1 luyang@DESKTOP-DM1TKNP:/mnt/c/Users/luyang$ uname -a Linux DESKTOP-DM1TKNP 5.10.102.1-microsoft-standard-WSL2 #1 SMP Wed Mar 2 00:30:59 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux identify the disk and partition to attach to WSL2\nBefore attaching your USB device, ensure that a WSL command line is open. This will keep the WSL 2 lightweight VM active.\nList all of the USB devices connected to Windows by opening PowerShell in administrator mode and entering the command: usbipd wsl list\nPS C:\\Windows\\system32\u003e usbipd wsl list BUSID DEVICE STATE 1-2 HP HD Camera Not attached 1-7 Synaptics FS7604 Touch Fingerprint Sensor with PurePrint(TM) Not attached 1-10 英特尔(R) 无线 Bluetooth(R) Not attached 1-13 USB Attached SCSI (UAS) 大容量存储设备 Not attached 1-14 USB Attached SCSI (UAS) 大容量存储设备 Not attached Select the bus ID of the device you’d like to attach to WSL and run this command. You’ll be prompted by WSL for a password to run a sudo command. The Linux distribution to be attached must be your default distribution. (See the Basic comands for WSL doc to change your default distribution). usbipd wsl attach --busid PS C:\\Windows\\system32\u003e usbipd wsl attach --busid 1-13 PS C:\\Windows\\system32\u003e Open Ubuntu (or your preferred WSL command line) and list the attached USB devices using the command: lsusb\nluyang@DESKTOP-DM1TKNP:/mnt/c/Users/luyang$ lsusb Bus 002 Device 002: ID 1058:25f3 Western Digital Technologies, Inc. Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub You should see the device you just attached and be able to interact with it using normal Linux tools. Depending on your application, you may need to configure udev rules to allow non-root users to access the device.\nOnce you are done using the device in WSL, you can either physically disconnect the USB device or run this command from PowerShell in administrator mode: usbipd wsl detach --busid mount\n按照上边的流程，usb设备已经挂载到了wsl2 ubuntu子系统，剩下的就是常规的ubuntu操作了 sudo lsusb 可以显示usb设备，但是sudo fdisk -l不显示usb设备， lsblk 也不显示移动硬盘的分区 [https://www.youtube.com/watch?v=iyBfQXmyH4o](https://www.youtube.com/watch?v=iyBfQXmyH4o https://github.com/microsoft/WSL/issues/7770 https://github.com/microsoft/WSL2-Linux-Kernel/blob/918dbaa9fa4aa665c9e5fe44489dd453da7cadeb/Microsoft/config-wsl#L2374-L2380 手动编译内核 下载源码 sudo apt install build-essential flex bison libssl-dev libelf-dev libncurses-dev autoconf libudev-dev libtool cd WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1 luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ cp /proc/config.gz config.gz luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ gunzip config.gz luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ cp config .config luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ make menuconfig # Device Drivers -\u003e USB support -\u003e select USB Mass Storage support and Enter y -\u003e save and exit luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ make -j8 # 编译过程中报错, 根据报错直接vim .config 注释掉了 CONFIG_DEBUG_INFO_BTF 项，保存然后再次make -j8 # CONFIG_DEBUG_INFO_BTF is not set luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ sudo make modules_install -j8 luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ sudo make install -j8 luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ cp vmlinux /mnt/c/Users/luyang/ powershell terminal\nwsl --shutdown 修改 Windows 下的 c/User//.wslconfig，没有该文件自己创建一个，内容如下：主要是kernel这一项\n[wsl2] kernel=C:\\\\Users\\\\luyang\\\\vmlinux memory=2GB restart wsl, 然后按照前边attash usb的方式挂载之后\nluyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ lsusb Bus 002 Device 002: ID 1058:25f3 Western Digital Technologies, Inc. Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub # sdc 就是我要挂载的移动硬盘 luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda 8:0 0 256G 0 disk sdb 8:16 0 256G 0 disk / sdc 8:32 0 476.9G 0 disk ├─sdc1 8:33 0 512M 0 part ├─sdc2 8:34 0 50G 0 part └─sdc3 8:35 0 426.4G 0 part 扩展 WSL 2 虚拟硬盘的大小 https://docs.microsoft.com/zh-cn/windows/wsl/vhd-size wsl —shutdown 查找发行版安装包名称 Get-AppxPackage -Name \"**\" | Select PackageFamilyName 例如：Get-AppxPackage -Name \"*Ubuntu*\" | Select PackageFamilyName 使用生成的 PackageFamilyName 查找 WSL 2 安装使用的 VHD 文件 fullpath，这将是你的 pathToVHD。 若要查找完整路径： 在“开始”菜单中，输入“%LOCALAPPDATA%”并选择打开 %LOCALAPPDATA% 文件文件夹。 接下来，打开“Packages”文件夹并搜索分发版的 PackageFamilyName。 打开该文件夹（即 CanonicalGroupLimited.Ubuntu20.04onWindows_79xxxxx）。 在 PackageFamilyName 文件夹中，打开“LocalState”文件夹并找到 .vhdx 文件。 复制该文件的路劲个，它应如下所示：%LOCALAPPDATA%\\Packages\\\\LocalState\\.vhdx 例如，Ubuntu 20.04 的 应如下所示：%LOCALAPPDATA%\\Packages\\CanonicalGroupLimited.Ubuntu20.04onWindows_79xxxx\\LocalState\\ext4.vhdx 通过完成以下命令调整 WSL 2 VHD 的大小 以管理员权限打开 Windows 命令提示，然后输入：\ndiskpart DISKPART\u003e Select vdisk file=\"\" DISKPART\u003e detail vdisk 检查 detail 命令的输出。 输出将包含虚拟大小的值。 这是当前的最大值。 将此值转换为兆字节。 如果如果“详细信息”输出显示“虚拟大小: 256 GB”，请将此转换为 256000 。\n你输入的新值必须大于此原始值。 例如，若要将上述虚拟大小翻倍，可输入值 512000。 确定要为新大小（以 MB 为单位）设置的数字后，在 Windows 命令提示符 diskpart 提示中输入以下命令：\nDISKPART\u003e expand vdisk maximum= Exit diskpart\nDISKPART\u003e exit 启动 WSL 发行版（例如 Ubuntu），确保它在 WSL 2 中运行（不支持 WSL 1）。 可以使用以下命令确认这一点：wsl.exe -l -v。\n通过从 WSL 分发版命令行运行以下命令，让 WSL 知道它可扩展其文件系统的大小。\nsudo mount -t devtmpfs none /dev mount | grep ext4 可能会看到以下消息，它响应第一个 mount 命令：“/dev: /dev 上未装载任何内容。”可以放心地忽略此消息。\n复制此项的名称，该名称类似于：/dev/sdX（X 表示任何其他字符）。 在下面的示例中，X 的值是 b：\nsudo resize2fs /dev/sdb M 在上述示例中，我们将 vhd 大小更改为了 512000，因此命令将为 sudo resize2fs /dev/sdb 512000M。\n备注\n可能需要安装 resize2fs。 如果是这样，可以使用此命令进行安装：sudo apt install resize2fs。\n输出将类似于以下内容：\nresize2fs 1.44.1 (24-Mar-2021) Filesystem at /dev/sdb is mounted on /; on-line resizing required old_desc_blocks = 32, new_desc_blocks = 38 The filesystem on /dev/sdb is now 78643200 (4k) blocks long. 重要\n建议不要使用 Windows 工具或编辑器来修改、移动或访问 AppData 文件夹中与 WSL 相关的文件。 这样做可能会导致 Linux 分发版损坏。 如果要从 Windows 访问 Linux 文件，可通过路径 \\\\wsl$\\\\ 进行访问。 打开 WSL 分发版，然后输入 explorer.exe . 来查看此文件夹。 若要了解详细信息，请查看博客文章：从 Windows 访问 Linux 文件。\nDISKPART\u003e expand vdisk maximum=512000 虚拟磁盘服务错误: 连接虚拟磁盘时，无法执行请求的操作。 管理员权限运行 powershell\nWSL2 Error: 0x80370114 WIN11按照官方文档安装WSL2时出现error 0x80370114_半路杀出来的小黑同学的博客-CSDN博客\nPS C:\\Users\\luyang\u003e wsl --install -d Ubuntu-20.04 Ubuntu 20.04 LTS is already installed. Launching Ubuntu 20.04 LTS... Installing, this may take a few minutes... WslRegisterDistribution failed with error: 0x80370114 Error: 0x80370114 The operation could not be started because a required feature is not installed. Windows 11 上打开“设置”-\u003e“应用”-\u003e“可选功能”\n“更多windows功能”选项\n将“适用于Linux的Windows子系统”打勾后，重启即可。\nwin11 默认支持直接挂载 ext4 根据文档，用户需要安装 Windows 11 Build 22000 版本及以上，就可以直接挂载 EXT4 等格式的 Linux 磁盘。\n关于在 WSL 2 中安装 Linux 磁盘的入门 | Microsoft Learn\n标识磁盘\n要列出 Windows 中的可用磁盘，请运行：\nGET-CimInstance -query \"SELECT * from Win32_DiskDrive\" 磁盘路径位于“DeviceID”列下。 通常采用 \\.\\PHYSICALDRIVE* 格式。\nPS C:\\Users\\luyang\u003e GET-CimInstance -query \"SELECT * from Win32_DiskDrive\" DeviceID Caption Partitions Size Model -------- ------- ---------- ---- ----- \\\\.\\PHYSICALDRIVE2 WD Green SN350 1TB 1 1000202273280 WD Green SN350 1TB \\\\.\\PHYSICALDRIVE1 WDC WD40EJRX-89AKWY0 1 4000784417280 WDC WD40EJRX-89AKWY0 \\\\.\\PHYSICALDRIVE0 WDC WD10EZEX-08WN4A0 3 1000202273280 WDC WD10EZEX-08WN4A0 装载磁盘\n使用 PowerShell，可以使用上面发现的磁盘路径装载磁盘，请运行：\nwsl --mount # --bare: wsl --mount --bare wsl --help # mount 相关 --mount 在所有 WSL 2 分发中附加并安装物理或虚拟磁盘。 选项: --vhd 指定 是指虚拟硬盘。 --bare 将磁盘附加到 WSL 2，但不进行安装。 --name 对安装点使用自定义名称安装磁盘。 --type 安装磁盘时要使用的文件系统，如果未指定，则默认为 ext4。 --options 其他安装选项。 --partition 要安装的分区索引，如果未指定，则默认为整个磁盘。 实际挂载 LUSK 加密的 WD 移动硬盘 - 需要管理员权限启动终端\nPS C:\\Windows\\system32\u003e GET-CimInstance -query \"SELECT * from Win32_DiskDrive\" DeviceID Caption Partitions Size Model -------- ------- ---------- ---- ----- \\\\.\\PHYSICALDRIVE2 WD Green SN350 1TB 1 1000202273280 WD Green SN350 1TB \\\\.\\PHYSICALDRIVE1 WDC WD40EJRX-89AKWY0 1 4000784417280 WDC WD40EJRX-89AKWY0 \\\\.\\PHYSICALDRIVE0 WDC WD10EZEX-08WN4A0 3 1000202273280 WDC WD10EZEX-08WN4A0 \\\\.\\PHYSICALDRIVE3 WD My Passport 25F3 SCSI Disk Device 1 512073031680 WD My Passport 25F3 SCSI Disk Device PS C:\\Windows\\system32\u003e wsl --mount \\\\.\\PHYSICALDRIVE3 --bare 操作成功完成。 之后通过 WSL ubuntu terminal 操作, 查看对应设备\nsudo fdisk -l Device Boot Start End Sectors Size Id Type /dev/sdc1 2048 1000148991 1000146944 476.9G 83 Linux sudo cryptsetup luksOpen /dev/sdc1 wd sudo mount /dev/mapper/wd ~/wd_udisk sudo umount ~/wd_udisk sudo cryptsetup luksClose wd 挂载机械硬盘\n# window terminal 管理员权限 # 1T wsl --mount \\\\.\\PHYSICALDRIVE0 --bare # 4T wsl --mount \\\\.\\PHYSICALDRIVE1 --bare # ubuntu terminal # 4T sudo mount -t ext4 /dev/sdf1 ~/HD_4T ",
  "wordCount" : "1347",
  "inLanguage": "en",
  "image": "https://adityatelange.github.io/hugo-PaperMod/images/papermod-cover.png","datePublished": "2023-02-09T00:00:00+08:00",
  "dateModified": "2023-02-09T00:00:00+08:00",
  "author":{
    "@type": "Person",
    "name": "Theme PaperMod"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://adityatelange.github.io/hugo-PaperMod/post/windows10_wsl/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "LuyangのBlog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://adityatelange.github.io/hugo-PaperMod/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://adityatelange.github.io/hugo-PaperMod/" accesskey="h" title="LuyangのBlog (Alt + H)">LuyangのBlog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://adityatelange.github.io/hugo-PaperMod/fr/" title="French"
                            aria-label=":fr:">🇫🇷</a>
                    </li>
                    <li>
                        <a href="https://adityatelange.github.io/hugo-PaperMod/fa/" title="Fa"
                            aria-label="Fa">Fa</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://adityatelange.github.io/hugo-PaperMod/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://adityatelange.github.io/hugo-PaperMod/search/" title="Search">
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://adityatelange.github.io/hugo-PaperMod/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://adityatelange.github.io/hugo-PaperMod/">Home</a>&nbsp;»&nbsp;<a href="https://adityatelange.github.io/hugo-PaperMod/post/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      windows10 WSL setup
    </h1>
    <div class="post-meta"><span title='2023-02-09 00:00:00 +0800 CST'>February 9, 2023</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Theme PaperMod&nbsp;|&nbsp;<a href="https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite/content/post/windows10_wsl.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#win10-%e5%ae%89%e8%a3%85-wsl2" aria-label="win10 安装 wsl2">win10 安装 wsl2</a></li>
                <li>
                    <a href="#wsl2-%e5%ae%89%e8%a3%85ubuntu-distro" aria-label="wsl2 安装ubuntu distro">wsl2 安装ubuntu distro</a></li>
                <li>
                    <a href="#%e5%8d%b8%e8%bd%bd-wsl2-distro" aria-label="卸载 wsl2 distro">卸载 wsl2 distro</a></li>
                <li>
                    <a href="#access-wsl2ubuntu-drive-from-file-explorer" aria-label="Access WSL2/Ubuntu Drive from File Explorer">Access WSL2/Ubuntu Drive from File Explorer</a></li>
                <li>
                    <a href="#mount-a-linux-filesystem-disk-in-wsl2" aria-label="Mount a Linux filesystem disk in WSL2">Mount a Linux filesystem disk in WSL2</a></li>
                <li>
                    <a href="#%e6%89%a9%e5%b1%95-wsl-2-%e8%99%9a%e6%8b%9f%e7%a1%ac%e7%9b%98%e7%9a%84%e5%a4%a7%e5%b0%8f" aria-label="扩展 WSL 2 虚拟硬盘的大小">扩展 WSL 2 虚拟硬盘的大小</a><ul>
                        <ul>
                        
                <li>
                    <a href="#%e9%80%9a%e8%bf%87%e5%ae%8c%e6%88%90%e4%bb%a5%e4%b8%8b%e5%91%bd%e4%bb%a4%e8%b0%83%e6%95%b4-wsl-2-vhd-%e7%9a%84%e5%a4%a7%e5%b0%8f" aria-label="通过完成以下命令调整 WSL 2 VHD 的大小">通过完成以下命令调整 WSL 2 VHD 的大小</a></li></ul>
                    </ul>
                </li>
                <li>
                    <a href="#wsl2-error-0x80370114" aria-label="WSL2 Error: 0x80370114">WSL2 Error: 0x80370114</a></li>
                <li>
                    <a href="#win11-%e9%bb%98%e8%ae%a4%e6%94%af%e6%8c%81%e7%9b%b4%e6%8e%a5%e6%8c%82%e8%bd%bd-ext4" aria-label="win11 默认支持直接挂载 ext4">win11 默认支持直接挂载 ext4</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="win10-安装-wsl2">win10 安装 wsl2<a hidden class="anchor" aria-hidden="true" href="#win10-安装-wsl2">#</a></h1>
<p><a href="https://docs.microsoft.com/zh-cn/windows/wsl/install">安装 WSL | Microsoft Docs</a></p>
<p>必须运行 Windows 10 版本 2004 及更高版本（内部版本 19041 及更高版本）或 Windows 11。</p>
<p>→ 我的电脑win10已经更新到最新，应该没问题。</p>
<p>设置→系统→关于</p>
<p><img alt="Untitled" loading="lazy" src="/hugo-PaperMod/post/windows10_wsl/windows10_wsl_setup_Untitled_0.png"></p>
<p>以管理员身份运行 powershell</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wsl —install
</span></span></code></pre></div><p>如果没有安装wsl，则会进入安装过程，如果已经安装会打印帮助信息</p>
<p>要在安装新的 Linux 发行版时将默认版本设置为 WSL 1 或 WSL 2，请使用命令 <code>wsl --set-default-version &lt;Version#&gt;</code>，将 <code>&lt;Version#&gt;</code>替换为 1 或 2。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wsl --set-default-version <span class="m">2</span>
</span></span></code></pre></div><h1 id="wsl2-安装ubuntu-distro">wsl2 安装ubuntu distro<a hidden class="anchor" aria-hidden="true" href="#wsl2-安装ubuntu-distro">#</a></h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wsl --list --online
</span></span></code></pre></div><p>以下是可安装的有效分发的列表。
请使用“wsl &ndash;install -d &lt;分发&gt;”安装。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">NAME            FRIENDLY NAME
</span></span><span class="line"><span class="cl">Ubuntu          Ubuntu
</span></span><span class="line"><span class="cl">Debian          Debian GNU/Linux
</span></span><span class="line"><span class="cl">kali-linux      Kali Linux Rolling
</span></span><span class="line"><span class="cl">openSUSE-42     openSUSE Leap <span class="m">42</span>
</span></span><span class="line"><span class="cl">SLES-12         SUSE Linux Enterprise Server v12
</span></span><span class="line"><span class="cl">Ubuntu-16.04    Ubuntu 16.04 LTS
</span></span><span class="line"><span class="cl">Ubuntu-18.04    Ubuntu 18.04 LTS
</span></span><span class="line"><span class="cl">Ubuntu-20.04    Ubuntu 20.04 LTS
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wsl --install -d Ubuntu-20.04
</span></span></code></pre></div><h1 id="卸载-wsl2-distro">卸载 wsl2 distro<a hidden class="anchor" aria-hidden="true" href="#卸载-wsl2-distro">#</a></h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wsl -l -v
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wsl --unregister Debian
</span></span></code></pre></div><p>限制vmmem进程内存占用过高</p>
<p>%UserProfile% 目录下新建 .wslconfig , 内容如下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>wsl2<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">memory</span><span class="o">=</span>2GB
</span></span></code></pre></div><h1 id="access-wsl2ubuntu-drive-from-file-explorer">Access WSL2/Ubuntu Drive from File Explorer<a hidden class="anchor" aria-hidden="true" href="#access-wsl2ubuntu-drive-from-file-explorer">#</a></h1>
<ol>
<li>Open File Explorer</li>
<li>Type <code>\\wsl$</code> in the address bar</li>
<li>My distro shows up and click on it and you can see the file system.</li>
</ol>
<h1 id="mount-a-linux-filesystem-disk-in-wsl2">Mount a Linux filesystem disk in WSL2<a hidden class="anchor" aria-hidden="true" href="#mount-a-linux-filesystem-disk-in-wsl2">#</a></h1>
<ol>
<li>
<p>win usbipd .exe</p>
</li>
<li>
<p>下载wsl2内核源码，开启USB Mass Storage 编译安装</p>
</li>
<li>
<p>wsl2</p>
<ol>
<li><a href="https://github.com/dorssel/usbipd-win/wiki/WSL-support#usbip-client-tools">https://github.com/dorssel/usbipd-win/wiki/WSL-support#usbip-client-tools</a></li>
<li><a href="https://docs.microsoft.com/zh-tw/windows/wsl/connect-usb">https://docs.microsoft.com/zh-tw/windows/wsl/connect-usb</a></li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt install linux-tools-virtual hwdata
</span></span><span class="line"><span class="cl">sudo update-alternatives --install /usr/local/bin/usbip usbip /usr/lib/linux-tools/*/usbip <span class="m">20</span>
</span></span></code></pre></div></li>
<li>
<p>OK</p>
</li>
</ol>
<p><strong><a href="https://dowww.spencerwoo.com/4-advanced/4-4-usb.html#usbip-win">让 WSL 2 支持 USB WSL 2</a></strong>
connect a USB device</p>
<ul>
<li><strong><a href="https://docs.microsoft.com/en-us/windows/wsl/connect-usb">Connect USB devices</a></strong></li>
<li>USB/IP open-source project <a href="https://github.com/dorssel/usbipd-win">uspipd-win</a> is needed
<ul>
<li>Once the USB/IP project has completed installing, you will need to install the user space tools and a database of USB hardware identifiers. These instructions are for Ubuntu — <a href="https://github.com/dorssel/usbipd-win/wiki/WSL-support#usbip-client-tools">other distributions may require a different usbip client package</a>.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt install linux-tools-5.4.0-77-generic hwdata
</span></span><span class="line"><span class="cl">sudo update-alternatives --install /usr/local/bin/usbip usbip /usr/lib/linux-tools/5.4.0-77-generic/usbip <span class="m">20</span>
</span></span></code></pre></div><p>Running Linux kernel 5.10.60.1 or higher</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ uname -a
</span></span><span class="line"><span class="cl">Linux DESKTOP-DM1TKNP 5.10.16.3-microsoft-standard-WSL2 <span class="c1">#1 SMP Fri Apr 2 22:23:49 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux</span>
</span></span></code></pre></div><p>It has recently become <strong>simpler to update the WSL 2 Kernel: turn on &ldquo;Receive updates for other Microsoft products when you update Windows&rdquo;</strong> in the Advanced options for Windows update. The WSL2 kernel will get updated automatically.</p>
<p>以管理员身份运行 powershell</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">PS C:<span class="se">\W</span>indows<span class="se">\s</span>ystem32&gt; wsl --update
</span></span><span class="line"><span class="cl">正在检查更新...
</span></span><span class="line"><span class="cl">正在下载更新...
</span></span><span class="line"><span class="cl">正在安装更新...
</span></span><span class="line"><span class="cl">此更改将在 WSL 下次完全重启时生效。若要强制重启，请运行“wsl --shutdown”。
</span></span><span class="line"><span class="cl">内核版本： 5.10.102.1
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:/mnt/c/Users/luyang$ uname -a
</span></span><span class="line"><span class="cl">Linux DESKTOP-DM1TKNP 5.10.102.1-microsoft-standard-WSL2 <span class="c1">#1 SMP Wed Mar 2 00:30:59 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux</span>
</span></span></code></pre></div><p>identify the disk and partition to attach to WSL2</p>
<ul>
<li>
<p>Before attaching your USB device, ensure that a WSL command line is open. This will keep the WSL 2 lightweight VM active.</p>
</li>
<li>
<p>List all of the USB devices connected to Windows by opening PowerShell in <em>administrator</em>     mode and entering the command: <code>usbipd wsl list</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">PS C:<span class="se">\W</span>indows<span class="se">\s</span>ystem32&gt; usbipd wsl list
</span></span><span class="line"><span class="cl">BUSID  DEVICE                                                        STATE
</span></span><span class="line"><span class="cl">1-2    HP HD Camera                                                  Not attached
</span></span><span class="line"><span class="cl">1-7    Synaptics FS7604 Touch Fingerprint Sensor with PurePrint<span class="o">(</span>TM<span class="o">)</span>  Not attached
</span></span><span class="line"><span class="cl">1-10   英特尔<span class="o">(</span>R<span class="o">)</span> 无线 Bluetooth<span class="o">(</span>R<span class="o">)</span>                                   Not attached
</span></span><span class="line"><span class="cl">1-13   USB Attached SCSI <span class="o">(</span>UAS<span class="o">)</span> 大容量存储设备                        Not attached
</span></span><span class="line"><span class="cl">1-14   USB Attached SCSI <span class="o">(</span>UAS<span class="o">)</span> 大容量存储设备                        Not attached
</span></span></code></pre></div></li>
</ul>
<p>Select the bus ID of the device you’d like to attach to WSL and run this command. You’ll be prompted by WSL for a password to run a sudo command. The Linux distribution to be attached must be your default distribution. (See the <a href="https://docs.microsoft.com/en-us/windows/wsl/basic-commands#set-default-linux-distribution">Basic comands for WSL</a> doc to change your default distribution). <code>usbipd wsl attach --busid &lt;busid&gt;</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">PS C:<span class="se">\W</span>indows<span class="se">\s</span>ystem32&gt; usbipd wsl attach --busid 1-13
</span></span><span class="line"><span class="cl">PS C:<span class="se">\W</span>indows<span class="se">\s</span>ystem32&gt;
</span></span></code></pre></div><p>Open Ubuntu (or your preferred WSL command line) and list the attached USB devices using the command: <code>lsusb</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:/mnt/c/Users/luyang$ lsusb
</span></span><span class="line"><span class="cl">Bus <span class="m">002</span> Device 002: ID 1058:25f3 Western Digital Technologies, Inc. 
</span></span><span class="line"><span class="cl">Bus <span class="m">002</span> Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub      
</span></span><span class="line"><span class="cl">Bus <span class="m">001</span> Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</span></span></code></pre></div><p>You should see the device you just attached and be able to interact with it using normal Linux tools. Depending on your application, you may need to configure udev rules to allow non-root users to access the device.</p>
<p>Once you are done using the device in WSL, you can either physically disconnect the USB device or run this command from PowerShell in <em>administrator</em> mode: <code>usbipd wsl detach --busid &lt;busid&gt;</code></p>
<p>mount</p>
<ul>
<li>按照上边的流程，usb设备已经挂载到了wsl2 ubuntu子系统，剩下的就是常规的ubuntu操作了</li>
<li>sudo lsusb 可以显示usb设备，但是sudo fdisk -l不显示usb设备， lsblk 也不显示移动硬盘的分区</li>
<li>[https://www.youtube.com/watch?v=iyBfQXmyH4o](<a href="https://www.youtube.com/watch?v=iyBfQXmyH4o">https://www.youtube.com/watch?v=iyBfQXmyH4o</a></li>
<li><a href="https://github.com/microsoft/WSL/issues/7770">https://github.com/microsoft/WSL/issues/7770</a></li>
<li><a href="https://github.com/microsoft/WSL2-Linux-Kernel/blob/918dbaa9fa4aa665c9e5fe44489dd453da7cadeb/Microsoft/config-wsl#L2374-L2380">https://github.com/microsoft/WSL2-Linux-Kernel/blob/918dbaa9fa4aa665c9e5fe44489dd453da7cadeb/Microsoft/config-wsl#L2374-L2380</a></li>
<li>手动编译内核</li>
<li>下载<a href="https://docs.microsoft.com/en-us/windows/wsl/kernel-release-notes">源码</a></li>
<li><code>sudo apt install build-essential flex bison libssl-dev libelf-dev libncurses-dev autoconf libudev-dev libtool</code></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1
</span></span><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ cp /proc/config.gz config.gz
</span></span><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ gunzip config.gz
</span></span><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ cp config .config
</span></span><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ make menuconfig
</span></span><span class="line"><span class="cl"><span class="c1"># Device Drivers -&gt; USB support -&gt; select USB Mass Storage support and Enter y -&gt; save and exit</span>
</span></span><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ make -j8
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 编译过程中报错, 根据报错直接vim .config 注释掉了 CONFIG_DEBUG_INFO_BTF 项，保存然后再次make -j8</span>
</span></span><span class="line"><span class="cl"><span class="c1"># CONFIG_DEBUG_INFO_BTF is not set</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ sudo make modules_install -j8
</span></span><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ sudo make install -j8
</span></span><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ cp vmlinux /mnt/c/Users/luyang/
</span></span></code></pre></div><p>powershell terminal</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wsl --shutdown
</span></span></code></pre></div><p>修改 Windows 下的 <code>c/User/&lt;username&gt;/.wslconfig</code>，没有该文件自己创建一个，内容如下：主要是kernel这一项</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>wsl2<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">kernel</span><span class="o">=</span>C:<span class="se">\\</span>Users<span class="se">\\</span>luyang<span class="se">\\</span>vmlinux
</span></span><span class="line"><span class="cl"><span class="nv">memory</span><span class="o">=</span>2GB
</span></span></code></pre></div><p>restart wsl, 然后按照前边attash usb的方式挂载之后</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ lsusb
</span></span><span class="line"><span class="cl">Bus <span class="m">002</span> Device 002: ID 1058:25f3 Western Digital Technologies, Inc. 
</span></span><span class="line"><span class="cl">Bus <span class="m">002</span> Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub      
</span></span><span class="line"><span class="cl">Bus <span class="m">001</span> Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub      
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># sdc 就是我要挂载的移动硬盘</span>
</span></span><span class="line"><span class="cl">luyang@DESKTOP-DM1TKNP:~/WSL2-Linux-Kernel-linux-msft-wsl-5.10.102.1$ lsblk
</span></span><span class="line"><span class="cl">NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
</span></span><span class="line"><span class="cl">sda      8:0    <span class="m">0</span>   256G  <span class="m">0</span> disk
</span></span><span class="line"><span class="cl">sdb      8:16   <span class="m">0</span>   256G  <span class="m">0</span> disk /
</span></span><span class="line"><span class="cl">sdc      8:32   <span class="m">0</span> 476.9G  <span class="m">0</span> disk
</span></span><span class="line"><span class="cl">├─sdc1   8:33   <span class="m">0</span>   512M  <span class="m">0</span> part
</span></span><span class="line"><span class="cl">├─sdc2   8:34   <span class="m">0</span>    50G  <span class="m">0</span> part
</span></span><span class="line"><span class="cl">└─sdc3   8:35   <span class="m">0</span> 426.4G  <span class="m">0</span> part
</span></span></code></pre></div><h1 id="扩展-wsl-2-虚拟硬盘的大小"><strong>扩展 WSL 2 虚拟硬盘的大小</strong><a hidden class="anchor" aria-hidden="true" href="#扩展-wsl-2-虚拟硬盘的大小">#</a></h1>
<ul>
<li><a href="https://docs.microsoft.com/zh-cn/windows/wsl/vhd-size">https://docs.microsoft.com/zh-cn/windows/wsl/vhd-size</a></li>
<li>wsl —shutdown</li>
<li>查找发行版安装包名称
<ul>
<li><code>Get-AppxPackage -Name &quot;*&lt;distro&gt;*&quot; | Select PackageFamilyName</code></li>
<li>例如：<code>Get-AppxPackage -Name &quot;*Ubuntu*&quot; | Select PackageFamilyName</code></li>
<li><img alt="Untitled" loading="lazy" src="/hugo-PaperMod/post/windows10_wsl/windows10_wsl_setup_Untitled_1.png"></li>
</ul>
</li>
<li>使用生成的 <code>PackageFamilyName</code> 查找 WSL 2 安装使用的 VHD 文件 <code>fullpath</code>，这将是你的 <code>pathToVHD</code>。 若要查找完整路径：
<ul>
<li>在“开始”菜单中，输入“%LOCALAPPDATA%”并选择打开 %LOCALAPPDATA% 文件文件夹。</li>
<li>接下来，打开“Packages”文件夹并搜索分发版的 <code>PackageFamilyName</code>。 打开该文件夹（即 CanonicalGroupLimited.Ubuntu20.04onWindows_79xxxxx）。</li>
<li>在 <code>PackageFamilyName</code> 文件夹中，打开“LocalState”文件夹并找到 <code>&lt;disk&gt;.vhdx</code> 文件。</li>
<li>复制该文件的路劲个，它应如下所示：<code>%LOCALAPPDATA%\Packages\&lt;PackageFamilyName&gt;\LocalState\&lt;disk&gt;.vhdx</code></li>
<li>例如，Ubuntu 20.04 的 <code>&lt;pathToVHD&gt;</code> 应如下所示：<code>%LOCALAPPDATA%\Packages\CanonicalGroupLimited.Ubuntu20.04onWindows_79xxxx\LocalState\ext4.vhdx</code></li>
</ul>
</li>
</ul>
<h3 id="通过完成以下命令调整-wsl-2-vhd-的大小">通过完成以下命令调整 WSL 2 VHD 的大小<a hidden class="anchor" aria-hidden="true" href="#通过完成以下命令调整-wsl-2-vhd-的大小">#</a></h3>
<p>以管理员权限打开 Windows 命令提示，然后输入：</p>
<pre tabindex="0"><code>diskpart
</code></pre><pre tabindex="0"><code>DISKPART&gt; Select vdisk file=&#34;&lt;pathToVHD&gt;&#34;
</code></pre><pre tabindex="0"><code>DISKPART&gt; detail vdisk
</code></pre><p>检查 detail 命令的输出。 输出将包含虚拟大小的值。 这是当前的最大值。 将此值转换为兆字节。 如果如果“详细信息”输出显示“虚拟大小: 256 GB”，请将此转换为 256000 。</p>
<p>你输入的新值必须大于此原始值。 例如，若要将上述虚拟大小翻倍，可输入值 512000。 确定要为新大小（以 MB 为单位）设置的数字后，在 Windows 命令提示符 diskpart 提示中输入以下命令：</p>
<pre tabindex="0"><code>DISKPART&gt; expand vdisk maximum=&lt;sizeInMegaBytes&gt;
</code></pre><p>Exit diskpart</p>
<pre tabindex="0"><code>DISKPART&gt; exit
</code></pre><p>启动 WSL 发行版（例如 Ubuntu），确保它在 WSL 2 中运行（不支持 WSL 1）。 可以使用以下命令确认这一点：<code>wsl.exe -l -v</code>。</p>
<p>通过从 WSL 分发版命令行运行以下命令，让 WSL 知道它可扩展其文件系统的大小。</p>
<pre tabindex="0"><code>sudo mount -t devtmpfs none /dev
mount | grep ext4
</code></pre><p>可能会看到以下消息，它响应第一个 mount 命令：“/dev: /dev 上未装载任何内容。”可以放心地忽略此消息。</p>
<p>复制此项的名称，该名称类似于：<code>/dev/sdX</code>（X 表示任何其他字符）。 在下面的示例中，X 的值是 b：</p>
<pre tabindex="0"><code>sudo resize2fs /dev/sdb &lt;sizeInMegabytes&gt;M
</code></pre><p>在上述示例中，我们将 vhd 大小更改为了 512000，因此命令将为 <code>sudo resize2fs /dev/sdb 512000M</code>。</p>
<p><strong>备注</strong></p>
<p>可能需要安装 resize2fs。 如果是这样，可以使用此命令进行安装：<code>sudo apt install resize2fs</code>。</p>
<p>输出将类似于以下内容：</p>
<pre tabindex="0"><code>resize2fs 1.44.1 (24-Mar-2021)
Filesystem at /dev/sdb is mounted on /; on-line resizing required
old_desc_blocks = 32, new_desc_blocks = 38
The filesystem on /dev/sdb is now 78643200 (4k) blocks long.
</code></pre><p><strong>重要</strong></p>
<p>建议不要使用 Windows 工具或编辑器来修改、移动或访问 AppData 文件夹中与 WSL 相关的文件。 这样做可能会导致 Linux 分发版损坏。 如果要从 Windows 访问 Linux 文件，可通过路径 <code>\\wsl$\&lt;distroName&gt;\</code> 进行访问。 打开 WSL 分发版，然后输入 <code>explorer.exe .</code> 来查看此文件夹。 若要了解详细信息，请查看博客文章：<strong><a href="https://devblogs.microsoft.com/commandline/whats-new-for-wsl-in-windows-10-version-1903/#accessing-linux-files-from-windows">从 Windows 访问 Linux 文件</a></strong>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">DISKPART&gt; expand vdisk <span class="nv">maximum</span><span class="o">=</span><span class="m">512000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">虚拟磁盘服务错误:
</span></span><span class="line"><span class="cl">连接虚拟磁盘时，无法执行请求的操作。
</span></span></code></pre></div><p><img alt="Untitled" loading="lazy" src="/hugo-PaperMod/post/windows10_wsl/windows10_wsl_setup_Untitled_2.png"></p>
<p>管理员权限运行 powershell</p>
<p><img alt="Untitled" loading="lazy" src="/hugo-PaperMod/post/windows10_wsl/windows10_wsl_setup_Untitled_3.png"></p>
<p><img alt="Untitled" loading="lazy" src="/hugo-PaperMod/post/windows10_wsl/windows10_wsl_setup_Untitled_4.png"></p>
<h1 id="wsl2-error-0x80370114">WSL2 Error: 0x80370114<a hidden class="anchor" aria-hidden="true" href="#wsl2-error-0x80370114">#</a></h1>
<p><a href="https://blog.csdn.net/m0_57298796/article/details/128395860">WIN11按照官方文档安装WSL2时出现error 0x80370114_半路杀出来的小黑同学的博客-CSDN博客</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">PS C:<span class="se">\U</span>sers<span class="se">\l</span>uyang&gt; wsl --install -d Ubuntu-20.04
</span></span><span class="line"><span class="cl">Ubuntu 20.04 LTS is already installed.
</span></span><span class="line"><span class="cl">Launching Ubuntu 20.04 LTS...
</span></span><span class="line"><span class="cl">Installing, this may take a few minutes...
</span></span><span class="line"><span class="cl">WslRegisterDistribution failed with error: 0x80370114
</span></span><span class="line"><span class="cl">Error: 0x80370114 The operation could not be started because a required feature is not installed.
</span></span></code></pre></div><p>Windows 11 上打开“设置”-&gt;“应用”-&gt;“可选功能”</p>
<p>“更多windows功能”选项</p>
<p>将“适用于Linux的Windows子系统”打勾后，重启即可。</p>
<h1 id="win11-默认支持直接挂载-ext4">win11 默认支持直接挂载 ext4<a hidden class="anchor" aria-hidden="true" href="#win11-默认支持直接挂载-ext4">#</a></h1>
<p>根据文档，用户需要安装 Windows 11 Build 22000 版本及以上，就可以直接挂载 EXT4 等格式的 Linux 磁盘。</p>
<p><a href="https://learn.microsoft.com/zh-cn/windows/wsl/wsl2-mount-disk">关于在 WSL 2 中安装 Linux 磁盘的入门 | Microsoft Learn</a></p>
<p><strong>标识磁盘</strong></p>
<p>要列出 Windows 中的可用磁盘，请运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">GET-CimInstance -query <span class="s2">&#34;SELECT * from Win32_DiskDrive&#34;</span>
</span></span></code></pre></div><p>磁盘路径位于“DeviceID”列下。 通常采用 \.\PHYSICALDRIVE* 格式。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">PS C:<span class="se">\U</span>sers<span class="se">\l</span>uyang&gt; GET-CimInstance -query <span class="s2">&#34;SELECT * from Win32_DiskDrive&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">DeviceID           Caption              Partitions Size          Model
</span></span><span class="line"><span class="cl">--------           -------              ---------- ----          -----
</span></span><span class="line"><span class="cl"><span class="se">\\</span>.<span class="se">\P</span>HYSICALDRIVE2 WD Green SN350 1TB   <span class="m">1</span>          <span class="m">1000202273280</span> WD Green SN350 1TB
</span></span><span class="line"><span class="cl"><span class="se">\\</span>.<span class="se">\P</span>HYSICALDRIVE1 WDC WD40EJRX-89AKWY0 <span class="m">1</span>          <span class="m">4000784417280</span> WDC WD40EJRX-89AKWY0
</span></span><span class="line"><span class="cl"><span class="se">\\</span>.<span class="se">\P</span>HYSICALDRIVE0 WDC WD10EZEX-08WN4A0 <span class="m">3</span>          <span class="m">1000202273280</span> WDC WD10EZEX-08WN4A0
</span></span></code></pre></div><p><strong>装载磁盘</strong></p>
<p>使用 PowerShell，可以使用上面发现的磁盘路径装载磁盘，请运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wsl --mount &lt;DiskPath&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># --bare: </span>
</span></span><span class="line"><span class="cl">wsl --mount &lt;DiskPath&gt; --bare
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wsl --help
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># mount 相关</span>
</span></span><span class="line"><span class="cl">--mount &lt;Disk&gt;
</span></span><span class="line"><span class="cl">	在所有 WSL <span class="m">2</span> 分发中附加并安装物理或虚拟磁盘。
</span></span><span class="line"><span class="cl">	选项:
</span></span><span class="line"><span class="cl">		--vhd
</span></span><span class="line"><span class="cl">			指定 &lt;Disk&gt; 是指虚拟硬盘。
</span></span><span class="line"><span class="cl">		--bare
</span></span><span class="line"><span class="cl">			将磁盘附加到 WSL 2，但不进行安装。
</span></span><span class="line"><span class="cl">		--name &lt;Name&gt;
</span></span><span class="line"><span class="cl">			对安装点使用自定义名称安装磁盘。
</span></span><span class="line"><span class="cl">		--type &lt;Type&gt;
</span></span><span class="line"><span class="cl">			安装磁盘时要使用的文件系统，如果未指定，则默认为 ext4。
</span></span><span class="line"><span class="cl">		--options &lt;Options&gt;
</span></span><span class="line"><span class="cl">			其他安装选项。
</span></span><span class="line"><span class="cl">		--partition &lt;Index&gt;
</span></span><span class="line"><span class="cl">			要安装的分区索引，如果未指定，则默认为整个磁盘。
</span></span></code></pre></div><p>实际挂载 LUSK 加密的 WD 移动硬盘 - 需要管理员权限启动终端</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">PS C:<span class="se">\W</span>indows<span class="se">\s</span>ystem32&gt; GET-CimInstance -query <span class="s2">&#34;SELECT * from Win32_DiskDrive&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">DeviceID           Caption                              Partitions Size          Model
</span></span><span class="line"><span class="cl">--------           -------                              ---------- ----          -----
</span></span><span class="line"><span class="cl"><span class="se">\\</span>.<span class="se">\P</span>HYSICALDRIVE2 WD Green SN350 1TB                   <span class="m">1</span>          <span class="m">1000202273280</span> WD Green SN350 1TB
</span></span><span class="line"><span class="cl"><span class="se">\\</span>.<span class="se">\P</span>HYSICALDRIVE1 WDC WD40EJRX-89AKWY0                 <span class="m">1</span>          <span class="m">4000784417280</span> WDC WD40EJRX-89AKWY0
</span></span><span class="line"><span class="cl"><span class="se">\\</span>.<span class="se">\P</span>HYSICALDRIVE0 WDC WD10EZEX-08WN4A0                 <span class="m">3</span>          <span class="m">1000202273280</span> WDC WD10EZEX-08WN4A0
</span></span><span class="line"><span class="cl"><span class="se">\\</span>.<span class="se">\P</span>HYSICALDRIVE3 WD My Passport 25F3 SCSI Disk Device <span class="m">1</span>          <span class="m">512073031680</span>  WD My Passport 25F3 SCSI Disk Device
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">PS C:<span class="se">\W</span>indows<span class="se">\s</span>ystem32&gt; wsl --mount <span class="se">\\</span>.<span class="se">\P</span>HYSICALDRIVE3 --bare
</span></span><span class="line"><span class="cl">操作成功完成。
</span></span></code></pre></div><p>之后通过 WSL ubuntu terminal 操作, 查看对应设备</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo fdisk -l
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Device     Boot Start        End    Sectors   Size Id Type
</span></span><span class="line"><span class="cl">/dev/sdc1        <span class="m">2048</span> <span class="m">1000148991</span> <span class="m">1000146944</span> 476.9G <span class="m">83</span> Linux
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo cryptsetup luksOpen /dev/sdc1 wd
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo mount /dev/mapper/wd ~/wd_udisk
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo umount ~/wd_udisk
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo cryptsetup luksClose wd
</span></span></code></pre></div><p>挂载机械硬盘</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># window terminal 管理员权限</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 1T</span>
</span></span><span class="line"><span class="cl">wsl --mount <span class="se">\\</span>.<span class="se">\P</span>HYSICALDRIVE0 --bare
</span></span><span class="line"><span class="cl"><span class="c1"># 4T</span>
</span></span><span class="line"><span class="cl">wsl --mount <span class="se">\\</span>.<span class="se">\P</span>HYSICALDRIVE1 --bare
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ubuntu terminal</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 4T</span>
</span></span><span class="line"><span class="cl">sudo mount -t ext4 /dev/sdf1 ~/HD_4T
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://adityatelange.github.io/hugo-PaperMod/tags/windows/">Windows</a></li>
      <li><a href="https://adityatelange.github.io/hugo-PaperMod/tags/wsl/">Wsl</a></li>
      <li><a href="https://adityatelange.github.io/hugo-PaperMod/tags/linux/">Linux</a></li>
      <li><a href="https://adityatelange.github.io/hugo-PaperMod/tags/ext4/">Ext4</a></li>
      <li><a href="https://adityatelange.github.io/hugo-PaperMod/tags/usbipd/">Usbipd</a></li>
    </ul>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share windows10 WSL setup on x"
            href="https://x.com/intent/tweet/?text=windows10%20WSL%20setup&amp;url=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fwindows10_wsl%2f&amp;hashtags=windows%2cwsl%2clinux%2cext4%2cusbipd">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share windows10 WSL setup on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fwindows10_wsl%2f&amp;title=windows10%20WSL%20setup&amp;summary=windows10%20WSL%20setup&amp;source=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fwindows10_wsl%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share windows10 WSL setup on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fwindows10_wsl%2f&title=windows10%20WSL%20setup">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share windows10 WSL setup on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fwindows10_wsl%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share windows10 WSL setup on whatsapp"
            href="https://api.whatsapp.com/send?text=windows10%20WSL%20setup%20-%20https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fwindows10_wsl%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share windows10 WSL setup on telegram"
            href="https://telegram.me/share/url?text=windows10%20WSL%20setup&amp;url=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fwindows10_wsl%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share windows10 WSL setup on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=windows10%20WSL%20setup&u=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fwindows10_wsl%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>© <a href="https://github.com/adityatelange/hugo-PaperMod/graphs/contributors">PaperMod Contributors</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
