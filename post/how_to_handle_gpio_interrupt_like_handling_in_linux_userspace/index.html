<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç† | Luyangã®Blog</title>
<meta name="keywords" content="linux, interrupt, gpio, userspace, select, poll">
<meta name="description" content="How to handle GPIO interrupt-like handling in Linux userspace
æ–‡ä»¶èŠ‚ç‚¹
/sys/class/gpio/gpio666# ls
active_low  device  direction  edge  subsystem  uevent  value
åªç”¨å¯¹åº” GPIO æœ‰ irq åŠŸèƒ½æ—¶æ‰ä¼šæœ‰ edge æ–‡ä»¶ã€‚

/sys/class/gpio/exportï¼šæ˜¯ä¸€ä¸ªåªå†™æ–‡ä»¶ï¼Œç”¨äºå¯¼å‡ºéœ€è¦ä½¿ç”¨çš„ GPIO å¼•è„š
/sys/class/gpio/gpiox/: æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨å¼•è„šå¯¼å‡ºåè‡ªåŠ¨åœ¨ / sys/class/gpio / ç›®å½•ä¸‹ç”Ÿæˆçš„
/sys/class/gpio/gpiox/active_lowï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥æ§åˆ¶ç”µå¹³çš„ææ€§ï¼ˆå†™ 1 æ˜¯é«˜ç”µå¹³è¿˜æ˜¯å†™ 0 æ˜¯é«˜ç”µå¹³ï¼‰ï¼Œé»˜è®¤å†™ 1 æ˜¯é«˜ç”µå¹³ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ç”¨å»ç®¡å®ƒ
/sys/class/gpio/gpiox/directionï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥æ§åˆ¶ GPIO æ˜¯è¾“å…¥è¿˜æ˜¯è¾“å‡ºï¼Œå¾€directionå†™ out å°±æ˜¯è¾“å‡ºå¼•è„šï¼Œå¾€directionå†™ in å°±æ˜¯è¾“å…¥å¼•è„š
/sys/class/gpio/gpiox/edgeï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼Œå†™ edge æ–‡ä»¶ï¼Œé…ç½® gpio ä¸ºå¤–éƒ¨ä¸­æ–­å¼•è„š
éä¸­æ–­å¼•è„šï¼š none
ä¸Šå‡æ²¿è§¦å‘ï¼š rising
ä¸‹é™æ²¿è§¦å‘ï¼š falling
è¾¹æ²¿è§¦å‘ï¼š both
/sys/class/gpio/gpiox/value: æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œå†™è¯¥æ–‡ä»¶è¡¨ç¤º gpio è¾“å‡ºï¼›åœ¨è¾“å…¥æ¨¡å¼ä¸‹è¯»è¯¥æ–‡ä»¶è¡¨ç¤ºè¾“å…¥

sysfs.txt
&#34;value&#34; ... reads as either 0 (low) or 1 (high). If the GPIO
  is configured as an output, this value may be written;
  any nonzero value is treated as high.

  If the pin can be configured as interrupt-generating interrupt
  and if it has been configured to generate interrupts (see the
  description of &#34;edge&#34;), you can poll(2) on that file and
  poll(2) will return whenever the interrupt was triggered. If
  you use poll(2), set the events POLLPRI and POLLERR. If you
  use select(2), set the file descriptor in exceptfds. After
  poll(2) returns, either lseek(2) to the beginning of the sysfs
  file and read the new value or close the file and re-open it
  to read the value.

&#34;edge&#34; ... reads as either &#34;none&#34;, &#34;rising&#34;, &#34;falling&#34;, or
  &#34;both&#34;. Write these strings to select the signal edge(s)
  that will make poll(2) on the &#34;value&#34; file return.

  This file exists only if the pin can be configured as an
  interrupt generating input pin.
demo
ä¸€å¨å±æ ·ä»£ç ">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="https://adityatelange.github.io/hugo-PaperMod/post/how_to_handle_gpio_interrupt_like_handling_in_linux_userspace/">
<link crossorigin="anonymous" href="/hugo-PaperMod/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://adityatelange.github.io/hugo-PaperMod/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://adityatelange.github.io/hugo-PaperMod/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://adityatelange.github.io/hugo-PaperMod/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://adityatelange.github.io/hugo-PaperMod/apple-touch-icon.png">
<link rel="mask-icon" href="https://adityatelange.github.io/hugo-PaperMod/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://adityatelange.github.io/hugo-PaperMod/post/how_to_handle_gpio_interrupt_like_handling_in_linux_userspace/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://adityatelange.github.io/hugo-PaperMod/post/how_to_handle_gpio_interrupt_like_handling_in_linux_userspace/">
  <meta property="og:site_name" content="Luyangã®Blog">
  <meta property="og:title" content="å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç†">
  <meta property="og:description" content="How to handle GPIO interrupt-like handling in Linux userspace æ–‡ä»¶èŠ‚ç‚¹ /sys/class/gpio/gpio666# ls active_low device direction edge subsystem uevent value åªç”¨å¯¹åº” GPIO æœ‰ irq åŠŸèƒ½æ—¶æ‰ä¼šæœ‰ edge æ–‡ä»¶ã€‚
/sys/class/gpio/exportï¼šæ˜¯ä¸€ä¸ªåªå†™æ–‡ä»¶ï¼Œç”¨äºå¯¼å‡ºéœ€è¦ä½¿ç”¨çš„ GPIO å¼•è„š /sys/class/gpio/gpiox/: æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨å¼•è„šå¯¼å‡ºåè‡ªåŠ¨åœ¨ / sys/class/gpio / ç›®å½•ä¸‹ç”Ÿæˆçš„ /sys/class/gpio/gpiox/active_lowï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥æ§åˆ¶ç”µå¹³çš„ææ€§ï¼ˆå†™ 1 æ˜¯é«˜ç”µå¹³è¿˜æ˜¯å†™ 0 æ˜¯é«˜ç”µå¹³ï¼‰ï¼Œé»˜è®¤å†™ 1 æ˜¯é«˜ç”µå¹³ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ç”¨å»ç®¡å®ƒ /sys/class/gpio/gpiox/directionï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥æ§åˆ¶ GPIO æ˜¯è¾“å…¥è¿˜æ˜¯è¾“å‡ºï¼Œå¾€directionå†™ out å°±æ˜¯è¾“å‡ºå¼•è„šï¼Œå¾€directionå†™ in å°±æ˜¯è¾“å…¥å¼•è„š /sys/class/gpio/gpiox/edgeï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼Œå†™ edge æ–‡ä»¶ï¼Œé…ç½® gpio ä¸ºå¤–éƒ¨ä¸­æ–­å¼•è„š éä¸­æ–­å¼•è„šï¼š none ä¸Šå‡æ²¿è§¦å‘ï¼š rising ä¸‹é™æ²¿è§¦å‘ï¼š falling è¾¹æ²¿è§¦å‘ï¼š both /sys/class/gpio/gpiox/value: æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œå†™è¯¥æ–‡ä»¶è¡¨ç¤º gpio è¾“å‡ºï¼›åœ¨è¾“å…¥æ¨¡å¼ä¸‹è¯»è¯¥æ–‡ä»¶è¡¨ç¤ºè¾“å…¥ sysfs.txt
&#34;value&#34; ... reads as either 0 (low) or 1 (high). If the GPIO is configured as an output, this value may be written; any nonzero value is treated as high. If the pin can be configured as interrupt-generating interrupt and if it has been configured to generate interrupts (see the description of &#34;edge&#34;), you can poll(2) on that file and poll(2) will return whenever the interrupt was triggered. If you use poll(2), set the events POLLPRI and POLLERR. If you use select(2), set the file descriptor in exceptfds. After poll(2) returns, either lseek(2) to the beginning of the sysfs file and read the new value or close the file and re-open it to read the value. &#34;edge&#34; ... reads as either &#34;none&#34;, &#34;rising&#34;, &#34;falling&#34;, or &#34;both&#34;. Write these strings to select the signal edge(s) that will make poll(2) on the &#34;value&#34; file return. This file exists only if the pin can be configured as an interrupt generating input pin. demo ä¸€å¨å±æ ·ä»£ç ">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="1970-01-01T00:00:00+08:00">
    <meta property="article:modified_time" content="1970-01-01T00:00:00+08:00">
    <meta property="article:tag" content="Linux">
    <meta property="article:tag" content="Interrupt">
    <meta property="article:tag" content="Gpio">
    <meta property="article:tag" content="Userspace">
    <meta property="article:tag" content="Select">
    <meta property="article:tag" content="Poll">
      <meta property="og:image" content="https://adityatelange.github.io/hugo-PaperMod/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://adityatelange.github.io/hugo-PaperMod/images/papermod-cover.png">
<meta name="twitter:title" content="å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç†">
<meta name="twitter:description" content="How to handle GPIO interrupt-like handling in Linux userspace
æ–‡ä»¶èŠ‚ç‚¹
/sys/class/gpio/gpio666# ls
active_low  device  direction  edge  subsystem  uevent  value
åªç”¨å¯¹åº” GPIO æœ‰ irq åŠŸèƒ½æ—¶æ‰ä¼šæœ‰ edge æ–‡ä»¶ã€‚

/sys/class/gpio/exportï¼šæ˜¯ä¸€ä¸ªåªå†™æ–‡ä»¶ï¼Œç”¨äºå¯¼å‡ºéœ€è¦ä½¿ç”¨çš„ GPIO å¼•è„š
/sys/class/gpio/gpiox/: æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨å¼•è„šå¯¼å‡ºåè‡ªåŠ¨åœ¨ / sys/class/gpio / ç›®å½•ä¸‹ç”Ÿæˆçš„
/sys/class/gpio/gpiox/active_lowï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥æ§åˆ¶ç”µå¹³çš„ææ€§ï¼ˆå†™ 1 æ˜¯é«˜ç”µå¹³è¿˜æ˜¯å†™ 0 æ˜¯é«˜ç”µå¹³ï¼‰ï¼Œé»˜è®¤å†™ 1 æ˜¯é«˜ç”µå¹³ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ç”¨å»ç®¡å®ƒ
/sys/class/gpio/gpiox/directionï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥æ§åˆ¶ GPIO æ˜¯è¾“å…¥è¿˜æ˜¯è¾“å‡ºï¼Œå¾€directionå†™ out å°±æ˜¯è¾“å‡ºå¼•è„šï¼Œå¾€directionå†™ in å°±æ˜¯è¾“å…¥å¼•è„š
/sys/class/gpio/gpiox/edgeï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼Œå†™ edge æ–‡ä»¶ï¼Œé…ç½® gpio ä¸ºå¤–éƒ¨ä¸­æ–­å¼•è„š
éä¸­æ–­å¼•è„šï¼š none
ä¸Šå‡æ²¿è§¦å‘ï¼š rising
ä¸‹é™æ²¿è§¦å‘ï¼š falling
è¾¹æ²¿è§¦å‘ï¼š both
/sys/class/gpio/gpiox/value: æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œå†™è¯¥æ–‡ä»¶è¡¨ç¤º gpio è¾“å‡ºï¼›åœ¨è¾“å…¥æ¨¡å¼ä¸‹è¯»è¯¥æ–‡ä»¶è¡¨ç¤ºè¾“å…¥

sysfs.txt
&#34;value&#34; ... reads as either 0 (low) or 1 (high). If the GPIO
  is configured as an output, this value may be written;
  any nonzero value is treated as high.

  If the pin can be configured as interrupt-generating interrupt
  and if it has been configured to generate interrupts (see the
  description of &#34;edge&#34;), you can poll(2) on that file and
  poll(2) will return whenever the interrupt was triggered. If
  you use poll(2), set the events POLLPRI and POLLERR. If you
  use select(2), set the file descriptor in exceptfds. After
  poll(2) returns, either lseek(2) to the beginning of the sysfs
  file and read the new value or close the file and re-open it
  to read the value.

&#34;edge&#34; ... reads as either &#34;none&#34;, &#34;rising&#34;, &#34;falling&#34;, or
  &#34;both&#34;. Write these strings to select the signal edge(s)
  that will make poll(2) on the &#34;value&#34; file return.

  This file exists only if the pin can be configured as an
  interrupt generating input pin.
demo
ä¸€å¨å±æ ·ä»£ç ">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://adityatelange.github.io/hugo-PaperMod/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç†",
      "item": "https://adityatelange.github.io/hugo-PaperMod/post/how_to_handle_gpio_interrupt_like_handling_in_linux_userspace/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç†",
  "name": "å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç†",
  "description": "How to handle GPIO interrupt-like handling in Linux userspace æ–‡ä»¶èŠ‚ç‚¹ /sys/class/gpio/gpio666# ls active_low device direction edge subsystem uevent value åªç”¨å¯¹åº” GPIO æœ‰ irq åŠŸèƒ½æ—¶æ‰ä¼šæœ‰ edge æ–‡ä»¶ã€‚\n/sys/class/gpio/exportï¼šæ˜¯ä¸€ä¸ªåªå†™æ–‡ä»¶ï¼Œç”¨äºå¯¼å‡ºéœ€è¦ä½¿ç”¨çš„ GPIO å¼•è„š /sys/class/gpio/gpiox/: æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨å¼•è„šå¯¼å‡ºåè‡ªåŠ¨åœ¨ / sys/class/gpio / ç›®å½•ä¸‹ç”Ÿæˆçš„ /sys/class/gpio/gpiox/active_lowï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥æ§åˆ¶ç”µå¹³çš„ææ€§ï¼ˆå†™ 1 æ˜¯é«˜ç”µå¹³è¿˜æ˜¯å†™ 0 æ˜¯é«˜ç”µå¹³ï¼‰ï¼Œé»˜è®¤å†™ 1 æ˜¯é«˜ç”µå¹³ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ç”¨å»ç®¡å®ƒ /sys/class/gpio/gpiox/directionï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥æ§åˆ¶ GPIO æ˜¯è¾“å…¥è¿˜æ˜¯è¾“å‡ºï¼Œå¾€directionå†™ out å°±æ˜¯è¾“å‡ºå¼•è„šï¼Œå¾€directionå†™ in å°±æ˜¯è¾“å…¥å¼•è„š /sys/class/gpio/gpiox/edgeï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼Œå†™ edge æ–‡ä»¶ï¼Œé…ç½® gpio ä¸ºå¤–éƒ¨ä¸­æ–­å¼•è„š éä¸­æ–­å¼•è„šï¼š none ä¸Šå‡æ²¿è§¦å‘ï¼š rising ä¸‹é™æ²¿è§¦å‘ï¼š falling è¾¹æ²¿è§¦å‘ï¼š both /sys/class/gpio/gpiox/value: æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œå†™è¯¥æ–‡ä»¶è¡¨ç¤º gpio è¾“å‡ºï¼›åœ¨è¾“å…¥æ¨¡å¼ä¸‹è¯»è¯¥æ–‡ä»¶è¡¨ç¤ºè¾“å…¥ sysfs.txt\n\u0026#34;value\u0026#34; ... reads as either 0 (low) or 1 (high). If the GPIO is configured as an output, this value may be written; any nonzero value is treated as high. If the pin can be configured as interrupt-generating interrupt and if it has been configured to generate interrupts (see the description of \u0026#34;edge\u0026#34;), you can poll(2) on that file and poll(2) will return whenever the interrupt was triggered. If you use poll(2), set the events POLLPRI and POLLERR. If you use select(2), set the file descriptor in exceptfds. After poll(2) returns, either lseek(2) to the beginning of the sysfs file and read the new value or close the file and re-open it to read the value. \u0026#34;edge\u0026#34; ... reads as either \u0026#34;none\u0026#34;, \u0026#34;rising\u0026#34;, \u0026#34;falling\u0026#34;, or \u0026#34;both\u0026#34;. Write these strings to select the signal edge(s) that will make poll(2) on the \u0026#34;value\u0026#34; file return. This file exists only if the pin can be configured as an interrupt generating input pin. demo ä¸€å¨å±æ ·ä»£ç \n",
  "keywords": [
    "linux", "interrupt", "gpio", "userspace", "select", "poll"
  ],
  "articleBody": "How to handle GPIO interrupt-like handling in Linux userspace æ–‡ä»¶èŠ‚ç‚¹ /sys/class/gpio/gpio666# ls active_low device direction edge subsystem uevent value åªç”¨å¯¹åº” GPIO æœ‰ irq åŠŸèƒ½æ—¶æ‰ä¼šæœ‰ edge æ–‡ä»¶ã€‚\n/sys/class/gpio/exportï¼šæ˜¯ä¸€ä¸ªåªå†™æ–‡ä»¶ï¼Œç”¨äºå¯¼å‡ºéœ€è¦ä½¿ç”¨çš„ GPIO å¼•è„š /sys/class/gpio/gpiox/: æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨å¼•è„šå¯¼å‡ºåè‡ªåŠ¨åœ¨ / sys/class/gpio / ç›®å½•ä¸‹ç”Ÿæˆçš„ /sys/class/gpio/gpiox/active_lowï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥æ§åˆ¶ç”µå¹³çš„ææ€§ï¼ˆå†™ 1 æ˜¯é«˜ç”µå¹³è¿˜æ˜¯å†™ 0 æ˜¯é«˜ç”µå¹³ï¼‰ï¼Œé»˜è®¤å†™ 1 æ˜¯é«˜ç”µå¹³ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ç”¨å»ç®¡å®ƒ /sys/class/gpio/gpiox/directionï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥æ§åˆ¶ GPIO æ˜¯è¾“å…¥è¿˜æ˜¯è¾“å‡ºï¼Œå¾€directionå†™ out å°±æ˜¯è¾“å‡ºå¼•è„šï¼Œå¾€directionå†™ in å°±æ˜¯è¾“å…¥å¼•è„š /sys/class/gpio/gpiox/edgeï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼Œå†™ edge æ–‡ä»¶ï¼Œé…ç½® gpio ä¸ºå¤–éƒ¨ä¸­æ–­å¼•è„š éä¸­æ–­å¼•è„šï¼š none ä¸Šå‡æ²¿è§¦å‘ï¼š rising ä¸‹é™æ²¿è§¦å‘ï¼š falling è¾¹æ²¿è§¦å‘ï¼š both /sys/class/gpio/gpiox/value: æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œå†™è¯¥æ–‡ä»¶è¡¨ç¤º gpio è¾“å‡ºï¼›åœ¨è¾“å…¥æ¨¡å¼ä¸‹è¯»è¯¥æ–‡ä»¶è¡¨ç¤ºè¾“å…¥ sysfs.txt\n\"value\" ... reads as either 0 (low) or 1 (high). If the GPIO is configured as an output, this value may be written; any nonzero value is treated as high. If the pin can be configured as interrupt-generating interrupt and if it has been configured to generate interrupts (see the description of \"edge\"), you can poll(2) on that file and poll(2) will return whenever the interrupt was triggered. If you use poll(2), set the events POLLPRI and POLLERR. If you use select(2), set the file descriptor in exceptfds. After poll(2) returns, either lseek(2) to the beginning of the sysfs file and read the new value or close the file and re-open it to read the value. \"edge\" ... reads as either \"none\", \"rising\", \"falling\", or \"both\". Write these strings to select the signal edge(s) that will make poll(2) on the \"value\" file return. This file exists only if the pin can be configured as an interrupt generating input pin. demo ä¸€å¨å±æ ·ä»£ç \n#define GPIO_PIN_NUMBER 666 void* gpio_irq(void *arg) { int fd; fd_set readFds; char value; // å¦‚æœæ²¡æœ‰GPIO å¯¼å‡ºæ–‡ä»¶ï¼Œåˆ™æ‰“å¼€ GPIO å¯¼å‡ºæ–‡ä»¶ int exportFd = -1; struct stat dir_stat; char gpioDir[64]; sprintf(gpioDir, \"/sys/class/gpio/gpio%d\", GPIO_PIN_NUMBER); if (stat(gpioDir, \u0026dir_stat) != 0) { exportFd = open(\"/sys/class/gpio/export\", O_WRONLY); if (exportFd == -1) { perror(\"Error opening export file\"); return EXIT_FAILURE; } // å°† GPIO å£ç¼–å·å†™å…¥åˆ°å¯¼å‡ºæ–‡ä»¶ä¸­ if (write(exportFd, \"666\", 3) != 3) { perror(\"Error writing to export file\"); close(exportFd); return EXIT_FAILURE; } close(exportFd); } // ç­‰å¾…ä¸€å°æ®µæ—¶é—´ï¼Œä»¥ç¡®ä¿ GPIO å£åˆ›å»ºå®Œæˆ usleep(10000); // æ‰“å¼€ GPIO æ–¹å‘æ–‡ä»¶ char gpioDirectionPath[64]; sprintf(gpioDirectionPath, \"/sys/class/gpio/gpio%d/direction\", GPIO_PIN_NUMBER); fd = open(gpioDirectionPath, O_WRONLY); if (fd \u003c 0) { perror(\"Error opening direction file\"); return NULL; } // å°† GPIO å£æ–¹å‘è®¾ç½®ä¸ºè¾“å…¥ if (write(fd, \"in\", 2) != 2) { perror(\"Error setting GPIO direction\"); close(fd); return NULL; } close(fd); // æ‰“å¼€ GPIO edge æ–‡ä»¶ char gpioEdgePath[64]; sprintf(gpioEdgePath, \"/sys/class/gpio/gpio%d/edge\", GPIO_PIN_NUMBER); fd = open(gpioEdgePath, O_WRONLY); if (fd \u003c 0) { perror(\"Error opening edge file\"); return NULL; } // å°† GPIO edge both if (write(fd, \"rising\", 6) != 6) { perror(\"Error setting GPIO edge\"); close(fd); return NULL; } close(fd); // æ‰“å¼€ GPIO å€¼æ–‡ä»¶ char gpioValuePath[64]; sprintf(gpioValuePath, \"/sys/class/gpio/gpio%d/value\", GPIO_PIN_NUMBER); int value_fd = open(gpioValuePath, O_RDONLY); if (value_fd \u003c 0) { perror(\"Error opening value file\"); return NULL; } // åˆ›å»ºæ–‡ä»¶æè¿°ç¬¦é›†åˆ FD_ZERO(\u0026readFds); FD_SET(value_fd, \u0026readFds); // ç›‘å¬ GPIO çš„ä¸‹é™æ²¿è§¦å‘äº‹ä»¶ while (true) { // é‡æ–°è®¾ç½®æ–‡ä»¶æè¿°ç¬¦é›†åˆ fd_set tempFds = readFds; // ç›‘å¬æ–‡ä»¶æè¿°ç¬¦å˜åŒ– int selectResult = select(value_fd + 1, NULL, NULL, \u0026tempFds, NULL); if (selectResult \u003c 0) { perror(\"Error in select\"); break; } else if (selectResult \u003e 0) { // æ£€æŸ¥ GPIO çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å¯è¯» if (FD_ISSET(value_fd, \u0026tempFds)) { DBG_PRINT(\"====================\\n\"); // è¯»å– GPIO çš„å€¼ lseek(value_fd, 0, SEEK_SET); read(value_fd, \u0026value, 1); DBG_PRINT(\"read value: %c\\n\", value); if (value == '0') { DBG_PRINT(\"+++++++++++++++ Falling edge detected! ++++++++++++++\\n\"); // åœ¨è¿™é‡Œæ‰§è¡Œ GPIO ä¸‹é™æ²¿è§¦å‘äº‹ä»¶çš„å¤„ç† } else { DBG_PRINT(\"--------------------Rising edge detected!--------------\\n\"); // åœ¨è¿™é‡Œæ‰§è¡Œ GPIO ä¸Šå‡æ²¿è§¦å‘äº‹ä»¶çš„å¤„ç† } } // usleep(1000*20); } } close(value_fd); // å…³é—­ GPIO å¯¼å‡ºæ–‡ä»¶ int unexportFd = open(\"/sys/class/gpio/unexport\", O_WRONLY); if (unexportFd \u003c 0) { perror(\"Error opening unexport file\"); return NULL; } // å°† GPIO å£ç¼–å·å†™å…¥åˆ°å–æ¶ˆå¯¼å‡ºæ–‡ä»¶ä¸­ if (write(unexportFd, \"124\", 3) != 3) { perror(\"Error writing to unexport file\"); } close(unexportFd); return NULL; } edge: â€œnoneâ€,Â â€œrisingâ€,Â â€œfallingâ€ï¼Œâ€œbothâ€ è™½ç„¶ç”³è¯·çš„æ˜¯ rising edge ä¸­æ–­ï¼Œä½†æ˜¯ select è¿”å›ä¸­è¿˜æ˜¯ä¼šå“åº”ä¸Šå‡æ²¿ï¼Œä¸‹é™æ²¿ï¼Œè¯·æ ¹æ® read ç»“æœåšè¿›ä¸€æ­¥åˆ¤æ–­ æ³¨æ„ä»£ç ä¸­ tempFds çš„å‚æ•°ä½ç½®ï¼š int selectResult = select(value_fd + 1, NULL, NULL, \u0026tempFds, NULL); ",
  "wordCount" : "592",
  "inLanguage": "en",
  "image": "https://adityatelange.github.io/hugo-PaperMod/images/papermod-cover.png","datePublished": "1970-01-01T00:00:00+08:00",
  "dateModified": "1970-01-01T00:00:00+08:00",
  "author":{
    "@type": "Person",
    "name": "Theme PaperMod"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://adityatelange.github.io/hugo-PaperMod/post/how_to_handle_gpio_interrupt_like_handling_in_linux_userspace/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Luyangã®Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://adityatelange.github.io/hugo-PaperMod/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://adityatelange.github.io/hugo-PaperMod/" accesskey="h" title="Luyangã®Blog (Alt + H)">Luyangã®Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://adityatelange.github.io/hugo-PaperMod/fr/" title="French"
                            aria-label=":fr:">ğŸ‡«ğŸ‡·</a>
                    </li>
                    <li>
                        <a href="https://adityatelange.github.io/hugo-PaperMod/fa/" title="Fa"
                            aria-label="Fa">Fa</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://adityatelange.github.io/hugo-PaperMod/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://adityatelange.github.io/hugo-PaperMod/search/" title="Search">
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://adityatelange.github.io/hugo-PaperMod/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://adityatelange.github.io/hugo-PaperMod/">Home</a>&nbsp;Â»&nbsp;<a href="https://adityatelange.github.io/hugo-PaperMod/post/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç†
    </h1>
    <div class="post-meta"><span title='1970-01-01 00:00:00 +0800 CST'>January 1, 1970</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Theme PaperMod&nbsp;|&nbsp;<a href="https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite/content/post/How_to_handle_GPIO_interrupt_like_handling_in_Linux_userspace.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#how-to-handle-gpio-interrupt-like-handling-in-linux-userspace" aria-label="How to handle GPIO interrupt-like handling in Linux userspace">How to handle GPIO interrupt-like handling in Linux userspace</a><ul>
                        
                <li>
                    <a href="#%e6%96%87%e4%bb%b6%e8%8a%82%e7%82%b9" aria-label="æ–‡ä»¶èŠ‚ç‚¹">æ–‡ä»¶èŠ‚ç‚¹</a></li>
                <li>
                    <a href="#demo" aria-label="demo">demo</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="how-to-handle-gpio-interrupt-like-handling-in-linux-userspace">How to handle GPIO interrupt-like handling in Linux userspace<a hidden class="anchor" aria-hidden="true" href="#how-to-handle-gpio-interrupt-like-handling-in-linux-userspace">#</a></h1>
<h2 id="æ–‡ä»¶èŠ‚ç‚¹">æ–‡ä»¶èŠ‚ç‚¹<a hidden class="anchor" aria-hidden="true" href="#æ–‡ä»¶èŠ‚ç‚¹">#</a></h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">/sys/class/gpio/gpio666# ls
</span></span><span class="line"><span class="cl">active_low  device  direction  edge  subsystem  uevent  value
</span></span></code></pre></div><p>åªç”¨å¯¹åº” GPIO æœ‰ irq åŠŸèƒ½æ—¶æ‰ä¼šæœ‰ edge æ–‡ä»¶ã€‚</p>
<ul>
<li>/sys/class/gpio/exportï¼šæ˜¯ä¸€ä¸ªåªå†™æ–‡ä»¶ï¼Œç”¨äºå¯¼å‡ºéœ€è¦ä½¿ç”¨çš„ GPIO å¼•è„š</li>
<li>/sys/class/gpio/gpiox/: æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨å¼•è„šå¯¼å‡ºåè‡ªåŠ¨åœ¨ / sys/class/gpio / ç›®å½•ä¸‹ç”Ÿæˆçš„</li>
<li>/sys/class/gpio/gpiox/active_lowï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥æ§åˆ¶ç”µå¹³çš„ææ€§ï¼ˆå†™ 1 æ˜¯é«˜ç”µå¹³è¿˜æ˜¯å†™ 0 æ˜¯é«˜ç”µå¹³ï¼‰ï¼Œé»˜è®¤å†™ 1 æ˜¯é«˜ç”µå¹³ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ç”¨å»ç®¡å®ƒ</li>
<li>/sys/class/gpio/gpiox/directionï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥æ§åˆ¶ GPIO æ˜¯è¾“å…¥è¿˜æ˜¯è¾“å‡ºï¼Œå¾€directionå†™ out å°±æ˜¯è¾“å‡ºå¼•è„šï¼Œå¾€directionå†™ in å°±æ˜¯è¾“å…¥å¼•è„š</li>
<li>/sys/class/gpio/gpiox/edgeï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼Œå†™ edge æ–‡ä»¶ï¼Œé…ç½® gpio ä¸ºå¤–éƒ¨ä¸­æ–­å¼•è„š</li>
<li>éä¸­æ–­å¼•è„šï¼š none</li>
<li>ä¸Šå‡æ²¿è§¦å‘ï¼š rising</li>
<li>ä¸‹é™æ²¿è§¦å‘ï¼š falling</li>
<li>è¾¹æ²¿è§¦å‘ï¼š both</li>
<li>/sys/class/gpio/gpiox/value: æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œå†™è¯¥æ–‡ä»¶è¡¨ç¤º gpio è¾“å‡ºï¼›åœ¨è¾“å…¥æ¨¡å¼ä¸‹è¯»è¯¥æ–‡ä»¶è¡¨ç¤ºè¾“å…¥</li>
</ul>
<p><a href="https://www.kernel.org/doc/Documentation/gpio/sysfs.txt">sysfs.txt</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">&#34;value&#34; ... reads as either 0 (low) or 1 (high). If the GPIO
</span></span><span class="line"><span class="cl">  is configured as an output, this value may be written;
</span></span><span class="line"><span class="cl">  any nonzero value is treated as high.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  If the pin can be configured as interrupt-generating interrupt
</span></span><span class="line"><span class="cl">  and if it has been configured to generate interrupts (see the
</span></span><span class="line"><span class="cl">  description of &#34;edge&#34;), you can poll(2) on that file and
</span></span><span class="line"><span class="cl">  poll(2) will return whenever the interrupt was triggered. If
</span></span><span class="line"><span class="cl">  you use poll(2), set the events POLLPRI and POLLERR. If you
</span></span><span class="line"><span class="cl">  use select(2), set the file descriptor in exceptfds. After
</span></span><span class="line"><span class="cl">  poll(2) returns, either lseek(2) to the beginning of the sysfs
</span></span><span class="line"><span class="cl">  file and read the new value or close the file and re-open it
</span></span><span class="line"><span class="cl">  to read the value.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#34;edge&#34; ... reads as either &#34;none&#34;, &#34;rising&#34;, &#34;falling&#34;, or
</span></span><span class="line"><span class="cl">  &#34;both&#34;. Write these strings to select the signal edge(s)
</span></span><span class="line"><span class="cl">  that will make poll(2) on the &#34;value&#34; file return.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  This file exists only if the pin can be configured as an
</span></span><span class="line"><span class="cl">  interrupt generating input pin.
</span></span></code></pre></div><h2 id="demo">demo<a hidden class="anchor" aria-hidden="true" href="#demo">#</a></h2>
<p>ä¸€å¨å±æ ·ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#define GPIO_PIN_NUMBER 666
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span><span class="o">*</span> <span class="nf">gpio_irq</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">fd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">fd_set</span> <span class="n">readFds</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å¦‚æœæ²¡æœ‰GPIO å¯¼å‡ºæ–‡ä»¶ï¼Œåˆ™æ‰“å¼€ GPIO å¯¼å‡ºæ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">exportFd</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="n">stat</span> <span class="n">dir_stat</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">gpioDir</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="nf">sprintf</span><span class="p">(</span><span class="n">gpioDir</span><span class="p">,</span> <span class="s">&#34;/sys/class/gpio/gpio%d&#34;</span><span class="p">,</span> <span class="n">GPIO_PIN_NUMBER</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nf">stat</span><span class="p">(</span><span class="n">gpioDir</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dir_stat</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">exportFd</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="s">&#34;/sys/class/gpio/export&#34;</span><span class="p">,</span> <span class="n">O_WRONLY</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">exportFd</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">perror</span><span class="p">(</span><span class="s">&#34;Error opening export file&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// å°† GPIO å£ç¼–å·å†™å…¥åˆ°å¯¼å‡ºæ–‡ä»¶ä¸­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="nf">write</span><span class="p">(</span><span class="n">exportFd</span><span class="p">,</span> <span class="s">&#34;666&#34;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">perror</span><span class="p">(</span><span class="s">&#34;Error writing to export file&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nf">close</span><span class="p">(</span><span class="n">exportFd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nf">close</span><span class="p">(</span><span class="n">exportFd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ç­‰å¾…ä¸€å°æ®µæ—¶é—´ï¼Œä»¥ç¡®ä¿ GPIO å£åˆ›å»ºå®Œæˆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">usleep</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// æ‰“å¼€ GPIO æ–¹å‘æ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">char</span> <span class="n">gpioDirectionPath</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="nf">sprintf</span><span class="p">(</span><span class="n">gpioDirectionPath</span><span class="p">,</span> <span class="s">&#34;/sys/class/gpio/gpio%d/direction&#34;</span><span class="p">,</span> <span class="n">GPIO_PIN_NUMBER</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">fd</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="n">gpioDirectionPath</span><span class="p">,</span> <span class="n">O_WRONLY</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">fd</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">perror</span><span class="p">(</span><span class="s">&#34;Error opening direction file&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å°† GPIO å£æ–¹å‘è®¾ç½®ä¸ºè¾“å…¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nf">write</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="s">&#34;in&#34;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">perror</span><span class="p">(</span><span class="s">&#34;Error setting GPIO direction&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nf">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// æ‰“å¼€ GPIO edge æ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">char</span> <span class="n">gpioEdgePath</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="nf">sprintf</span><span class="p">(</span><span class="n">gpioEdgePath</span><span class="p">,</span> <span class="s">&#34;/sys/class/gpio/gpio%d/edge&#34;</span><span class="p">,</span> <span class="n">GPIO_PIN_NUMBER</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">fd</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="n">gpioEdgePath</span><span class="p">,</span> <span class="n">O_WRONLY</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">fd</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">perror</span><span class="p">(</span><span class="s">&#34;Error opening edge file&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å°† GPIO edge both
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nf">write</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="s">&#34;rising&#34;</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">6</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">perror</span><span class="p">(</span><span class="s">&#34;Error setting GPIO edge&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nf">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// æ‰“å¼€ GPIO å€¼æ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">char</span> <span class="n">gpioValuePath</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="nf">sprintf</span><span class="p">(</span><span class="n">gpioValuePath</span><span class="p">,</span> <span class="s">&#34;/sys/class/gpio/gpio%d/value&#34;</span><span class="p">,</span> <span class="n">GPIO_PIN_NUMBER</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">value_fd</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="n">gpioValuePath</span><span class="p">,</span> <span class="n">O_RDONLY</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">value_fd</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">perror</span><span class="p">(</span><span class="s">&#34;Error opening value file&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// åˆ›å»ºæ–‡ä»¶æè¿°ç¬¦é›†åˆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">FD_ZERO</span><span class="p">(</span><span class="o">&amp;</span><span class="n">readFds</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">FD_SET</span><span class="p">(</span><span class="n">value_fd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">readFds</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ç›‘å¬ GPIO çš„ä¸‹é™æ²¿è§¦å‘äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// é‡æ–°è®¾ç½®æ–‡ä»¶æè¿°ç¬¦é›†åˆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">fd_set</span> <span class="n">tempFds</span> <span class="o">=</span> <span class="n">readFds</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// ç›‘å¬æ–‡ä»¶æè¿°ç¬¦å˜åŒ–
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">selectResult</span> <span class="o">=</span> <span class="nf">select</span><span class="p">(</span><span class="n">value_fd</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tempFds</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">selectResult</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">perror</span><span class="p">(</span><span class="s">&#34;Error in select&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">selectResult</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// æ£€æŸ¥ GPIO çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å¯è¯»
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="nf">FD_ISSET</span><span class="p">(</span><span class="n">value_fd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tempFds</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nf">DBG_PRINT</span><span class="p">(</span><span class="s">&#34;====================</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// è¯»å– GPIO çš„å€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nf">lseek</span><span class="p">(</span><span class="n">value_fd</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SEEK_SET</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="nf">read</span><span class="p">(</span><span class="n">value_fd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="nf">DBG_PRINT</span><span class="p">(</span><span class="s">&#34;read value: %c</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">DBG_PRINT</span><span class="p">(</span><span class="s">&#34;+++++++++++++++ Falling edge detected! ++++++++++++++</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// åœ¨è¿™é‡Œæ‰§è¡Œ GPIO ä¸‹é™æ²¿è§¦å‘äº‹ä»¶çš„å¤„ç†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">DBG_PRINT</span><span class="p">(</span><span class="s">&#34;--------------------Rising edge detected!--------------</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// åœ¨è¿™é‡Œæ‰§è¡Œ GPIO ä¸Šå‡æ²¿è§¦å‘äº‹ä»¶çš„å¤„ç†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// usleep(1000*20);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">close</span><span class="p">(</span><span class="n">value_fd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å…³é—­ GPIO å¯¼å‡ºæ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">unexportFd</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="s">&#34;/sys/class/gpio/unexport&#34;</span><span class="p">,</span> <span class="n">O_WRONLY</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">unexportFd</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">perror</span><span class="p">(</span><span class="s">&#34;Error opening unexport file&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å°† GPIO å£ç¼–å·å†™å…¥åˆ°å–æ¶ˆå¯¼å‡ºæ–‡ä»¶ä¸­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nf">write</span><span class="p">(</span><span class="n">unexportFd</span><span class="p">,</span> <span class="s">&#34;124&#34;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">perror</span><span class="p">(</span><span class="s">&#34;Error writing to unexport file&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nf">close</span><span class="p">(</span><span class="n">unexportFd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><ul>
<li>edge: &ldquo;none&rdquo;,Â &ldquo;rising&rdquo;,Â &ldquo;falling&rdquo;ï¼Œ&ldquo;both&rdquo;</li>
<li>è™½ç„¶ç”³è¯·çš„æ˜¯ rising edge ä¸­æ–­ï¼Œä½†æ˜¯ select è¿”å›ä¸­è¿˜æ˜¯ä¼šå“åº”ä¸Šå‡æ²¿ï¼Œä¸‹é™æ²¿ï¼Œè¯·æ ¹æ® read ç»“æœåšè¿›ä¸€æ­¥åˆ¤æ–­</li>
<li>æ³¨æ„ä»£ç ä¸­ <code>tempFds</code> çš„å‚æ•°ä½ç½®ï¼š <code>int selectResult = select(value_fd + 1, NULL, NULL, &amp;tempFds, NULL);</code></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://adityatelange.github.io/hugo-PaperMod/tags/linux/">Linux</a></li>
      <li><a href="https://adityatelange.github.io/hugo-PaperMod/tags/interrupt/">Interrupt</a></li>
      <li><a href="https://adityatelange.github.io/hugo-PaperMod/tags/gpio/">Gpio</a></li>
      <li><a href="https://adityatelange.github.io/hugo-PaperMod/tags/userspace/">Userspace</a></li>
      <li><a href="https://adityatelange.github.io/hugo-PaperMod/tags/select/">Select</a></li>
      <li><a href="https://adityatelange.github.io/hugo-PaperMod/tags/poll/">Poll</a></li>
    </ul>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç† on x"
            href="https://x.com/intent/tweet/?text=%e5%a6%82%e4%bd%95%e5%9c%a8%20Linux%20%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e4%b8%ad%e8%bf%9b%e8%a1%8c%e7%b1%bb%e4%bc%bc%20GPIO%20%e4%b8%ad%e6%96%ad%e7%9a%84%e5%a4%84%e7%90%86&amp;url=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fhow_to_handle_gpio_interrupt_like_handling_in_linux_userspace%2f&amp;hashtags=linux%2cinterrupt%2cgpio%2cuserspace%2cselect%2cpoll">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç† on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fhow_to_handle_gpio_interrupt_like_handling_in_linux_userspace%2f&amp;title=%e5%a6%82%e4%bd%95%e5%9c%a8%20Linux%20%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e4%b8%ad%e8%bf%9b%e8%a1%8c%e7%b1%bb%e4%bc%bc%20GPIO%20%e4%b8%ad%e6%96%ad%e7%9a%84%e5%a4%84%e7%90%86&amp;summary=%e5%a6%82%e4%bd%95%e5%9c%a8%20Linux%20%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e4%b8%ad%e8%bf%9b%e8%a1%8c%e7%b1%bb%e4%bc%bc%20GPIO%20%e4%b8%ad%e6%96%ad%e7%9a%84%e5%a4%84%e7%90%86&amp;source=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fhow_to_handle_gpio_interrupt_like_handling_in_linux_userspace%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç† on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fhow_to_handle_gpio_interrupt_like_handling_in_linux_userspace%2f&title=%e5%a6%82%e4%bd%95%e5%9c%a8%20Linux%20%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e4%b8%ad%e8%bf%9b%e8%a1%8c%e7%b1%bb%e4%bc%bc%20GPIO%20%e4%b8%ad%e6%96%ad%e7%9a%84%e5%a4%84%e7%90%86">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç† on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fhow_to_handle_gpio_interrupt_like_handling_in_linux_userspace%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç† on whatsapp"
            href="https://api.whatsapp.com/send?text=%e5%a6%82%e4%bd%95%e5%9c%a8%20Linux%20%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e4%b8%ad%e8%bf%9b%e8%a1%8c%e7%b1%bb%e4%bc%bc%20GPIO%20%e4%b8%ad%e6%96%ad%e7%9a%84%e5%a4%84%e7%90%86%20-%20https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fhow_to_handle_gpio_interrupt_like_handling_in_linux_userspace%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç† on telegram"
            href="https://telegram.me/share/url?text=%e5%a6%82%e4%bd%95%e5%9c%a8%20Linux%20%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e4%b8%ad%e8%bf%9b%e8%a1%8c%e7%b1%bb%e4%bc%bc%20GPIO%20%e4%b8%ad%e6%96%ad%e7%9a%84%e5%a4%84%e7%90%86&amp;url=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fhow_to_handle_gpio_interrupt_like_handling_in_linux_userspace%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share å¦‚ä½•åœ¨ Linux ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œç±»ä¼¼ GPIO ä¸­æ–­çš„å¤„ç† on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=%e5%a6%82%e4%bd%95%e5%9c%a8%20Linux%20%e7%94%a8%e6%88%b7%e7%a9%ba%e9%97%b4%e4%b8%ad%e8%bf%9b%e8%a1%8c%e7%b1%bb%e4%bc%bc%20GPIO%20%e4%b8%ad%e6%96%ad%e7%9a%84%e5%a4%84%e7%90%86&u=https%3a%2f%2fadityatelange.github.io%2fhugo-PaperMod%2fpost%2fhow_to_handle_gpio_interrupt_like_handling_in_linux_userspace%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>Â© <a href="https://github.com/adityatelange/hugo-PaperMod/graphs/contributors">PaperMod Contributors</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
