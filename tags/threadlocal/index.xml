<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ThreadLocal on Luyangã®Blog</title>
    <link>/tags/threadlocal/</link>
    <description>Recent content in ThreadLocal on Luyangã®Blog</description>
    <generator>Hugo</generator>
    <language>en-US</language>
    <lastBuildDate>Tue, 24 Jun 2025 02:30:00 +0800</lastBuildDate>
    <atom:link href="/tags/threadlocal/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ğŸ“˜ThreadLocal å…¨é¢è§£æ</title>
      <link>/posts/-threadlocal-%E5%85%A8%E9%9D%A2%E8%A7%A3%E6%9E%90/</link>
      <pubDate>Tue, 24 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/-threadlocal-%E5%85%A8%E9%9D%A2%E8%A7%A3%E6%9E%90/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;The beauty of open source is that it is technically borderless. &amp;mdash; &lt;a href=&#34;https://www.reddit.com/user/AlterTableUsernames/&#34;&gt;u/AlterTableUsernames&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;threadlocal-å…¨é¢è§£æ&#34;&gt;ThreadLocal å…¨é¢è§£æ&lt;/h2&gt;&#xA;&lt;p&gt;åœ¨å¤šçº¿ç¨‹å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨æ˜¯å¼€å‘è€…å¿…é¡»é¢å¯¹çš„æ ¸å¿ƒæŒ‘æˆ˜ä¹‹ä¸€ã€‚&lt;code&gt;ThreadLocal&lt;/code&gt; ä½œä¸º Java æä¾›çš„ä¸€ç§ç‹¬ç‰¹çš„çº¿ç¨‹åŒæ­¥è§£å†³æ–¹æ¡ˆï¼Œå®ƒå¦è¾Ÿè¹Šå¾„ï¼Œé€šè¿‡ä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›å˜é‡çš„ç‹¬ç«‹å‰¯æœ¬ï¼Œå·§å¦™åœ°é¿å…äº†å¤šçº¿ç¨‹é—´çš„æ•°æ®å…±äº«å’Œç«äº‰ï¼Œä»è€Œå®ç°äº†çº¿ç¨‹å®‰å…¨ã€‚æœ¬æ–‡å°†ä» &lt;code&gt;ThreadLocal&lt;/code&gt; çš„åŸºæœ¬æ¦‚å¿µå…¥æ‰‹ï¼Œæ·±å…¥å‰–æå…¶æºç å®ç°ï¼Œæ¢è®¨å…¶åœ¨ C++ ä¸­çš„å¯¹åº”æ–¹æ¡ˆï¼Œå¹¶ç»“åˆå¸¸è§çš„é¢è¯•é¢˜ï¼Œä¸ºæ‚¨å…¨æ–¹ä½æ­ç¤º &lt;code&gt;ThreadLocal&lt;/code&gt; çš„å¥¥ç§˜ï¼ŒåŒ…æ‹¬å…¶ç²¾å¦™çš„å¼±å¼•ç”¨è®¾è®¡ä»¥åŠæ½œåœ¨çš„å†…å­˜æ³„æ¼é£é™©ã€‚&lt;/p&gt;&#xA;&lt;h3 id=&#34;threadlocal-ç®€ä»‹&#34;&gt;ThreadLocal ç®€ä»‹&lt;/h3&gt;&#xA;&lt;p&gt;&lt;code&gt;ThreadLocal&lt;/code&gt;ï¼Œé¡¾åæ€ä¹‰ï¼Œå³â€œçº¿ç¨‹å±€éƒ¨å˜é‡â€ã€‚å®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå˜é‡çš„æœºåˆ¶ï¼Œè¯¥å˜é‡å¯¹äºè®¿é—®å®ƒçš„æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰å…¶è‡ªå·±ç‹¬ç«‹çš„ã€åˆå§‹åŒ–çš„å‰¯æœ¬ã€‚æ¢è¨€ä¹‹ï¼Œå¦‚æœæ‚¨åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ª &lt;code&gt;ThreadLocal&lt;/code&gt; å˜é‡ï¼Œé‚£ä¹ˆåœ¨å…¶ä»–ä»»ä½•çº¿ç¨‹ä¸­ï¼Œéƒ½æ— æ³•ç›´æ¥è®¿é—®ä¸»çº¿ç¨‹ä¸­è¯¥å˜é‡çš„å€¼ï¼Œè€Œæ˜¯ä¼šæ‹¥æœ‰å¹¶æ“ä½œå±äºè‡ªå·±çº¿ç¨‹çš„é‚£ä¸ªå˜é‡çš„å‰¯æœ¬ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™ç§â€œç©ºé—´æ¢æ—¶é—´â€çš„ç­–ç•¥ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯éš”ç¦»è€ŒéåŒæ­¥ã€‚ä¸ä½¿ç”¨ &lt;code&gt;synchronized&lt;/code&gt; å…³é”®å­—æˆ– &lt;code&gt;Lock&lt;/code&gt; é”ç­‰åŒæ­¥æœºåˆ¶æ¥ä¿æŠ¤å…±äº«èµ„æºä¸åŒï¼Œ&lt;code&gt;ThreadLocal&lt;/code&gt; ç›´æ¥æœç»äº†èµ„æºå…±äº«çš„å¯èƒ½æ€§ï¼Œä»è€Œåœ¨æ ¹æœ¬ä¸Šé¿å…äº†çº¿ç¨‹é—´çš„ç«äº‰å’ŒåŒæ­¥å¼€é”€ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒåº”ç”¨åœºæ™¯ï¼š&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;æ¯ä¸ªçº¿ç¨‹éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„å®ä¾‹&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œ&lt;code&gt;SimpleDateFormat&lt;/code&gt; åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚é€šè¿‡ &lt;code&gt;ThreadLocal&lt;/code&gt; ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ›å»ºä¸€ä¸ª &lt;code&gt;SimpleDateFormat&lt;/code&gt; å®ä¾‹ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…å¹¶å‘é—®é¢˜ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;ç»´æŠ¤çº¿ç¨‹ä¸Šä¸‹æ–‡ä¿¡æ¯&lt;/strong&gt;ï¼šåœ¨å¤æ‚çš„ä¸šåŠ¡é€»è¾‘è°ƒç”¨é“¾ä¸­ï¼Œä¸ºäº†é¿å…åœ¨æ¯ä¸ªæ–¹æ³•å‚æ•°ä¸­éƒ½ä¼ é€’ç”¨æˆ·ä¿¡æ¯ã€äº‹åŠ¡ ID ç­‰ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;ThreadLocal&lt;/code&gt; åœ¨çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸå†…æŒæœ‰è¿™äº›ä¿¡æ¯ï¼Œæ–¹ä¾¿åœ¨è°ƒç”¨é“¾çš„ä»»ä½•ä½ç½®éšæ—¶è·å–ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;æ•°æ®åº“è¿æ¥ç®¡ç†&lt;/strong&gt;ï¼šåœ¨æœåŠ¡å±‚å’Œæ•°æ®è®¿é—®å±‚ä¹‹é—´ï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;ThreadLocal&lt;/code&gt; æ¥ç®¡ç†æ¯ä¸ªçº¿ç¨‹çš„æ•°æ®åº“è¿æ¥ï¼Œç¡®ä¿åŒä¸€ä¸ªçº¿ç¨‹ä¸­çš„å¤šæ¬¡æ•°æ®åº“æ“ä½œä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªè¿æ¥ï¼Œä»è€Œä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;æºç å®ç°è®²è§£&#34;&gt;æºç å®ç°è®²è§£&lt;/h3&gt;&#xA;&lt;p&gt;è¦çœŸæ­£ç†è§£ &lt;code&gt;ThreadLocal&lt;/code&gt; çš„å·¥ä½œåŸç†ï¼Œå¿…é¡»æ·±å…¥å…¶æºç ã€‚&lt;code&gt;ThreadLocal&lt;/code&gt; çš„æ ¸å¿ƒåœ¨äºå…¶å†…éƒ¨ç±» &lt;code&gt;ThreadLocalMap&lt;/code&gt;ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒå…³ç³»å›¾ï¼š&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://cdn-0.plantuml.com/plantuml/png/PLHHRzj637xNh-3qKhkBjVRL28m6Iu4LQxkXoR27PO0fcRQlFjq9TvHJRzX_7u-IaelwalZ8Zny_ygFzBZ86xbjRl89RWuU0BTmRjbHm-Wltnq2uknh_V_GDsYj0jyi3dx23BsIHZNVnQBf2kEvEna67GaTC8SBU1q1eBA43w_sfY0BGl0GnnXlcOEgUwKFZtPtvX-1D1h764Lyw0X_uw1F_pwa8RcbldD6-HQ4yeoxujm3u4VXPP5pdagkNyel_fl8oIrpVRqh0cDUDl0VYnL88zH7bSKRRamGaUFPcf_50hJ_JOWf9YmwR4nu8ogzunigYEvHAE2dF9Ma2O0MCjHNgzux3vQ-_9IX4KqcfqHBe6vFRoVjFmjCNsbCWrz1rnhWPEYLTezRVwg_KiF8zJN-BZ8ghAlWZKbZ5ZXgpDmti92FH19Njvsv7FOUR67rZXc12t4n67362TmIpXO_Pycq9hrShADzKbNoShM0DZNUCHYddoIa5RM_PT9Q65O7NkM8nWpzrUbjLhyi1cpK0T80XeDJlLRyR8AyYdEW2HW3mOhd07Z3N1CB2A9bYrB5QRRHhZbahso8nmHFLSjPG3HfQtd7mxW0lklAH01lkqQehuy1ZrwcfEhaUgHOp6kquqyuKX3J2e-6ZjcZw85WUOMgouJZtCIUfgis4NaCVQG9N8zNmMYpdHT_RxZjHmvGkH-_jivU7IdZ_hRFefZjp4eTW3aSMsuRz5G3NzURNjEMCTZavcE-zklwftXGWxLFIMlyOTVAiRbnkMdjD0ZrWgF50q7Xh9KwoapqO5jES1oixfW1Xujz90Tb8ZqTvNq4Nw4oEZJle5sBuFTj3IwqNuwn8gmgI4TDGusYbZFAxvrI55ZuDo8-2_259Vt0VzZF1prS89dwlzahXUj1EFmv7KrFZMugmTRsrs-h1_U8VHMiOu5izeYqiqatf8YCRQo7gKTbBDZ3KbsVQwaaVgpwfr1Mjh3aBT67DYP8EdFATztQfBc-dtyvjAdAUGKQpel_12Lya86bWQBpMf3eDbPxo2PkcRtkBJCgLZJ2wEU2KjYRO1r9YAnAID_gzpaqf0QCk_RCQCwoigfv3xyIrlhN_0m00&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ¯ä¸ª &lt;code&gt;Thread&lt;/code&gt; å¯¹è±¡å†…éƒ¨éƒ½æœ‰ä¸€ä¸ª &lt;code&gt;threadLocals&lt;/code&gt; æˆå‘˜å˜é‡ï¼Œå…¶ç±»å‹å°±æ˜¯ &lt;code&gt;ThreadLocal.ThreadLocalMap&lt;/code&gt;ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ&lt;code&gt;ThreadLocalMap&lt;/code&gt; å®é™…ä¸Šæ˜¯ &lt;code&gt;Thread&lt;/code&gt; çš„ä¸€ä¸ªå±æ€§ï¼Œè€Œä¸æ˜¯ &lt;code&gt;ThreadLocal&lt;/code&gt; çš„ã€‚å½“è°ƒç”¨ &lt;code&gt;ThreadLocal&lt;/code&gt; çš„ &lt;code&gt;set(T value)&lt;/code&gt; æˆ– &lt;code&gt;get()&lt;/code&gt; æ–¹æ³•æ—¶ï¼Œ&lt;code&gt;ThreadLocal&lt;/code&gt; ä¼šé¦–å…ˆè·å–å½“å‰çº¿ç¨‹çš„ &lt;code&gt;ThreadLocalMap&lt;/code&gt;ï¼Œç„¶åä»¥ &lt;code&gt;ThreadLocal&lt;/code&gt; å®ä¾‹è‡ªèº«ä½œä¸º keyï¼Œè¿›è¡Œå€¼çš„å­˜å–ã€‚&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
