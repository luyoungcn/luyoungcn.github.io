<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>SPI on LuyangのBlog</title>
    <link>https://luyoungcn.github.io/tags/spi/</link>
    <description>Recent content in SPI on LuyangのBlog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Thu, 01 Jan 1970 00:00:00 +0800</lastBuildDate><atom:link href="https://luyoungcn.github.io/tags/spi/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ADI GMSL2 SERDES SPI</title>
      <link>https://luyoungcn.github.io/posts/adi_gmsl2_serdes_spi/</link>
      <pubDate>Thu, 01 Jan 1970 00:00:00 +0800</pubDate>
      
      <guid>https://luyoungcn.github.io/posts/adi_gmsl2_serdes_spi/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/user-guides/gmsl2-general-user-guide.pdf&#34;&gt;https://www.analog.com/media/en/technical-documentation/user-guides/gmsl2-general-user-guide.pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/data-sheets/max96752.pdf&#34;&gt;https://www.analog.com/media/en/technical-documentation/data-sheets/max96752.pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/data-sheets/max9295d.pdf&#34;&gt;https://www.analog.com/media/en/technical-documentation/data-sheets/max9295d.pdf&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;gmsl2-general-user-guide&#34;&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/user-guides/gmsl2-general-user-guide.pdf&#34;&gt;GMSL2 General User Guide&lt;/a&gt;&lt;/h1&gt;
&lt;h2 id=&#34;key-features&#34;&gt;Key Features&lt;/h2&gt;
&lt;p&gt;• Four-wire main (connects to remote peripheral) or four-wire subordinate (connects to µC/SoC).&lt;/p&gt;
&lt;p&gt;• Remote-side SPI bus supports SPI modes 0 or 3; local-side SPI bus supports SPI mode 0.&lt;/p&gt;
&lt;p&gt;• Device filtering on (multiple SPI interfaces with different SPI IDs) or off (point-to-point SPI
interface).&lt;/p&gt;
&lt;p&gt;• Subordinate Select active low or high.&lt;/p&gt;
&lt;p&gt;• 600kHz to 25MHz or 50MHz SPI clock (depending on device).&lt;/p&gt;
&lt;p&gt;• MSB first (for control commands).&lt;/p&gt;
&lt;p&gt;• Pin or I2C control of RO and BNE input/output.&lt;/p&gt;
&lt;h2 id=&#34;18serial-peripheral-interface&#34;&gt;18.Serial Peripheral Interface&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_1.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;18331-spi-burst-write&#34;&gt;18.3.3.1 SPI Burst Write&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Set RO.&lt;/li&gt;
&lt;li&gt;Send 0xA0 (Set SPI Target = 0, optional if only one device).&lt;/li&gt;
&lt;li&gt;Send 0xA4/A5 (Assert SS1/SS2).&lt;/li&gt;
&lt;li&gt;Clear RO.&lt;/li&gt;
&lt;li&gt;Send Cmd Byte (Read/Write and Address MS bit).&lt;/li&gt;
&lt;li&gt;Send Addrs Byte.&lt;/li&gt;
&lt;li&gt;Send Write Byte.&lt;/li&gt;
&lt;li&gt;Set RO.&lt;/li&gt;
&lt;li&gt;Wait for BNE = 1.&lt;/li&gt;
&lt;li&gt;Send 0xA6/Read Byte (Discard).&lt;/li&gt;
&lt;li&gt;Clear RO.&lt;/li&gt;
&lt;li&gt;Repeat 7 - 11 until all data is written.&lt;/li&gt;
&lt;li&gt;Set RO.&lt;/li&gt;
&lt;li&gt;Wait for BNE = 1.&lt;/li&gt;
&lt;li&gt;Send 0xA6/Read Byte (Discard) (Clear SS).&lt;/li&gt;
&lt;li&gt;Send 0xA6/Read Byte (Discard) (Clear SS).&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;18332-spi-burst-read&#34;&gt;18.3.3.2 SPI Burst Read&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Set RO.&lt;/li&gt;
&lt;li&gt;Send 0xA0 (Set SPI Target = 0, optional if only one device).&lt;/li&gt;
&lt;li&gt;Send 0xA4/A5 (Assert SS1/SS2).&lt;/li&gt;
&lt;li&gt;Clear RO.&lt;/li&gt;
&lt;li&gt;Send Cmd Byte (Read/Write and Address MS bit).&lt;/li&gt;
&lt;li&gt;Send Addrs Byte.&lt;/li&gt;
&lt;li&gt;Set RO.&lt;/li&gt;
&lt;li&gt;Wait for BNE = 1.&lt;/li&gt;
&lt;li&gt;Send 0xA7/Read Byte (Read Data) (Discard first two reads, remaining are valid).&lt;/li&gt;
&lt;li&gt;Repeat Steps 8 - 9 until all but two bytes are read.&lt;/li&gt;
&lt;li&gt;Wait for BNE = 1.&lt;/li&gt;
&lt;li&gt;Send 0xA6/Read Byte (Valid Data) (Clear SS).&lt;/li&gt;
&lt;li&gt;Send 0xA6/Read Byte (Last Valid Data) (Clear SS).&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;硬件框图&#34;&gt;硬件框图&lt;/h1&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_2.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;spi-初始化&#34;&gt;SPI 初始化&lt;/h1&gt;
&lt;p&gt;详细寄存器描述可以参考官网提供的 DataSheet&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Index&lt;/th&gt;
          &lt;th&gt;Device&lt;/th&gt;
          &lt;th&gt;Reg&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
          &lt;th&gt;Desc&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;MAX9295D&lt;/td&gt;
          &lt;td&gt;0x173&lt;/td&gt;
          &lt;td&gt;0xFA&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;2&lt;/td&gt;
          &lt;td&gt;MAX9295D&lt;/td&gt;
          &lt;td&gt;0x174&lt;/td&gt;
          &lt;td&gt;0xFA&lt;/td&gt;
          &lt;td&gt;SCK 600KHz&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;3&lt;/td&gt;
          &lt;td&gt;MAX9295D&lt;/td&gt;
          &lt;td&gt;0x175&lt;/td&gt;
          &lt;td&gt;0xFA&lt;/td&gt;
          &lt;td&gt;SCK 600KHz&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;4&lt;/td&gt;
          &lt;td&gt;MAX9295D&lt;/td&gt;
          &lt;td&gt;0x176&lt;/td&gt;
          &lt;td&gt;0x0C&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;5&lt;/td&gt;
          &lt;td&gt;MAX96752&lt;/td&gt;
          &lt;td&gt;0x4E6&lt;/td&gt;
          &lt;td&gt;0x03&lt;/td&gt;
          &lt;td&gt;0x4E6 0x4F6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;6&lt;/td&gt;
          &lt;td&gt;MAX96752&lt;/td&gt;
          &lt;td&gt;0x4E9&lt;/td&gt;
          &lt;td&gt;0x00&lt;/td&gt;
          &lt;td&gt;0x4E9 0x4F9&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;7&lt;/td&gt;
          &lt;td&gt;MAX9295D&lt;/td&gt;
          &lt;td&gt;0x172&lt;/td&gt;
          &lt;td&gt;0x00&lt;/td&gt;
          &lt;td&gt;#SPI mode 0&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;8&lt;/td&gt;
          &lt;td&gt;MAX96752&lt;/td&gt;
          &lt;td&gt;0x4E0&lt;/td&gt;
          &lt;td&gt;0x09&lt;/td&gt;
          &lt;td&gt;0x4E0 0x4F0&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;9&lt;/td&gt;
          &lt;td&gt;MAX9295D&lt;/td&gt;
          &lt;td&gt;0X170&lt;/td&gt;
          &lt;td&gt;0X0B&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;spi-mode-0-的波形&#34;&gt;SPI mode 0 的波形&lt;/h1&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_1.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_2.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_3.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_4.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;spi-mode-3-配置&#34;&gt;SPI mode 3 配置&lt;/h2&gt;
&lt;h3 id=&#34;0x172-设置-0x0c-ok&#34;&gt;0x172 设置 0x0C OK&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_2_1.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_2_2.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_2_3.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;错误的配置0x172-设置-0x04&#34;&gt;错误的配置：0x172 设置 0x04&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_3_1.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_3_1.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_3_1.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
