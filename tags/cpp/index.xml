<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Cpp on Luyangã®Blog</title>
    <link>/tags/cpp/</link>
    <description>Recent content in Cpp on Luyangã®Blog</description>
    <generator>Hugo</generator>
    <language>en-US</language>
    <lastBuildDate>Fri, 06 Jun 2025 02:30:00 +0800</lastBuildDate>
    <atom:link href="/tags/cpp/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ğŸ“Œæ·±å…¥ C&#43;&#43; å•ä¾‹æ¨¡å¼ï¼šåŸç†ã€å®ç°æ–¹å¼å¯¹æ¯”ä¸ shared_ptr æ¶æ„è®¾è®¡</title>
      <link>/posts/%E6%B7%B1%E5%85%A5-c&#43;&#43;-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94%E4%B8%8E-shared_ptr-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/</link>
      <pubDate>Fri, 06 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/%E6%B7%B1%E5%85%A5-c&#43;&#43;-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94%E4%B8%8E-shared_ptr-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/</guid>
      <description>&lt;h1 id=&#34;æ·±å…¥-c-å•ä¾‹æ¨¡å¼åŸç†å®ç°æ–¹å¼å¯¹æ¯”ä¸-shared_ptr-æ¶æ„è®¾è®¡&#34;&gt;ğŸ“Œæ·±å…¥ C++ å•ä¾‹æ¨¡å¼ï¼šåŸç†ã€å®ç°æ–¹å¼å¯¹æ¯”ä¸ shared_ptr æ¶æ„è®¾è®¡&lt;/h1&gt;&#xA;&lt;h2 id=&#34;1-ä»€ä¹ˆæ˜¯å•ä¾‹åŸºæœ¬è¯­ä¹‰ä¸ä½¿ç”¨åœºæ™¯&#34;&gt;1ï¸âƒ£ ä»€ä¹ˆæ˜¯å•ä¾‹ï¼ŸåŸºæœ¬è¯­ä¹‰ä¸ä½¿ç”¨åœºæ™¯&lt;/h2&gt;&#xA;&lt;p&gt;å•ä¾‹ï¼ˆ[[Singleton]]ï¼‰æ˜¯å¯¹è±¡åˆ›å»ºæ¨¡å¼ä¸­æœ€å¸¸è§çš„ä¸€ç§ï¼Œå…¶ç›®æ ‡æ˜¯ç¡®ä¿ç±»åœ¨ç³»ç»Ÿä¸­&lt;strong&gt;åªæœ‰ä¸€ä¸ªå®ä¾‹&lt;/strong&gt;ï¼Œå¹¶æä¾›å…¨å±€è®¿é—®å…¥å£ã€‚&lt;/p&gt;&#xA;&lt;h3 id=&#34;-å¸¸è§ä½¿ç”¨åœºæ™¯&#34;&gt;âœ… å¸¸è§ä½¿ç”¨åœºæ™¯ï¼š&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;é…ç½®ä¸­å¿ƒï¼ˆConfigManagerï¼‰&lt;/li&gt;&#xA;&lt;li&gt;æ—¥å¿—ç³»ç»Ÿï¼ˆLoggerï¼‰&lt;/li&gt;&#xA;&lt;li&gt;èµ„æºæ± ï¼ˆå¦‚å†…å­˜æ± ã€çº¿ç¨‹æ± ï¼‰&lt;/li&gt;&#xA;&lt;li&gt;è°ƒåº¦å™¨ã€ä¼šè¯ç®¡ç†å™¨&lt;/li&gt;&#xA;&lt;li&gt;æ¡†æ¶æ³¨å†Œè¡¨ã€æ’ä»¶ç³»ç»Ÿ&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2-å•ä¾‹çš„äº”ç§å¸¸è§å®ç°æ–¹å¼&#34;&gt;2ï¸âƒ£ å•ä¾‹çš„äº”ç§å¸¸è§å®ç°æ–¹å¼&lt;/h2&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;æ¨èä½¿ç”¨æ–¹å¼ï¼š&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;æ‡’æ±‰å¼ + çº¿ç¨‹å®‰å…¨ï¼ˆC++11 æ ‡å‡†ï¼‰å±€éƒ¨é™æ€å˜é‡ï¼ˆMeyers Singletonï¼‰&amp;mdash; ã€æ¨èä½¿ç”¨ã€‘&lt;/li&gt;&#xA;&lt;li&gt;shared_ptr å•ä¾‹ï¼ˆæ›´çµæ´»ï¼‰&lt;/li&gt;&#xA;&lt;/ol&gt;&lt;/blockquote&gt;&#xA;&lt;h3 id=&#34;1-é¥¿æ±‰å¼å•ä¾‹early-instantiation&#34;&gt;ğŸƒ1. é¥¿æ±‰å¼å•ä¾‹ï¼ˆEarly Instantiationï¼‰&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Singleton&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; instance() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; inst;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton() {}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton inst;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Singleton Singleton&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;inst;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;âœ… ç®€å•æ˜“æ‡‚ï¼Œçº¿ç¨‹å®‰å…¨ï¼ˆç”± C++ é™æ€å¯¹è±¡åˆå§‹åŒ–ä¿éšœï¼‰&lt;/li&gt;&#xA;&lt;li&gt;âŒ èµ„æºå¯èƒ½æµªè´¹ï¼Œç¨‹åºå¯åŠ¨å°±æ„é€ å®ä¾‹&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;2-æ‡’æ±‰å¼lazy-initialization-éçº¿ç¨‹å®‰å…¨&#34;&gt;ğŸƒ2. æ‡’æ±‰å¼ï¼ˆLazy Initializationï¼‰+ éçº¿ç¨‹å®‰å…¨&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Singleton&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; getInstance() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;instance_)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            instance_ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Singleton;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; instance_;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton() {}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; instance_;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Singleton&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;instance_ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nullptr&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;âœ… ä»…åœ¨éœ€è¦æ—¶åˆ›å»ºå®ä¾‹&lt;/li&gt;&#xA;&lt;li&gt;âŒ éçº¿ç¨‹å®‰å…¨ï¼Œå¤šä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶æ„é€ å¤šä¸ªå®ä¾‹&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;3-æ‡’æ±‰å¼--çº¿ç¨‹å®‰å…¨c11-æ ‡å‡†å±€éƒ¨é™æ€å˜é‡meyers-singleton-æ¨èä½¿ç”¨&#34;&gt;ğŸƒ3. æ‡’æ±‰å¼ + çº¿ç¨‹å®‰å…¨ï¼ˆC++11 æ ‡å‡†ï¼‰å±€éƒ¨é™æ€å˜é‡ï¼ˆMeyers Singletonï¼‰&amp;mdash; ã€æ¨èä½¿ç”¨ã€‘&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Singleton&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; instance() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton inst;  &lt;span style=&#34;color:#75715e&#34;&gt;// C++11 ä¿è¯çº¿ç¨‹å®‰å…¨&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; inst;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton(&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;operator&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;âœ… æ¨èä½¿ç”¨ï¼šçº¿ç¨‹å®‰å…¨ã€æ‡’åŠ è½½ã€æ— é”å¼€é”€&lt;/li&gt;&#xA;&lt;li&gt;âœ… ææ„è‡ªåŠ¨ç®¡ç†ï¼Œä¾èµ– C++ é™æ€å±€éƒ¨å˜é‡ç‰¹æ€§&lt;/li&gt;&#xA;&lt;li&gt;â— ç¦æ­¢æ‹·è´æ„é€ ã€èµ‹å€¼è¿ç®—ï¼Œé˜²æ­¢å®ä¾‹å¤åˆ¶&lt;/li&gt;&#xA;&lt;li&gt;âœ… æœ€ç®€æ´ã€å®‰å…¨ã€é«˜æ•ˆçš„æ–¹å¼ï¼ˆé»˜è®¤æ¨èï¼‰&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;åé¢ä¼šæœ‰è¿™ç§æ–¹å¼çš„è¯­æ³•è¯­ä¹‰ä¸åº•å±‚æºç è§£æ&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“Œ C&#43;&#43;ç±»æˆå‘˜å‡½æ•° static ä¸ const çš„å£°æ˜ä¸å®šä¹‰è§„åˆ™è§£æ</title>
      <link>/posts/-c&#43;&#43;-%E7%B1%BB%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0-static-%E4%B8%8E-const-%E7%9A%84%E5%A3%B0%E6%98%8E%E4%B8%8E%E5%AE%9A%E4%B9%89%E8%A7%84%E5%88%99%E8%A7%A3%E6%9E%90/</link>
      <pubDate>Wed, 04 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/-c&#43;&#43;-%E7%B1%BB%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0-static-%E4%B8%8E-const-%E7%9A%84%E5%A3%B0%E6%98%8E%E4%B8%8E%E5%AE%9A%E4%B9%89%E8%A7%84%E5%88%99%E8%A7%A3%E6%9E%90/</guid>
      <description>&lt;h1 id=&#34;-cç±»æˆå‘˜å‡½æ•°static-ä¸-const-çš„å£°æ˜ä¸å®šä¹‰è§„åˆ™è§£æ&#34;&gt;ğŸ“Œ C++ç±»æˆå‘˜å‡½æ•°ï¼š&lt;code&gt;static&lt;/code&gt; ä¸ &lt;code&gt;const&lt;/code&gt; çš„å£°æ˜ä¸å®šä¹‰è§„åˆ™è§£æ&lt;/h1&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;ä¸ºä»€ä¹ˆå¤´æ–‡ä»¶å£°æ˜è¦å†™ &lt;code&gt;static/const&lt;/code&gt;ï¼Œè€Œå®ç°æ—¶ &lt;code&gt;static&lt;/code&gt; è¦çœç•¥ã€&lt;code&gt;const&lt;/code&gt; å¿…é¡»ä¿ç•™ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;-æ ¸å¿ƒè§„åˆ™å¯¹æ¯”è¡¨&#34;&gt;ğŸ” æ ¸å¿ƒè§„åˆ™å¯¹æ¯”è¡¨&lt;/h2&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;&lt;strong&gt;å…³é”®å­—&lt;/strong&gt;&lt;/th&gt;&#xA;          &lt;th&gt;&lt;strong&gt;å¤´æ–‡ä»¶ï¼ˆ.hï¼‰å£°æ˜&lt;/strong&gt;&lt;/th&gt;&#xA;          &lt;th&gt;&lt;strong&gt;æºæ–‡ä»¶ï¼ˆ.cppï¼‰å®šä¹‰&lt;/strong&gt;&lt;/th&gt;&#xA;          &lt;th&gt;&lt;strong&gt;åº•å±‚åŸå› &lt;/strong&gt;&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;&lt;code&gt;static&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;å¿…é¡»æ˜¾å¼å£°æ˜ï¼š&lt;code&gt;static void func();&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;strong&gt;ç¦æ­¢é‡å¤&lt;/strong&gt;ï¼šç›´æ¥å†™ &lt;code&gt;void Class::func()&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;code&gt;static&lt;/code&gt; æ ‡è¯†å‡½æ•°å½’å±ç±»è€Œéå¯¹è±¡ï¼›å®šä¹‰æ—¶ &lt;code&gt;ClassName::&lt;/code&gt; å·²éšå«ä½œç”¨åŸŸï¼Œå†å†™ &lt;code&gt;static&lt;/code&gt; ä¼šè¢«è§£é‡Šä¸ºæ–‡ä»¶ä½œç”¨åŸŸå‡½æ•°ï¼Œç ´åå°è£…æ€§ã€‚&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;&lt;code&gt;const&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;å¿…é¡»æ˜¾å¼å£°æ˜ï¼š&lt;code&gt;int get() const;&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;strong&gt;å¿…é¡»ä¿ç•™&lt;/strong&gt;ï¼š&lt;code&gt;int Class::get() const&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;code&gt;const&lt;/code&gt; æ˜¯å‡½æ•°ç­¾åçš„ä¸€éƒ¨åˆ†ï¼Œå£°æ˜ä¸å®šä¹‰å¿…é¡»ä¸¥æ ¼ä¸€è‡´ï¼Œå¦åˆ™ç¼–è¯‘å™¨è§†ä¸ºä¸åŒå‡½æ•°ï¼Œå¯¼è‡´é“¾æ¥é”™è¯¯ã€‚&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;-ä¸€static-å…³é”®å­—çš„å£°æ˜ä¸å®šä¹‰åˆ†ç¦»&#34;&gt;âš™ï¸ ä¸€ã€&lt;code&gt;static&lt;/code&gt; å…³é”®å­—çš„å£°æ˜ä¸å®šä¹‰åˆ†ç¦»&lt;/h2&gt;&#xA;&lt;h3 id=&#34;1-å£°æ˜æ—¶éœ€&#34;&gt;1. &lt;strong&gt;å£°æ˜æ—¶éœ€ &lt;code&gt;static&lt;/code&gt;&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;p&gt;åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œ&lt;code&gt;static&lt;/code&gt; æ˜ç¡®æ ‡è¯†è¯¥å‡½æ•°æ˜¯&lt;strong&gt;ç±»çº§åˆ«å…±äº«&lt;/strong&gt;çš„ï¼Œä¸ä¾èµ–å¯¹è±¡å®ä¾‹ï¼ˆæ—  &lt;code&gt;this&lt;/code&gt; æŒ‡é’ˆï¼‰ï¼š&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// MyClass.h&#xA;class MyClass {&#xA;public:&#xA;    static void sharedFunc(); // âœ… å£°æ˜ä¸ºé™æ€&#xA;};&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;2-å®šä¹‰æ—¶ç¦æ­¢&#34;&gt;2. &lt;strong&gt;å®šä¹‰æ—¶ç¦æ­¢ &lt;code&gt;static&lt;/code&gt;&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;p&gt;åœ¨æºæ–‡ä»¶ä¸­ï¼Œ&lt;code&gt;ClassName::&lt;/code&gt; å·²æŒ‡æ˜å‡½æ•°å½’å±ç±»ä½œç”¨åŸŸã€‚è‹¥æ·»åŠ  &lt;code&gt;static&lt;/code&gt;ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ä¼šè¢«ç¼–è¯‘å™¨è§£é‡Šä¸º&lt;strong&gt;æ–‡ä»¶ä½œç”¨åŸŸçš„é™æ€å‡½æ•°&lt;/strong&gt;ï¼ˆä»…å½“å‰ &lt;code&gt;.cpp&lt;/code&gt; å¯è§ï¼‰ï¼›&lt;/li&gt;&#xA;&lt;li&gt;å¯¼è‡´æ— æ³•é€šè¿‡ &lt;code&gt;MyClass::sharedFunc()&lt;/code&gt; å…¨å±€è®¿é—®ï¼Œç ´åå°è£…æ€§ã€‚&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;âœ… æ­£ç¡®å†™æ³•ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“Œå°å¯¹è±¡ä¼˜åŒ–ï¼ˆSmall Object Optimizationï¼‰æ·±åº¦è§£æï¼šC&#43;&#43;å®¹å™¨çš„æ€§èƒ½åˆ©å™¨</title>
      <link>/posts/%E5%B0%8F%E5%AF%B9%E8%B1%A1%E4%BC%98%E5%8C%96small-object-optimization%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90c&#43;&#43;%E5%AE%B9%E5%99%A8%E7%9A%84%E6%80%A7%E8%83%BD%E5%88%A9%E5%99%A8/</link>
      <pubDate>Wed, 04 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/%E5%B0%8F%E5%AF%B9%E8%B1%A1%E4%BC%98%E5%8C%96small-object-optimization%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90c&#43;&#43;%E5%AE%B9%E5%99%A8%E7%9A%84%E6%80%A7%E8%83%BD%E5%88%A9%E5%99%A8/</guid>
      <description>&lt;h1 id=&#34;å°å¯¹è±¡ä¼˜åŒ–small-object-optimizationæ·±åº¦è§£æcå®¹å™¨çš„æ€§èƒ½åˆ©å™¨&#34;&gt;å°å¯¹è±¡ä¼˜åŒ–ï¼ˆSmall Object Optimizationï¼‰æ·±åº¦è§£æï¼šC++å®¹å™¨çš„æ€§èƒ½åˆ©å™¨&lt;/h1&gt;&#xA;&lt;h2 id=&#34;å¼•è¨€&#34;&gt;å¼•è¨€&lt;/h2&gt;&#xA;&lt;p&gt;åœ¨ç°ä»£C++å¼€å‘ä¸­ï¼Œ&lt;code&gt;std::string&lt;/code&gt;å’Œ&lt;code&gt;std::vector&lt;/code&gt;ç­‰æ ‡å‡†å®¹å™¨çš„é«˜æ•ˆæ€§å¾€å¾€è¢«å¼€å‘è€…è§†ä¸ºç†æ‰€å½“ç„¶ã€‚ç„¶è€Œï¼Œè¿™äº›å®¹å™¨åœ¨å¤„ç†å°å¯¹è±¡æ—¶çš„å“è¶Šæ€§èƒ½èƒŒåï¼Œéšè—ç€ä¸€é¡¹é‡è¦çš„ä¼˜åŒ–æŠ€æœ¯â€”â€”&lt;strong&gt;å°å¯¹è±¡ä¼˜åŒ–ï¼ˆSmall Object Optimization, SOOï¼‰&lt;/strong&gt;ã€‚å¯¹äºè¿½æ±‚é«˜æ€§èƒ½çš„C++å¼€å‘è€…è€Œè¨€ï¼Œç†è§£SOOçš„å·¥ä½œåŸç†ä¸ä»…æœ‰åŠ©äºç¼–å†™æ›´é«˜æ•ˆçš„ä»£ç ï¼Œæ›´èƒ½å¯å‘æˆ‘ä»¬åœ¨è®¾è®¡è‡ªå®šä¹‰å®¹å™¨æ—¶é‡‡ç”¨ç±»ä¼¼çš„ä¼˜åŒ–ç­–ç•¥ã€‚&lt;/p&gt;&#xA;&lt;h2 id=&#34;é—®é¢˜èƒŒæ™¯å°å¯¹è±¡çš„æ€§èƒ½å›°å¢ƒ&#34;&gt;é—®é¢˜èƒŒæ™¯ï¼šå°å¯¹è±¡çš„æ€§èƒ½å›°å¢ƒ&lt;/h2&gt;&#xA;&lt;h3 id=&#34;å †åˆ†é…çš„æ€§èƒ½å¼€é”€&#34;&gt;å †åˆ†é…çš„æ€§èƒ½å¼€é”€&lt;/h3&gt;&#xA;&lt;p&gt;å½“æˆ‘ä»¬ä½¿ç”¨&lt;code&gt;std::string&lt;/code&gt;æˆ–&lt;code&gt;std::vector&lt;/code&gt;å­˜å‚¨æ•°æ®æ—¶ï¼Œè¿™äº›å®¹å™¨é€šå¸¸éœ€è¦åŠ¨æ€åˆ†é…å†…å­˜æ¥å­˜å‚¨å®é™…æ•°æ®ã€‚å¯¹äºå¤§å‹å¯¹è±¡ï¼Œå †åˆ†é…çš„å¼€é”€ç›¸å¯¹äºæ•°æ®å¤„ç†æˆæœ¬è€Œè¨€æ˜¯å¯ä»¥æ¥å—çš„ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬é¢‘ç¹å¤„ç†å°å¯¹è±¡æ—¶ï¼Œæƒ…å†µå°±æˆªç„¶ä¸åŒäº†ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;åˆ†é…å™¨å¼€é”€&lt;/strong&gt;ï¼šæ¯æ¬¡è°ƒç”¨&lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;æˆ–&lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt;éƒ½æ¶‰åŠå¤æ‚çš„å†…å­˜ç®¡ç†ç®—æ³•ï¼ŒåŒ…æ‹¬å¯»æ‰¾åˆé€‚å¤§å°çš„å†…å­˜å—ã€ç»´æŠ¤ç©ºé—²åˆ—è¡¨ç­‰&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;å†…å­˜ç¢ç‰‡&lt;/strong&gt;ï¼šå¤§é‡å°å†…å­˜å—çš„åˆ†é…å’Œé‡Šæ”¾ä¼šå¯¼è‡´å †å†…å­˜ç¢ç‰‡åŒ–ï¼Œé™ä½å†…å­˜åˆ©ç”¨ç‡&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;ç¼“å­˜å±€éƒ¨æ€§å·®&lt;/strong&gt;ï¼šå †ä¸Šåˆ†é…çš„å°å¯¹è±¡åœ¨å†…å­˜ä¸­åˆ†å¸ƒæ•£ä¹±ï¼Œè®¿é—®æ—¶ç¼“å­˜å‘½ä¸­ç‡ä½&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆçš„å±€é™&#34;&gt;ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆçš„å±€é™&lt;/h3&gt;&#xA;&lt;p&gt;æ ˆä¸Šåˆ†é…è™½ç„¶é€Ÿåº¦æå¿«ï¼Œä½†å—é™äºç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ— æ³•æ»¡è¶³å®¹å™¨éœ€è¦åŠ¨æ€è°ƒæ•´å¤§å°çš„éœ€æ±‚ã€‚è€Œçº¯ç²¹çš„å †åˆ†é…è™½ç„¶çµæ´»ï¼Œä½†åœ¨å¤„ç†çŸ­å­—ç¬¦ä¸²ã€å°å®¹é‡å‘é‡ç­‰é«˜é¢‘åœºæ™¯æ—¶ï¼Œæ€§èƒ½å¼€é”€å˜å¾—ä¸å¯å¿½è§†ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒé—®é¢˜&lt;/strong&gt;ï¼šå¦‚ä½•ä¸ºéœ€è¦åŠ¨æ€å†…å­˜ç®¡ç†çš„å®¹å™¨ä¼˜åŒ–å°å¯¹è±¡çš„å­˜å‚¨æ€§èƒ½ï¼Ÿ&lt;/p&gt;&#xA;&lt;h2 id=&#34;sooæ ¸å¿ƒåŸç†æ™ºèƒ½çš„ç©ºé—´æ¢æ—¶é—´ç­–ç•¥&#34;&gt;SOOæ ¸å¿ƒåŸç†ï¼šæ™ºèƒ½çš„ç©ºé—´æ¢æ—¶é—´ç­–ç•¥&lt;/h2&gt;&#xA;&lt;h3 id=&#34;åŸºæœ¬æ€æƒ³&#34;&gt;åŸºæœ¬æ€æƒ³&lt;/h3&gt;&#xA;&lt;p&gt;&lt;strong&gt;å°å¯¹è±¡ä¼˜åŒ–çš„æ ¸å¿ƒç­–ç•¥&lt;/strong&gt;æ˜¯åœ¨å®¹å™¨å¯¹è±¡å†…éƒ¨é¢„ç•™ä¸€ä¸ª&lt;strong&gt;å›ºå®šå¤§å°çš„å†…éƒ¨ç¼“å†²åŒºï¼ˆInternal Bufferï¼‰&lt;/strong&gt;ã€‚è¿™ä¸ªç¼“å†²åŒºä½œä¸º&amp;quot;å¿«é€Ÿé€šé“&amp;quot;ï¼Œä¸“é—¨ç”¨äºå­˜å‚¨å°å¯¹è±¡çš„æ•°æ®ã€‚&lt;/p&gt;&#xA;&lt;h3 id=&#34;å¤§å°åˆ¤å®šé€»è¾‘&#34;&gt;å¤§å°åˆ¤å®šé€»è¾‘&lt;/h3&gt;&#xA;&lt;p&gt;SOOçš„å·¥ä½œæœºåˆ¶å¯ä»¥ç”¨ç®€å•çš„æ¡ä»¶åˆ¤æ–­æ¥æè¿°ï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (required_size &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; internal_buffer_size) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// ä½¿ç”¨å†…éƒ¨ç¼“å†²åŒºï¼Œæ— éœ€å †åˆ†é…&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    store_in_internal_buffer(data);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// é€€å›åˆ°ä¼ ç»Ÿçš„å †å†…å­˜åˆ†é…&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    allocate_on_heap(data);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;zero-overheadæŠ½è±¡&#34;&gt;Zero-OverheadæŠ½è±¡&lt;/h3&gt;&#xA;&lt;p&gt;SOOçš„ç²¾å¦™ä¹‹å¤„åœ¨äºå¯¹ä½¿ç”¨è€…å®Œå…¨é€æ˜ã€‚æ— è®ºåº•å±‚ä½¿ç”¨çš„æ˜¯å†…éƒ¨ç¼“å†²åŒºè¿˜æ˜¯å †å†…å­˜ï¼Œå®¹å™¨æä¾›çš„æ¥å£è¡Œä¸ºå®Œå…¨ä¸€è‡´ï¼Œè¿™ä½“ç°äº†C++ä¸­&amp;quot;Zero-Overhead&amp;quot;æŠ½è±¡çš„è®¾è®¡ç†å¿µã€‚&lt;/p&gt;&#xA;&lt;h2 id=&#34;å®ç°å‰–æä»¥stdstringä¸ºä¾‹&#34;&gt;å®ç°å‰–æï¼šä»¥std::stringä¸ºä¾‹&lt;/h2&gt;&#xA;&lt;h3 id=&#34;å…¸å‹æ•°æ®ç»“æ„è®¾è®¡&#34;&gt;å…¸å‹æ•°æ®ç»“æ„è®¾è®¡&lt;/h3&gt;&#xA;&lt;p&gt;ä¸€ä¸ªæ”¯æŒSOOçš„&lt;code&gt;std::string&lt;/code&gt;å†…éƒ¨ç»“æ„å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;optimized_string&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;constexpr&lt;/span&gt; size_t INTERNAL_BUFFER_SIZE &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;union&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// å¤§å¯¹è±¡æ¨¡å¼ï¼šæŒ‡å‘å †å†…å­˜&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; ptr;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            size_t size;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            size_t capacity;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } heap_data;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// å°å¯¹è±¡æ¨¡å¼ï¼šç›´æ¥å­˜å‚¨åœ¨å¯¹è±¡å†…éƒ¨&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; buffer[INTERNAL_BUFFER_SIZE &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]; &lt;span style=&#34;color:#75715e&#34;&gt;// +1 for null terminator&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; remaining_size; &lt;span style=&#34;color:#75715e&#34;&gt;// ç”¨äºæ ‡è¯†å½“å‰æ¨¡å¼å’Œå‰©ä½™ç©ºé—´&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        } stack_data;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    };&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; is_using_soo() &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// é€šè¿‡ç‰¹å®šä½æˆ–å€¼åˆ¤æ–­å½“å‰ä½¿ç”¨çš„å­˜å‚¨æ¨¡å¼&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; stack_data.remaining_size &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; INTERNAL_BUFFER_SIZE;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; is_using_soo() &lt;span style=&#34;color:#f92672&#34;&gt;?&lt;/span&gt; stack_data.buffer : heap_data.ptr;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    size_t &lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; is_using_soo() &lt;span style=&#34;color:#f92672&#34;&gt;?&lt;/span&gt; &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               (INTERNAL_BUFFER_SIZE &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; stack_data.remaining_size) &lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               heap_data.size;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;çŠ¶æ€åŒºåˆ†æœºåˆ¶&#34;&gt;çŠ¶æ€åŒºåˆ†æœºåˆ¶&lt;/h3&gt;&#xA;&lt;p&gt;åŒºåˆ†å½“å‰ä½¿ç”¨å†…éƒ¨ç¼“å†²åŒºè¿˜æ˜¯å †å†…å­˜æ˜¯SOOå®ç°çš„å…³é”®æŠ€æœ¯ç‚¹ã€‚å¸¸è§ç­–ç•¥åŒ…æ‹¬ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“Œæ·±å…¥åˆ†æ =delete ä¸ç§æœ‰åŒ–æ„é€ å’Œææ„å‡½æ•°çš„æœ¬è´¨åŒºåˆ«</title>
      <link>/posts/%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90-delete-%E4%B8%8E%E7%A7%81%E6%9C%89%E5%8C%96%E6%9E%84%E9%80%A0%E5%92%8C%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%8C%BA%E5%88%AB/</link>
      <pubDate>Wed, 04 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90-delete-%E4%B8%8E%E7%A7%81%E6%9C%89%E5%8C%96%E6%9E%84%E9%80%A0%E5%92%8C%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%8C%BA%E5%88%AB/</guid>
      <description>&lt;p&gt;[[c++]] [[delete]] [[æ„é€ å‡½æ•°]] [[ææ„å‡½æ•°]]&lt;/p&gt;&#xA;&lt;h2 id=&#34;æ·±å…¥åˆ†æ-delete-ä¸ç§æœ‰åŒ–æ„é€ å’Œææ„å‡½æ•°çš„æœ¬è´¨åŒºåˆ«&#34;&gt;æ·±å…¥åˆ†æï¼š= delete ä¸ç§æœ‰åŒ–æ„é€ å’Œææ„å‡½æ•°çš„æœ¬è´¨åŒºåˆ«&lt;/h2&gt;&#xA;&lt;p&gt;â€‹&lt;strong&gt;ç›´æ¥ç»“è®º&lt;/strong&gt;â€‹ï¼š&lt;br&gt;&#xA;ç»å¯¹ä¸èƒ½å°†æ„é€ å‡½æ•°å’Œææ„å‡½æ•°å†™ä¸º = delete è¿™ä¼šç›´æ¥ç ´åå•ä¾‹æ¨¡å¼çš„æ ¸å¿ƒåŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†æŠ€æœ¯åˆ†æï¼š&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;ä¸€è¯­æ³•å±‚é¢çš„æ ¹æœ¬å·®å¼‚&#34;&gt;ä¸€ã€è¯­æ³•å±‚é¢çš„æ ¹æœ¬å·®å¼‚&lt;/h3&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;æ–¹æ¡ˆ&lt;/th&gt;&#xA;          &lt;th&gt;å¯è®¿é—®æ€§&lt;/th&gt;&#xA;          &lt;th&gt;ç¼–è¯‘å™¨è¡Œä¸º&lt;/th&gt;&#xA;          &lt;th&gt;å¯¹å•ä¾‹æ¨¡å¼çš„å½±å“&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;â€‹&lt;strong&gt;ç§æœ‰æ„é€ å‡½æ•°&lt;/strong&gt;â€‹&lt;/td&gt;&#xA;          &lt;td&gt;ä»…ç±»å†…éƒ¨å¯è®¿é—®&lt;/td&gt;&#xA;          &lt;td&gt;å…è®¸ç±»å†…éƒ¨ä»£ç æ„é€ å¯¹è±¡&lt;/td&gt;&#xA;          &lt;td&gt;å®ç°å•ä¾‹çš„æ ¸å¿ƒæ‰‹æ®µ&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;code&gt;Singleton() = delete&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;å‡½æ•°è¢«å½»åº•åˆ é™¤&lt;/td&gt;&#xA;          &lt;td&gt;ä»»ä½•æ„é€ å°è¯•ç›´æ¥æŠ¥é”™&lt;/td&gt;&#xA;          &lt;td&gt;å®Œå…¨æ— æ³•åˆ›å»ºå¯¹è±¡&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;æ–¹æ¡ˆ&lt;/th&gt;&#xA;          &lt;th&gt;å¯è®¿é—®æ€§&lt;/th&gt;&#xA;          &lt;th&gt;ç¼–è¯‘å™¨è¡Œä¸º&lt;/th&gt;&#xA;          &lt;th&gt;å¯¹å•ä¾‹æ¨¡å¼çš„å½±å“&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;â€‹&lt;strong&gt;ç§æœ‰ææ„å‡½æ•°&lt;/strong&gt;â€‹&lt;/td&gt;&#xA;          &lt;td&gt;ä»…ç±»å†…éƒ¨å¯è®¿é—®&lt;/td&gt;&#xA;          &lt;td&gt;å…è®¸ç±»å†…éƒ¨ææ„å¯¹è±¡&lt;/td&gt;&#xA;          &lt;td&gt;é˜²æ­¢å¤–éƒ¨deleteæ“ä½œ&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;code&gt;~Singleton() = delete&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;å‡½æ•°è¢«å½»åº•åˆ é™¤&lt;/td&gt;&#xA;          &lt;td&gt;å¯¹è±¡é”€æ¯æ—¶ç›´æ¥æŠ¥é”™&lt;/td&gt;&#xA;          &lt;td&gt;å¯¹è±¡æ— æ³•è¢«æ­£ç¡®é‡Šæ”¾&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;äºŒå…³é”®é”™è¯¯åœºæ™¯æ¼”ç¤º&#34;&gt;äºŒã€å…³é”®é”™è¯¯åœºæ™¯æ¼”ç¤º&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Singleton&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; getInstance() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton instance;  &lt;span style=&#34;color:#75715e&#34;&gt;// è¿™é‡Œä¼šç¼–è¯‘å¤±è´¥ï¼&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; instance;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;    &lt;span style=&#34;color:#75715e&#34;&gt;// æ„é€ å‡½æ•°è¢«åˆ é™¤&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;Singleton() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;   &lt;span style=&#34;color:#75715e&#34;&gt;// ææ„å‡½æ•°è¢«åˆ é™¤&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ç¼–è¯‘å™¨æŠ¥é”™ä¿¡æ¯&#34;&gt;ç¼–è¯‘å™¨æŠ¥é”™ä¿¡æ¯&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;error: use of deleted &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Singleton::Singleton()&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;         static Singleton instance;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            ^&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;note: declared here&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     Singleton&lt;span style=&#34;color:#f92672&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; delete;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     ^~~~~~~~~~~&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;error: use of deleted &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Singleton::~Singleton()&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;         static Singleton instance;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            ^&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;note: declared here&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     ~Singleton&lt;span style=&#34;color:#f92672&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; delete;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     ^&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h3 id=&#34;ä¸‰æŠ€æœ¯åŸç†æ·±åº¦è§£æ&#34;&gt;ä¸‰ã€æŠ€æœ¯åŸç†æ·±åº¦è§£æ&lt;/h3&gt;&#xA;&lt;h4 id=&#34;æ„é€ å‡½æ•°åˆ é™¤çš„è‡´å‘½é—®é¢˜&#34;&gt;æ„é€ å‡½æ•°åˆ é™¤çš„è‡´å‘½é—®é¢˜&lt;/h4&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;é™æ€å±€éƒ¨å˜é‡åˆå§‹åŒ–&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;code&gt;static Singleton instance&lt;/code&gt;æœ¬è´¨éœ€è¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œä½†æ„é€ å‡½æ•°å·²è¢«åˆ é™¤ â†’ ç¼–è¯‘å¤±è´¥&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;å•ä¾‹æ¨¡å¼åŸºç¡€ç ´å&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;åˆ é™¤æ„é€ å‡½æ•°æ„å‘³ç€è¯¥ç±»æ— æ³•è¢«å®ä¾‹åŒ–ï¼Œå®Œå…¨å¤±å»å•ä¾‹å­˜åœ¨çš„æ„ä¹‰&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h4 id=&#34;ææ„å‡½æ•°åˆ é™¤çš„è¿é”ååº”&#34;&gt;ææ„å‡½æ•°åˆ é™¤çš„è¿é”ååº”&lt;/h4&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;é™æ€å˜é‡é”€æ¯é—®é¢˜&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;ç¨‹åºé€€å‡ºæ—¶ï¼Œé™æ€å˜é‡&lt;code&gt;instance&lt;/code&gt;éœ€è¦è°ƒç”¨ææ„å‡½æ•° â†’ å› ææ„å‡½æ•°è¢«åˆ é™¤å¯¼è‡´é“¾æ¥é”™è¯¯&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;å†…å­˜æ³„æ¼ä¼ªè£…è€…&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;å³ä½¿é€šè¿‡ç‰¹æ®Šæ‰‹æ®µæ„é€ å¯¹è±¡ï¼Œä¹Ÿæ— æ³•æ­£å¸¸é‡Šæ”¾èµ„æº â†’ è¿åRAIIåŸåˆ™&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;å››æ­£ç¡®æ–¹æ¡ˆå¯¹æ¯”éªŒè¯&#34;&gt;å››ã€æ­£ç¡®æ–¹æ¡ˆå¯¹æ¯”éªŒè¯&lt;/h3&gt;&#xA;&lt;h4 id=&#34;æ­£ç¡®å®ç°ç§æœ‰æ„é€ ææ„&#34;&gt;æ­£ç¡®å®ç°ï¼ˆç§æœ‰æ„é€ /ææ„ï¼‰&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Singleton&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; getInstance() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton instance;  &lt;span style=&#34;color:#75715e&#34;&gt;// æ­£ç¡®ï¼šè°ƒç”¨ç§æœ‰æ„é€ å‡½æ•°&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; instance;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// ç¦ç”¨æ‹·è´æ“ä½œ&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    Singleton(&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;operator&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;;   &lt;span style=&#34;color:#75715e&#34;&gt;// æ­£ç¡®ï¼šç§æœ‰é»˜è®¤æ„é€ &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;Singleton() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;;  &lt;span style=&#34;color:#75715e&#34;&gt;// æ­£ç¡®ï¼šç§æœ‰ææ„&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å…³é”®ä¼˜åŠ¿&#34;&gt;å…³é”®ä¼˜åŠ¿&lt;/h4&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;æ„é€ å¯æ§æ€§&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;é€šè¿‡ç§æœ‰æ„é€ å‡½æ•°é™åˆ¶å¯¹è±¡åˆ›å»ºé€”å¾„ï¼Œç¡®ä¿å”¯ä¸€å®ä¾‹&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;ææ„å®‰å…¨æ€§&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;ç§æœ‰ææ„å‡½æ•°é˜»æ­¢å¤–éƒ¨&lt;code&gt;delete&lt;/code&gt;æ“ä½œï¼Œä¾èµ–ç³»ç»Ÿè‡ªåŠ¨é‡Šæ”¾&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;èµ„æºç®¡ç†åˆè§„&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;é™æ€å±€éƒ¨å˜é‡åœ¨ç¨‹åºç»“æŸæ—¶è‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ï¼Œç¬¦åˆRAIIè§„èŒƒ&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;äº”ç‰¹æ®Šåœºæ™¯æ‰©å±•è®¨è®º&#34;&gt;äº”ã€ç‰¹æ®Šåœºæ™¯æ‰©å±•è®¨è®º&lt;/h3&gt;&#xA;&lt;h4 id=&#34;qå¦‚æœç¡®å®éœ€è¦å®Œå…¨ç¦æ­¢æŸä¸ªç±»çš„å®ä¾‹åŒ–&#34;&gt;Qï¼šå¦‚æœç¡®å®éœ€è¦å®Œå…¨ç¦æ­¢æŸä¸ªç±»çš„å®ä¾‹åŒ–ï¼Ÿ&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UtilityClass&lt;/span&gt; {  &lt;span style=&#34;color:#75715e&#34;&gt;// å·¥å…·ç±»ï¼Œä»…åŒ…å«é™æ€æ–¹æ³•&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    UtilityClass() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;UtilityClass() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;helper1&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;helper2&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;â€‹&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;â€‹ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“Œæ·±å…¥ç†è§£ C&#43;&#43; ä¸­çš„ std ref å’Œ cref çš„å¼•ç”¨å°è£…æœºåˆ¶</title>
      <link>/posts/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-c&#43;&#43;-%E4%B8%AD%E7%9A%84-std-ref-%E5%92%8C-cref-%E7%9A%84%E5%BC%95%E7%94%A8%E5%B0%81%E8%A3%85%E6%9C%BA%E5%88%B6/</link>
      <pubDate>Wed, 04 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-c&#43;&#43;-%E4%B8%AD%E7%9A%84-std-ref-%E5%92%8C-cref-%E7%9A%84%E5%BC%95%E7%94%A8%E5%B0%81%E8%A3%85%E6%9C%BA%E5%88%B6/</guid>
      <description>&lt;h1 id=&#34;æ·±å…¥ç†è§£-c-ä¸­çš„-std-ref-å’Œ-cref-çš„å¼•ç”¨å°è£…æœºåˆ¶&#34;&gt;æ·±å…¥ç†è§£ C++ ä¸­çš„ std ref å’Œ cref çš„å¼•ç”¨å°è£…æœºåˆ¶&lt;/h1&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;åœ¨ç°ä»£ C++ ç¼–ç¨‹ä¸­ï¼Œ&lt;strong&gt;æŒ‰å€¼ä¼ å‚æ˜¯å¸¸æ€ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬ç¡®å®éœ€è¦ä¼ å¼•ç”¨&lt;/strong&gt;ã€‚å°¤å…¶æ˜¯åœ¨ä½¿ç”¨ &lt;code&gt;std::bind&lt;/code&gt;ã€&lt;code&gt;std::thread&lt;/code&gt;ã€æ ‡å‡†ç®—æ³•ç­‰åœºæ™¯ä¸‹ï¼Œå¦‚æœä¸åŠ æ³¨æ„ï¼ŒåŸæœ¬å¸Œæœ›ä¼ å¼•ç”¨çš„å˜é‡å´è¢«å¤åˆ¶ï¼Œå¯¼è‡´é€»è¾‘å¤±æ•ˆç”šè‡³ç¨‹åºå´©æºƒã€‚&lt;br&gt;&#xA;æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ç†è§£ &lt;code&gt;std::ref&lt;/code&gt; å’Œ &lt;code&gt;std::cref&lt;/code&gt; çš„è®¾è®¡åŸç†ã€ä½¿ç”¨åœºæ™¯ä»¥åŠæ˜“è¸©çš„å‘ã€‚&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;ä¸ºä»€ä¹ˆéœ€è¦å¼•ç”¨å°è£…å™¨&#34;&gt;ä¸ºä»€ä¹ˆéœ€è¦å¼•ç”¨å°è£…å™¨&lt;/h2&gt;&#xA;&lt;p&gt;å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;increment&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; x) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    x&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; a &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;thread&lt;/span&gt; t(increment, a);  &lt;span style=&#34;color:#75715e&#34;&gt;// âŒ ç¼–è¯‘å¤±è´¥&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    t.join();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å¯èƒ½ä»¥ä¸ºæŠŠ &lt;code&gt;a&lt;/code&gt; ä¼ è¿›å»å°±æ˜¯å¼•ç”¨äº†ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚&lt;code&gt;std::thread&lt;/code&gt; é»˜è®¤æŒ‰å€¼å¤åˆ¶å‚æ•°ã€‚å®ƒå°è¯•å°† &lt;code&gt;a&lt;/code&gt; æ‹·è´ä¸€ä»½ä¼ é€’ç»™ &lt;code&gt;increment&lt;/code&gt;ï¼Œè€Œ &lt;code&gt;increment&lt;/code&gt; æœŸæœ›çš„æ˜¯ &lt;code&gt;int&amp;amp;&lt;/code&gt;ï¼Œäºæ˜¯ç¼–è¯‘å™¨æŠ¥é”™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™ä¸ªæ—¶å€™ï¼Œ&lt;code&gt;std::ref(a)&lt;/code&gt; å°±æ´¾ä¸Šäº†ç”¨åœºï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;thread&lt;/span&gt; t(increment, std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;ref(a));  &lt;span style=&#34;color:#75715e&#34;&gt;// âœ… ä¼ å¼•ç”¨æˆåŠŸ&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h2 id=&#34;std-ref-å’Œ-cref-æ˜¯ä»€ä¹ˆ&#34;&gt;std ref å’Œ cref æ˜¯ä»€ä¹ˆ&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;code&gt;std::ref(obj)&lt;/code&gt;ï¼šè¿”å›ä¸€ä¸ª &lt;strong&gt;å¯ä¿®æ”¹å¼•ç”¨&lt;/strong&gt; çš„åŒ…è£…å™¨ã€‚&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;code&gt;std::cref(obj)&lt;/code&gt;ï¼šè¿”å›ä¸€ä¸ª &lt;strong&gt;const å¼•ç”¨&lt;/strong&gt; çš„åŒ…è£…å™¨ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>asan</title>
      <link>/posts/asan/</link>
      <pubDate>Thu, 01 Jun 2023 09:30:01 +0800</pubDate>
      <guid>/posts/asan/</guid>
      <description>&lt;script src=&#34;https://gist.github.com/luyoungcn/b544977db493d7016f87ae60c51cc4cd.js&#34;&gt;&lt;/script&gt;</description>
    </item>
    <item>
      <title>C&#43;&#43; å‰å‘å£°æ˜ä¸æŒ‡é’ˆä½¿ç”¨æŒ‡å—</title>
      <link>/posts/c&#43;&#43;-%E5%89%8D%E5%90%91%E5%A3%B0%E6%98%8E%E4%B8%8E%E6%8C%87%E9%92%88%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</link>
      <pubDate>Thu, 01 Jan 1970 00:00:00 +0800</pubDate>
      <guid>/posts/c&#43;&#43;-%E5%89%8D%E5%90%91%E5%A3%B0%E6%98%8E%E4%B8%8E%E6%8C%87%E9%92%88%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;c++ ä¸ºä»€ä¹ˆæœ‰äº›ç±»å±æ€§ä½¿ç”¨æ™®é€šçš„æŒ‡é’ˆå®šä¹‰ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ&#xA;&lt;code&gt;DogClass *ptr;&lt;/code&gt; è€Œä¸æ˜¯ &lt;code&gt;std::unique_ptr&amp;lt;DogClass&amp;gt; ptr&lt;/code&gt;;&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h1 id=&#34;c-å‰å‘å£°æ˜ä¸æŒ‡é’ˆä½¿ç”¨æŒ‡å—&#34;&gt;C++ å‰å‘å£°æ˜ä¸æŒ‡é’ˆä½¿ç”¨æŒ‡å—&lt;/h1&gt;&#xA;&lt;h2 id=&#34;å‰å‘å£°æ˜ä¸ä¸å®Œæ•´ç±»å‹&#34;&gt;å‰å‘å£°æ˜ä¸ä¸å®Œæ•´ç±»å‹&lt;/h2&gt;&#xA;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œ&lt;strong&gt;å‰å‘å£°æ˜&lt;/strong&gt;ï¼ˆForward Declarationï¼‰å…è®¸æˆ‘ä»¬åœ¨ä¸åŒ…å«å®Œæ•´ç±»å®šä¹‰çš„æƒ…å†µä¸‹å¼•ç”¨ä¸€ä¸ªç±»ã€‚è¿™å¯¹äºå‡å°‘ç¼–è¯‘ä¾èµ–å’Œè§£å†³å¾ªç¯ä¾èµ–é—®é¢˜éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å‰å‘å£°æ˜ç¤ºä¾‹&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MyClass&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// åªå£°æ˜å­˜åœ¨æ€§ï¼Œä¸æä¾›å®šä¹‰&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ—¶ï¼Œ&lt;code&gt;MyClass&lt;/code&gt; è¢«ç§°ä¸º&lt;strong&gt;ä¸å®Œæ•´ç±»å‹&lt;/strong&gt;ï¼ˆIncomplete Typeï¼‰ï¼Œå› ä¸ºç¼–è¯‘å™¨åªçŸ¥é“è¯¥ç±»å­˜åœ¨ï¼Œä½†ä¸çŸ¥é“å®ƒçš„å¤§å°ã€æˆå‘˜æˆ–æ–¹æ³•ã€‚&lt;/p&gt;&#xA;&lt;h2 id=&#34;stdunique_ptr-ä¸ä¸å®Œæ•´ç±»å‹&#34;&gt;std::unique_ptr ä¸ä¸å®Œæ•´ç±»å‹&lt;/h2&gt;&#xA;&lt;p&gt;å½“ä½¿ç”¨ &lt;code&gt;std::unique_ptr&lt;/code&gt; ç®¡ç†å‰å‘å£°æ˜ç±»çš„å¯¹è±¡æ—¶ï¼Œä¼šå‡ºç°é—®é¢˜ï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¤´æ–‡ä»¶ä¸­&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MyForwardDeclaredClass&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// å‰å‘å£°æ˜&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Container&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;unique_ptr&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;MyForwardDeclaredClass&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; ptr_; &lt;span style=&#34;color:#75715e&#34;&gt;// ç¼–è¯‘é”™è¯¯!&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šè¿°ä»£ç åœ¨ç¼–è¯‘æ—¶ä¼šå¤±è´¥ï¼Œé”™è¯¯ç±»ä¼¼äºï¼š&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;error: invalid application of &amp;#39;sizeof&amp;#39; to incomplete type &amp;#39;MyForwardDeclaredClass&amp;#39;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åŸå› åˆ†æ&#34;&gt;åŸå› åˆ†æ&lt;/h3&gt;&#xA;&lt;p&gt;è¿™ä¸ªé—®é¢˜å‡ºç°çš„åŸå› æ˜¯ï¼š&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;code&gt;std::unique_ptr&lt;/code&gt; çš„ææ„å‡½æ•°éœ€è¦çŸ¥é“å¦‚ä½•åˆ é™¤å®ƒç®¡ç†çš„å¯¹è±¡&lt;/li&gt;&#xA;&lt;li&gt;ä¸ºæ­¤ï¼Œç¼–è¯‘å™¨éœ€è¦åœ¨ç¼–è¯‘ &lt;code&gt;Container&lt;/code&gt; ç±»æ—¶çŸ¥é“ &lt;code&gt;MyForwardDeclaredClass&lt;/code&gt; çš„å®Œæ•´å®šä¹‰&lt;/li&gt;&#xA;&lt;li&gt;å½“ç¼–è¯‘å™¨å°è¯•è®¡ç®—ä¸å®Œæ•´ç±»å‹çš„ &lt;code&gt;sizeof&lt;/code&gt; æ—¶ï¼Œæ— æ³•ç¡®å®šå…¶å¤§å°ï¼Œå› æ­¤æŠ¥é”™&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;å…·ä½“æ¥è¯´ï¼Œ&lt;code&gt;std::unique_ptr&lt;/code&gt; çš„é»˜è®¤åˆ é™¤å™¨ &lt;code&gt;std::default_delete&lt;/code&gt; åœ¨ææ„æ—¶ä¼šæ‰§è¡Œï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;template&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;typename&lt;/span&gt; T&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;default_delete&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;::&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;operator&lt;/span&gt;()(T&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; ptr) &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static_assert&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;sizeof&lt;/span&gt;(T) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Type must be complete&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt; ptr;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å½“ç±»å‹ä¸å®Œæ•´æ—¶ï¼Œ&lt;code&gt;sizeof(T)&lt;/code&gt; æ— æ³•è®¡ç®—ï¼Œè§¦å‘ &lt;code&gt;static_assert&lt;/code&gt; å¤±è´¥ã€‚&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
