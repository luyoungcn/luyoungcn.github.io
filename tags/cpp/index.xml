<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Cpp on Luyangã®Blog</title>
    <link>/tags/cpp/</link>
    <description>Recent content in Cpp on Luyangã®Blog</description>
    <generator>Hugo</generator>
    <language>en-US</language>
    <lastBuildDate>Sun, 13 Jul 2025 02:30:00 +0800</lastBuildDate>
    <atom:link href="/tags/cpp/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ğŸ“˜ bin æ–‡ä»¶å†…å®¹ç‰¹å¾ä¸ç¼–è¾‘å™¨æ‰“å¼€æ¨¡å¼è¡Œä¸ºåˆ†æ</title>
      <link>/posts/bin-%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E7%89%B9%E5%BE%81%E4%B8%8E%E7%BC%96%E8%BE%91%E5%99%A8%E6%89%93%E5%BC%80%E6%A8%A1%E5%BC%8F%E8%A1%8C%E4%B8%BA%E5%88%86%E6%9E%90/</link>
      <pubDate>Sun, 13 Jul 2025 02:30:00 +0800</pubDate>
      <guid>/posts/bin-%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E7%89%B9%E5%BE%81%E4%B8%8E%E7%BC%96%E8%BE%91%E5%99%A8%E6%89%93%E5%BC%80%E6%A8%A1%E5%BC%8F%E8%A1%8C%E4%B8%BA%E5%88%86%E6%9E%90/</guid>
      <description>&lt;h1 id=&#34;-bin-æ–‡ä»¶å†…å®¹ç‰¹å¾ä¸ç¼–è¾‘å™¨æ‰“å¼€æ¨¡å¼è¡Œä¸ºåˆ†æ&#34;&gt;ğŸ“˜ bin æ–‡ä»¶å†…å®¹ç‰¹å¾ä¸ç¼–è¾‘å™¨æ‰“å¼€æ¨¡å¼è¡Œä¸ºåˆ†æ&lt;/h1&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;â€”â€” ä»¥ UltraEdit å’ŒäºŒè¿›åˆ¶æ•°æ®ç»“æ„ä¸ºæ¡ˆä¾‹å‰–æ&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;ä¸€èƒŒæ™¯ä¸é—®é¢˜ç°è±¡&#34;&gt;ä¸€ã€èƒŒæ™¯ä¸é—®é¢˜ç°è±¡&lt;/h2&gt;&#xA;&lt;p&gt;åœ¨ä½¿ç”¨ [[UltraEdit]]ã€HxDã€VSCode ç­‰æ–‡æœ¬æˆ–åå…­è¿›åˆ¶ç¼–è¾‘å™¨æŸ¥çœ‹ &lt;code&gt;.bin&lt;/code&gt; æ–‡ä»¶æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°ä»¥ä¸‹ç°è±¡ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;æœ‰äº› &lt;code&gt;.bin&lt;/code&gt; æ–‡ä»¶ä¸€æ‰“å¼€å°±æ˜¯ &lt;strong&gt;åå…­è¿›åˆ¶è§†å›¾&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;æœ‰äº› &lt;code&gt;.bin&lt;/code&gt; æ–‡ä»¶å´è¢«å½“ä½œ &lt;strong&gt;æ™®é€šæ–‡æœ¬æ–‡ä»¶æ˜¾ç¤º&lt;/strong&gt;ï¼Œçœ‹åˆ°ä¸€å †â€œä¹±ç â€æˆ– ASCII å­—ç¬¦&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;è¿™ç§è¡Œä¸ºå¹¶ä¸æ˜¯ bugï¼Œè€Œæ˜¯ç”±&lt;strong&gt;ç¼–è¾‘å™¨çš„æ™ºèƒ½åˆ¤æ–­é€»è¾‘&lt;/strong&gt;æ‰€å†³å®šçš„ã€‚&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;äºŒbin-æ–‡ä»¶çš„æœ¬è´¨&#34;&gt;äºŒã€bin æ–‡ä»¶çš„æœ¬è´¨&lt;/h2&gt;&#xA;&lt;h3 id=&#34;-bin-æ˜¯ä»€ä¹ˆ&#34;&gt;âœ… bin æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h3&gt;&#xA;&lt;p&gt;&lt;code&gt;.bin&lt;/code&gt; æ–‡ä»¶æœ¬è´¨æ˜¯â€œ&lt;strong&gt;åŸå§‹äºŒè¿›åˆ¶æ•°æ®çš„è¿ç»­å­˜å‚¨&lt;/strong&gt;â€ï¼Œä¸åŒ…å«ç»“æ„å®šä¹‰ã€å…ƒæ•°æ®æˆ–æ ¼å¼å¤´ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ç‰¹ç‚¹å¦‚ä¸‹ï¼š&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;ç‰¹æ€§&lt;/th&gt;&#xA;          &lt;th&gt;æè¿°&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;åŸå§‹æ€§&lt;/td&gt;&#xA;          &lt;td&gt;æ²¡æœ‰æ–‡ä»¶å¤´ã€æ ¼å¼æ ‡è®°ã€ç¬¦å·ç­‰&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;ç»“æ„é€æ˜æ€§&lt;/td&gt;&#xA;          &lt;td&gt;å®é™…å«ä¹‰éœ€ç”±ä¸Šä¸‹æ–‡æˆ–ç¨‹åºä»£ç è§£æï¼ˆç»“æ„ä½“/ä½å›¾ç­‰ï¼‰&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;å¹¿æ³›ç”¨é€”&lt;/td&gt;&#xA;          &lt;td&gt;å­˜å‚¨å›ºä»¶ã€é…ç½®æ®µã€å†…å­˜è½¬å‚¨ã€Flash é•œåƒã€èµ„æºæ–‡ä»¶ç­‰&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;ä¸‰ultraedit-æ‰“å¼€-bin-æ–‡ä»¶çš„æ¨¡å¼åˆ¤æ–­æœºåˆ¶&#34;&gt;ä¸‰ã€UltraEdit æ‰“å¼€ bin æ–‡ä»¶çš„â€œæ¨¡å¼åˆ¤æ–­æœºåˆ¶â€&lt;/h2&gt;&#xA;&lt;h3 id=&#34;-é»˜è®¤é€»è¾‘æ¨æµ‹è‡ªé•¿æœŸä½¿ç”¨&#34;&gt;ğŸ“Œ é»˜è®¤é€»è¾‘ï¼ˆæ¨æµ‹è‡ªé•¿æœŸä½¿ç”¨ï¼‰&lt;/h3&gt;&#xA;&lt;p&gt;UltraEdit åœ¨æ‰“å¼€ &lt;code&gt;.bin&lt;/code&gt; æ–‡ä»¶æ—¶ï¼Œä¼šæ ¹æ®&lt;strong&gt;æ–‡ä»¶å†…å®¹å‰è‹¥å¹²å­—èŠ‚&lt;/strong&gt;æ¥åˆ¤æ–­ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;æ˜¯å¦ä¸ºâ€œæ–‡æœ¬â€æ–‡ä»¶&lt;/strong&gt;ï¼ˆæ˜¾ç¤ºä¸º ASCIIï¼‰&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;æ˜¯å¦ä¸ºâ€œäºŒè¿›åˆ¶â€æ–‡ä»¶&lt;/strong&gt;ï¼ˆå¯ç”¨åå…­è¿›åˆ¶ç¼–è¾‘æ¨¡å¼ï¼‰&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;-åˆ¤æ–­ä¾æ®ç»éªŒæ€»ç»“&#34;&gt;ğŸš¦ åˆ¤æ–­ä¾æ®ï¼ˆç»éªŒæ€»ç»“ï¼‰ï¼š&lt;/h3&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;æ¡ä»¶&lt;/th&gt;&#xA;          &lt;th&gt;UltraEdit é»˜è®¤è¡Œä¸º&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;æ–‡ä»¶å‰å‡ ä¸ªå­—èŠ‚å¤§éƒ¨åˆ†ä¸º ASCII å¯æ‰“å°å­—ç¬¦ï¼ˆ0x20~0x7Eï¼‰&lt;/td&gt;&#xA;          &lt;td&gt;é»˜è®¤ä»¥ &lt;strong&gt;æ–‡æœ¬æ¨¡å¼&lt;/strong&gt; æ‰“å¼€&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;åŒ…å«å¤§é‡æ§åˆ¶å­—ç¬¦æˆ–ä¸å¯æ‰“å°å­—èŠ‚ï¼ˆ0x00ã€0xFFã€0x80~ï¼‰&lt;/td&gt;&#xA;          &lt;td&gt;é»˜è®¤ä»¥ &lt;strong&gt;åå…­è¿›åˆ¶æ¨¡å¼&lt;/strong&gt; æ‰“å¼€&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h3 id=&#34;-ä¸¾ä¾‹è¯´æ˜&#34;&gt;ğŸ“Œ ä¸¾ä¾‹è¯´æ˜ï¼š&lt;/h3&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;æ–‡ä»¶å†…å®¹ï¼ˆå‰å‡ å­—èŠ‚ï¼‰&lt;/th&gt;&#xA;          &lt;th&gt;UltraEdit è¡Œä¸º&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;code&gt;41 42 43 0A 44 45&lt;/code&gt;ï¼ˆASCII: &amp;ldquo;ABC\nDE&amp;rdquo;ï¼‰&lt;/td&gt;&#xA;          &lt;td&gt;æ–‡æœ¬æ¨¡å¼ï¼ˆASCII æ˜¾ç¤ºï¼‰&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;code&gt;00 FF 80 1F CD AB&lt;/code&gt;ï¼ˆå«éæ‰“å°å­—èŠ‚ï¼‰&lt;/td&gt;&#xA;          &lt;td&gt;åå…­è¿›åˆ¶æ¨¡å¼&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;å››æ¼”ç¤º-demoå®éªŒè¯æ˜&#34;&gt;å››ã€æ¼”ç¤º Demoï¼ˆå®éªŒè¯æ˜ï¼‰&lt;/h2&gt;&#xA;&lt;p&gt;æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªç®€æ´çš„ Demo ç¨‹åºï¼Œç”Ÿæˆä¸¤ä¸ª &lt;code&gt;.bin&lt;/code&gt; æ–‡ä»¶ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“˜ æ·±å…¥ç†è§£ ZeroMQ å¼‚æ­¥è¿æ¥ä¸ REQ æ¶ˆæ¯å †ç§¯è¡Œä¸º</title>
      <link>/posts/-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-zeromq-%E5%BC%82%E6%AD%A5%E8%BF%9E%E6%8E%A5%E4%B8%8E-req-%E6%B6%88%E6%81%AF%E5%A0%86%E7%A7%AF%E8%A1%8C%E4%B8%BA/</link>
      <pubDate>Tue, 08 Jul 2025 02:30:00 +0800</pubDate>
      <guid>/posts/-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-zeromq-%E5%BC%82%E6%AD%A5%E8%BF%9E%E6%8E%A5%E4%B8%8E-req-%E6%B6%88%E6%81%AF%E5%A0%86%E7%A7%AF%E8%A1%8C%E4%B8%BA/</guid>
      <description>&lt;h1 id=&#34;-æ·±å…¥ç†è§£-zeromq-å¼‚æ­¥è¿æ¥ä¸-req-æ¶ˆæ¯å †ç§¯è¡Œä¸º&#34;&gt;ğŸ“˜ æ·±å…¥ç†è§£ ZeroMQ å¼‚æ­¥è¿æ¥ä¸ REQ æ¶ˆæ¯å †ç§¯è¡Œä¸º&lt;/h1&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;-æ–‡æ¡£æ¦‚è§ˆ&#34;&gt;âœ¨ æ–‡æ¡£æ¦‚è§ˆ&lt;/h2&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;ç« èŠ‚&lt;/th&gt;&#xA;          &lt;th&gt;å†…å®¹&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;1. ç®€ä»‹&lt;/td&gt;&#xA;          &lt;td&gt;ZeroMQ &lt;code&gt;connect()&lt;/code&gt; è¡Œä¸ºè¯¯åŒº&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;2. å¼‚æ­¥è¿æ¥æœºåˆ¶&lt;/td&gt;&#xA;          &lt;td&gt;&lt;code&gt;connect()&lt;/code&gt; å®ç°åŸç†ä¸å»¶è¿Ÿè¿æ¥&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;3. REQ socket ç‰¹æ€§&lt;/td&gt;&#xA;          &lt;td&gt;REQ çš„ FSM çŠ¶æ€æœºä¸å †ç§¯é™·é˜±&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;4. å†…å­˜å¢é•¿é—®é¢˜åˆ†æ&lt;/td&gt;&#xA;          &lt;td&gt;å®ä¾‹é‡ç°ä¸åº•å±‚è§£é‡Š&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;5. å¦‚ä½•è§„é¿é—®é¢˜&lt;/td&gt;&#xA;          &lt;td&gt;å‚æ•°è®¾ç½®ã€ä»£ç ä¼˜åŒ–æ–¹æ¡ˆ&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;6. æ›¿ä»£æ–¹æ¡ˆ&lt;/td&gt;&#xA;          &lt;td&gt;ä½¿ç”¨ DEALER æ›¿ä»£ REQ çš„å¯è¡Œæ€§&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;7. æºç åˆ†æ&lt;/td&gt;&#xA;          &lt;td&gt;ZeroMQ æºç è·¯å¾„ä¸å…³é”®ç»„ä»¶è¯´æ˜&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;8. é™„å½•ä¸å‚è€ƒèµ„æ–™&lt;/td&gt;&#xA;          &lt;td&gt;å®˜æ–¹æ–‡çŒ®ã€å·¥å…·ã€å‘½ä»¤ç­‰&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1--ç®€ä»‹ä¸ºä»€ä¹ˆè¿æ¥æˆåŠŸäº†æœåŠ¡ç«¯å´æ²¡èµ·æ¥&#34;&gt;1. ğŸ”° ç®€ä»‹ï¼šä¸ºä»€ä¹ˆè¿æ¥æˆåŠŸäº†æœåŠ¡ç«¯å´æ²¡èµ·æ¥ï¼Ÿ&lt;/h2&gt;&#xA;&lt;p&gt;å½“ä½ è°ƒç”¨å¦‚ä¸‹ä»£ç æ—¶ï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;zmq&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;socket_t socket(context, zmq&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;socket_type&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;req);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;socket.connect(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;tcp://127.0.0.1:5555&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;LogInfo(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Socket connected to endpoint&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å¯èƒ½ä¼šè¯¯ä»¥ä¸ºæœåŠ¡ç«¯å·²ç»åœ¨çº¿å¹¶æˆåŠŸè¿æ¥ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;è¿™æ˜¯ä¸€ä¸ªå¸¸è§è¯¯åŒºã€‚&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;-æ­£ç¡®ç†è§£&#34;&gt;âœ… æ­£ç¡®ç†è§£ï¼š&lt;/h3&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;code&gt;connect()&lt;/code&gt; åªæ˜¯å°†ç›®æ ‡ endpoint æ·»åŠ åˆ°å†…éƒ¨è¿æ¥ç›®æ ‡åˆ—è¡¨ä¸­ï¼Œå¹¶ä¸ä¼šç«‹å³å‘èµ· TCP è¿æ¥æˆ–ç­‰å¾…å¯¹ç«¯å“åº”ã€‚&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;p&gt;è¿™æ˜¯ ZeroMQ å¼‚æ­¥éé˜»å¡é€šä¿¡æ¨¡å‹çš„ç‰¹æ€§ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“ŒCMake ç°ä»£åŒ–é…ç½®å®Œæ•´æŒ‡å—</title>
      <link>/posts/cmake-%E7%8E%B0%E4%BB%A3%E5%8C%96%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/</link>
      <pubDate>Sun, 29 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/cmake-%E7%8E%B0%E4%BB%A3%E5%8C%96%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/</guid>
      <description>&lt;h1 id=&#34;cmake-ç°ä»£åŒ–é…ç½®å®Œæ•´æŒ‡å—&#34;&gt;CMake ç°ä»£åŒ–é…ç½®å®Œæ•´æŒ‡å—&lt;/h1&gt;&#xA;&lt;h2 id=&#34;ç›®å½•&#34;&gt;ç›®å½•&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;a href=&#34;#%E9%A1%B9%E7%9B%AE%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE&#34;&gt;é¡¹ç›®åŸºç¡€é…ç½®&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;#c-%E7%BC%96%E8%AF%91%E6%A0%87%E5%87%86%E8%AE%BE%E7%BD%AE&#34;&gt;C++ ç¼–è¯‘æ ‡å‡†è®¾ç½®&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;#%E7%BC%96%E8%AF%91%E5%99%A8%E9%80%89%E9%A1%B9%E4%B8%8E%E8%AD%A6%E5%91%8A%E9%85%8D%E7%BD%AE&#34;&gt;ç¼–è¯‘å™¨é€‰é¡¹ä¸è­¦å‘Šé…ç½®&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;#%E8%BE%93%E5%87%BA%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E7%AE%A1%E7%90%86&#34;&gt;è¾“å‡ºç›®å½•ç»“æ„ç®¡ç†&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;#%E7%8E%AF%E5%A2%83%E6%A3%80%E6%B5%8B%E4%B8%8E%E8%B7%AF%E5%BE%84%E9%85%8D%E7%BD%AE&#34;&gt;ç¯å¢ƒæ£€æµ‹ä¸è·¯å¾„é…ç½®&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;#%E7%AC%AC%E4%B8%89%E6%96%B9%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86&#34;&gt;ç¬¬ä¸‰æ–¹ä¾èµ–ç®¡ç†&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;#%E7%9B%AE%E6%A0%87%E9%93%BE%E6%8E%A5%E4%B8%8E%E5%8F%AF%E8%A7%81%E6%80%A7&#34;&gt;ç›®æ ‡é“¾æ¥ä¸å¯è§æ€§&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%83%A8%E7%BD%B2&#34;&gt;å®‰è£…é…ç½®ä¸éƒ¨ç½²&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9E%84%E5%BB%BA%E7%9B%AE%E6%A0%87&#34;&gt;è‡ªå®šä¹‰æ„å»ºç›®æ ‡&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;#%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B%E9%A1%B9%E7%9B%AE&#34;&gt;å®Œæ•´ç¤ºä¾‹é¡¹ç›®&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;é¡¹ç›®åŸºç¡€é…ç½®&#34;&gt;é¡¹ç›®åŸºç¡€é…ç½®&lt;/h2&gt;&#xA;&lt;h3 id=&#34;æœ€å°ç‰ˆæœ¬è¦æ±‚ä¸é¡¹ç›®å£°æ˜&#34;&gt;æœ€å°ç‰ˆæœ¬è¦æ±‚ä¸é¡¹ç›®å£°æ˜&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cmake&#34; data-lang=&#34;cmake&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cmake_minimum_required(&lt;span style=&#34;color:#e6db74&#34;&gt;VERSION&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;3.14&lt;/span&gt;)&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;project(&lt;span style=&#34;color:#e6db74&#34;&gt;VisionDemo&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;VERSION&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;1.0.0&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;LANGUAGES&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;CXX&lt;/span&gt;)&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;cmake_minimum_required&lt;/code&gt;ï¼šæŒ‡å®šæ‰€éœ€çš„æœ€ä½CMakeç‰ˆæœ¬&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;project&lt;/code&gt;ï¼šå®šä¹‰é¡¹ç›®åç§°ã€ç‰ˆæœ¬å·å’Œä½¿ç”¨çš„è¯­è¨€&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;VERSION&lt;/code&gt;ï¼šè®¾ç½®é¡¹ç›®ç‰ˆæœ¬ï¼Œå¯é€šè¿‡ &lt;code&gt;${PROJECT_VERSION}&lt;/code&gt; å¼•ç”¨&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;LANGUAGES&lt;/code&gt;ï¼šæ˜ç¡®æŒ‡å®šä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;c-ç¼–è¯‘æ ‡å‡†è®¾ç½®&#34;&gt;C++ ç¼–è¯‘æ ‡å‡†è®¾ç½®&lt;/h2&gt;&#xA;&lt;h3 id=&#34;å…¨å±€æ ‡å‡†è®¾ç½®&#34;&gt;å…¨å±€æ ‡å‡†è®¾ç½®&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cmake&#34; data-lang=&#34;cmake&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# è®¾ç½® C++17 æ ‡å‡†&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;set(&lt;span style=&#34;color:#e6db74&#34;&gt;CMAKE_CXX_STANDARD&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;17&lt;/span&gt;)&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;set(&lt;span style=&#34;color:#e6db74&#34;&gt;CMAKE_CXX_STANDARD_REQUIRED&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;ON&lt;/span&gt;)&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;set(&lt;span style=&#34;color:#e6db74&#34;&gt;CMAKE_CXX_EXTENSIONS&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;OFF&lt;/span&gt;)&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;å„å‚æ•°å«ä¹‰ï¼š&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;å‚æ•°&lt;/th&gt;&#xA;          &lt;th&gt;ä½œç”¨&lt;/th&gt;&#xA;          &lt;th&gt;è¯´æ˜&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;code&gt;CMAKE_CXX_STANDARD&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;æŒ‡å®šC++æ ‡å‡†ç‰ˆæœ¬&lt;/td&gt;&#xA;          &lt;td&gt;å‘Šè¯‰ç¼–è¯‘å™¨ä½¿ç”¨å“ªä¸ªC++æ ‡å‡†ï¼ˆå¦‚17ã€20ã€23ï¼‰&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;code&gt;CMAKE_CXX_STANDARD_REQUIRED&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;å¼ºåˆ¶è¦æ±‚æŒ‡å®šæ ‡å‡†&lt;/td&gt;&#xA;          &lt;td&gt;ONï¼šç¼–è¯‘å™¨å¿…é¡»æ”¯æŒæŒ‡å®šæ ‡å‡†ï¼Œå¦åˆ™æŠ¥é”™&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;code&gt;CMAKE_CXX_EXTENSIONS&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;ç¦ç”¨ç¼–è¯‘å™¨æ‰©å±•&lt;/td&gt;&#xA;          &lt;td&gt;OFFï¼šä½¿ç”¨çº¯æ ‡å‡†C++ï¼Œæé«˜è·¨å¹³å°å…¼å®¹æ€§&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;&lt;strong&gt;ç¼–è¯‘å™¨å‚æ•°æ˜ å°„ï¼š&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;GCC/Clang: &lt;code&gt;-std=c++17&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;MSVC: &lt;code&gt;/std:c++17&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;é’ˆå¯¹ç‰¹å®šç›®æ ‡çš„æ ‡å‡†è®¾ç½®&#34;&gt;é’ˆå¯¹ç‰¹å®šç›®æ ‡çš„æ ‡å‡†è®¾ç½®&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cmake&#34; data-lang=&#34;cmake&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;set_target_properties(&lt;span style=&#34;color:#e6db74&#34;&gt;VisionDemo&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;PROPERTIES&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;CXX_STANDARD&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;17&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;CXX_STANDARD_REQUIRED&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;ON&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;CXX_EXTENSIONS&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;OFF&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;ä½¿ç”¨åœºæ™¯ï¼š&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;é¡¹ç›®ä¸­ä¸åŒç›®æ ‡éœ€è¦ä¸åŒçš„C++æ ‡å‡†&lt;/li&gt;&#xA;&lt;li&gt;æ˜ç¡®æŒ‡å®šæŸä¸ªç›®æ ‡çš„ç¼–è¯‘æ ‡å‡†&lt;/li&gt;&#xA;&lt;li&gt;è¦†ç›–å…¨å±€è®¾ç½®&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;ç¼–è¯‘å™¨é€‰é¡¹ä¸è­¦å‘Šé…ç½®&#34;&gt;ç¼–è¯‘å™¨é€‰é¡¹ä¸è­¦å‘Šé…ç½®&lt;/h2&gt;&#xA;&lt;h3 id=&#34;å…¨å±€ç¼–è¯‘é€‰é¡¹&#34;&gt;å…¨å±€ç¼–è¯‘é€‰é¡¹&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cmake&#34; data-lang=&#34;cmake&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;if(&lt;span style=&#34;color:#e6db74&#34;&gt;CMAKE_CXX_COMPILER_ID&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;MATCHES&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GNU|Clang&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;    add_compile_options(&lt;span style=&#34;color:#e6db74&#34;&gt;-Wall&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;-Wextra&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;-Wpedantic&lt;/span&gt;)&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;endif()&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç›®æ ‡ç‰¹å®šç¼–è¯‘é€‰é¡¹æ¨è&#34;&gt;ç›®æ ‡ç‰¹å®šç¼–è¯‘é€‰é¡¹ï¼ˆæ¨èï¼‰&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cmake&#34; data-lang=&#34;cmake&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;if(&lt;span style=&#34;color:#e6db74&#34;&gt;CMAKE_CXX_COMPILER_ID&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;MATCHES&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GNU|Clang&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;    target_compile_options(&lt;span style=&#34;color:#e6db74&#34;&gt;VisionDemo&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;PRIVATE&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;-Wall&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;-Wextra&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;-Wpedantic&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;-Wno-unused-parameter&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;-Wno-unused-variable&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    )&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;endif()&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;ç¼–è¯‘é€‰é¡¹è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“˜ThreadLocal å…¨é¢è§£æ</title>
      <link>/posts/-threadlocal-%E5%85%A8%E9%9D%A2%E8%A7%A3%E6%9E%90/</link>
      <pubDate>Tue, 24 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/-threadlocal-%E5%85%A8%E9%9D%A2%E8%A7%A3%E6%9E%90/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;The beauty of open source is that it is technically borderless. &amp;mdash; &lt;a href=&#34;https://www.reddit.com/user/AlterTableUsernames/&#34;&gt;u/AlterTableUsernames&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;threadlocal-å…¨é¢è§£æ&#34;&gt;ThreadLocal å…¨é¢è§£æ&lt;/h2&gt;&#xA;&lt;p&gt;åœ¨å¤šçº¿ç¨‹å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨æ˜¯å¼€å‘è€…å¿…é¡»é¢å¯¹çš„æ ¸å¿ƒæŒ‘æˆ˜ä¹‹ä¸€ã€‚&lt;code&gt;ThreadLocal&lt;/code&gt; ä½œä¸º Java æä¾›çš„ä¸€ç§ç‹¬ç‰¹çš„çº¿ç¨‹åŒæ­¥è§£å†³æ–¹æ¡ˆï¼Œå®ƒå¦è¾Ÿè¹Šå¾„ï¼Œé€šè¿‡ä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›å˜é‡çš„ç‹¬ç«‹å‰¯æœ¬ï¼Œå·§å¦™åœ°é¿å…äº†å¤šçº¿ç¨‹é—´çš„æ•°æ®å…±äº«å’Œç«äº‰ï¼Œä»è€Œå®ç°äº†çº¿ç¨‹å®‰å…¨ã€‚æœ¬æ–‡å°†ä» &lt;code&gt;ThreadLocal&lt;/code&gt; çš„åŸºæœ¬æ¦‚å¿µå…¥æ‰‹ï¼Œæ·±å…¥å‰–æå…¶æºç å®ç°ï¼Œæ¢è®¨å…¶åœ¨ C++ ä¸­çš„å¯¹åº”æ–¹æ¡ˆï¼Œå¹¶ç»“åˆå¸¸è§çš„é¢è¯•é¢˜ï¼Œä¸ºæ‚¨å…¨æ–¹ä½æ­ç¤º &lt;code&gt;ThreadLocal&lt;/code&gt; çš„å¥¥ç§˜ï¼ŒåŒ…æ‹¬å…¶ç²¾å¦™çš„å¼±å¼•ç”¨è®¾è®¡ä»¥åŠæ½œåœ¨çš„å†…å­˜æ³„æ¼é£é™©ã€‚&lt;/p&gt;&#xA;&lt;h3 id=&#34;threadlocal-ç®€ä»‹&#34;&gt;ThreadLocal ç®€ä»‹&lt;/h3&gt;&#xA;&lt;p&gt;&lt;code&gt;ThreadLocal&lt;/code&gt;ï¼Œé¡¾åæ€ä¹‰ï¼Œå³â€œçº¿ç¨‹å±€éƒ¨å˜é‡â€ã€‚å®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå˜é‡çš„æœºåˆ¶ï¼Œè¯¥å˜é‡å¯¹äºè®¿é—®å®ƒçš„æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰å…¶è‡ªå·±ç‹¬ç«‹çš„ã€åˆå§‹åŒ–çš„å‰¯æœ¬ã€‚æ¢è¨€ä¹‹ï¼Œå¦‚æœæ‚¨åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ª &lt;code&gt;ThreadLocal&lt;/code&gt; å˜é‡ï¼Œé‚£ä¹ˆåœ¨å…¶ä»–ä»»ä½•çº¿ç¨‹ä¸­ï¼Œéƒ½æ— æ³•ç›´æ¥è®¿é—®ä¸»çº¿ç¨‹ä¸­è¯¥å˜é‡çš„å€¼ï¼Œè€Œæ˜¯ä¼šæ‹¥æœ‰å¹¶æ“ä½œå±äºè‡ªå·±çº¿ç¨‹çš„é‚£ä¸ªå˜é‡çš„å‰¯æœ¬ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™ç§â€œç©ºé—´æ¢æ—¶é—´â€çš„ç­–ç•¥ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯éš”ç¦»è€ŒéåŒæ­¥ã€‚ä¸ä½¿ç”¨ &lt;code&gt;synchronized&lt;/code&gt; å…³é”®å­—æˆ– &lt;code&gt;Lock&lt;/code&gt; é”ç­‰åŒæ­¥æœºåˆ¶æ¥ä¿æŠ¤å…±äº«èµ„æºä¸åŒï¼Œ&lt;code&gt;ThreadLocal&lt;/code&gt; ç›´æ¥æœç»äº†èµ„æºå…±äº«çš„å¯èƒ½æ€§ï¼Œä»è€Œåœ¨æ ¹æœ¬ä¸Šé¿å…äº†çº¿ç¨‹é—´çš„ç«äº‰å’ŒåŒæ­¥å¼€é”€ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒåº”ç”¨åœºæ™¯ï¼š&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;æ¯ä¸ªçº¿ç¨‹éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„å®ä¾‹&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œ&lt;code&gt;SimpleDateFormat&lt;/code&gt; åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚é€šè¿‡ &lt;code&gt;ThreadLocal&lt;/code&gt; ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ›å»ºä¸€ä¸ª &lt;code&gt;SimpleDateFormat&lt;/code&gt; å®ä¾‹ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…å¹¶å‘é—®é¢˜ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;ç»´æŠ¤çº¿ç¨‹ä¸Šä¸‹æ–‡ä¿¡æ¯&lt;/strong&gt;ï¼šåœ¨å¤æ‚çš„ä¸šåŠ¡é€»è¾‘è°ƒç”¨é“¾ä¸­ï¼Œä¸ºäº†é¿å…åœ¨æ¯ä¸ªæ–¹æ³•å‚æ•°ä¸­éƒ½ä¼ é€’ç”¨æˆ·ä¿¡æ¯ã€äº‹åŠ¡ ID ç­‰ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;ThreadLocal&lt;/code&gt; åœ¨çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸå†…æŒæœ‰è¿™äº›ä¿¡æ¯ï¼Œæ–¹ä¾¿åœ¨è°ƒç”¨é“¾çš„ä»»ä½•ä½ç½®éšæ—¶è·å–ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;æ•°æ®åº“è¿æ¥ç®¡ç†&lt;/strong&gt;ï¼šåœ¨æœåŠ¡å±‚å’Œæ•°æ®è®¿é—®å±‚ä¹‹é—´ï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;ThreadLocal&lt;/code&gt; æ¥ç®¡ç†æ¯ä¸ªçº¿ç¨‹çš„æ•°æ®åº“è¿æ¥ï¼Œç¡®ä¿åŒä¸€ä¸ªçº¿ç¨‹ä¸­çš„å¤šæ¬¡æ•°æ®åº“æ“ä½œä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªè¿æ¥ï¼Œä»è€Œä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;æºç å®ç°è®²è§£&#34;&gt;æºç å®ç°è®²è§£&lt;/h3&gt;&#xA;&lt;p&gt;è¦çœŸæ­£ç†è§£ &lt;code&gt;ThreadLocal&lt;/code&gt; çš„å·¥ä½œåŸç†ï¼Œå¿…é¡»æ·±å…¥å…¶æºç ã€‚&lt;code&gt;ThreadLocal&lt;/code&gt; çš„æ ¸å¿ƒåœ¨äºå…¶å†…éƒ¨ç±» &lt;code&gt;ThreadLocalMap&lt;/code&gt;ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒå…³ç³»å›¾ï¼š&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://cdn-0.plantuml.com/plantuml/png/PLHHRzj637xNh-3qKhkBjVRL28m6Iu4LQxkXoR27PO0fcRQlFjq9TvHJRzX_7u-IaelwalZ8Zny_ygFzBZ86xbjRl89RWuU0BTmRjbHm-Wltnq2uknh_V_GDsYj0jyi3dx23BsIHZNVnQBf2kEvEna67GaTC8SBU1q1eBA43w_sfY0BGl0GnnXlcOEgUwKFZtPtvX-1D1h764Lyw0X_uw1F_pwa8RcbldD6-HQ4yeoxujm3u4VXPP5pdagkNyel_fl8oIrpVRqh0cDUDl0VYnL88zH7bSKRRamGaUFPcf_50hJ_JOWf9YmwR4nu8ogzunigYEvHAE2dF9Ma2O0MCjHNgzux3vQ-_9IX4KqcfqHBe6vFRoVjFmjCNsbCWrz1rnhWPEYLTezRVwg_KiF8zJN-BZ8ghAlWZKbZ5ZXgpDmti92FH19Njvsv7FOUR67rZXc12t4n67362TmIpXO_Pycq9hrShADzKbNoShM0DZNUCHYddoIa5RM_PT9Q65O7NkM8nWpzrUbjLhyi1cpK0T80XeDJlLRyR8AyYdEW2HW3mOhd07Z3N1CB2A9bYrB5QRRHhZbahso8nmHFLSjPG3HfQtd7mxW0lklAH01lkqQehuy1ZrwcfEhaUgHOp6kquqyuKX3J2e-6ZjcZw85WUOMgouJZtCIUfgis4NaCVQG9N8zNmMYpdHT_RxZjHmvGkH-_jivU7IdZ_hRFefZjp4eTW3aSMsuRz5G3NzURNjEMCTZavcE-zklwftXGWxLFIMlyOTVAiRbnkMdjD0ZrWgF50q7Xh9KwoapqO5jES1oixfW1Xujz90Tb8ZqTvNq4Nw4oEZJle5sBuFTj3IwqNuwn8gmgI4TDGusYbZFAxvrI55ZuDo8-2_259Vt0VzZF1prS89dwlzahXUj1EFmv7KrFZMugmTRsrs-h1_U8VHMiOu5izeYqiqatf8YCRQo7gKTbBDZ3KbsVQwaaVgpwfr1Mjh3aBT67DYP8EdFATztQfBc-dtyvjAdAUGKQpel_12Lya86bWQBpMf3eDbPxo2PkcRtkBJCgLZJ2wEU2KjYRO1r9YAnAID_gzpaqf0QCk_RCQCwoigfv3xyIrlhN_0m00&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ¯ä¸ª &lt;code&gt;Thread&lt;/code&gt; å¯¹è±¡å†…éƒ¨éƒ½æœ‰ä¸€ä¸ª &lt;code&gt;threadLocals&lt;/code&gt; æˆå‘˜å˜é‡ï¼Œå…¶ç±»å‹å°±æ˜¯ &lt;code&gt;ThreadLocal.ThreadLocalMap&lt;/code&gt;ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ&lt;code&gt;ThreadLocalMap&lt;/code&gt; å®é™…ä¸Šæ˜¯ &lt;code&gt;Thread&lt;/code&gt; çš„ä¸€ä¸ªå±æ€§ï¼Œè€Œä¸æ˜¯ &lt;code&gt;ThreadLocal&lt;/code&gt; çš„ã€‚å½“è°ƒç”¨ &lt;code&gt;ThreadLocal&lt;/code&gt; çš„ &lt;code&gt;set(T value)&lt;/code&gt; æˆ– &lt;code&gt;get()&lt;/code&gt; æ–¹æ³•æ—¶ï¼Œ&lt;code&gt;ThreadLocal&lt;/code&gt; ä¼šé¦–å…ˆè·å–å½“å‰çº¿ç¨‹çš„ &lt;code&gt;ThreadLocalMap&lt;/code&gt;ï¼Œç„¶åä»¥ &lt;code&gt;ThreadLocal&lt;/code&gt; å®ä¾‹è‡ªèº«ä½œä¸º keyï¼Œè¿›è¡Œå€¼çš„å­˜å–ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“˜æ·±å…¥è§£æ Java çº¿ç¨‹æœ¬åœ°åŒ–ï¼šä» ThreadLocal åˆ° ScopedValue çš„æ¼”è¿›ä¸é€‰æ‹©</title>
      <link>/posts/%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90-java-%E7%BA%BF%E7%A8%8B%E6%9C%AC%E5%9C%B0%E5%8C%96%E4%BB%8E-threadlocal-%E5%88%B0-scopedvalue-%E7%9A%84%E6%BC%94%E8%BF%9B%E4%B8%8E%E9%80%89%E6%8B%A9/</link>
      <pubDate>Tue, 24 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90-java-%E7%BA%BF%E7%A8%8B%E6%9C%AC%E5%9C%B0%E5%8C%96%E4%BB%8E-threadlocal-%E5%88%B0-scopedvalue-%E7%9A%84%E6%BC%94%E8%BF%9B%E4%B8%8E%E9%80%89%E6%8B%A9/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;The beauty of open source is that it is technically borderless. &amp;mdash; &lt;a href=&#34;https://www.reddit.com/user/AlterTableUsernames/&#34;&gt;u/AlterTableUsernames&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;æ·±å…¥è§£æ-java-çº¿ç¨‹æœ¬åœ°åŒ–ä»-threadlocal-åˆ°-scopedvalue-çš„æ¼”è¿›ä¸é€‰æ‹©&#34;&gt;æ·±å…¥è§£æ Java çº¿ç¨‹æœ¬åœ°åŒ–ï¼šä» ThreadLocal åˆ° ScopedValue çš„æ¼”è¿›ä¸é€‰æ‹©&lt;/h2&gt;&#xA;&lt;h3 id=&#34;æ‘˜è¦&#34;&gt;æ‘˜è¦&lt;/h3&gt;&#xA;&lt;p&gt;åœ¨ Java æœåŠ¡ç«¯å¼€å‘ä¸­ï¼Œå°†è´¯ç©¿å•æ¬¡ä¸šåŠ¡æµç¨‹çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·èº«ä»½ã€åˆ†å¸ƒå¼è¿½è¸ªIDï¼‰åœ¨çº¿ç¨‹å†…éƒ¨è¿›è¡Œä¼ é€’ï¼Œæ˜¯ä¸€é¡¹åŸºç¡€ä¸”å…³é”®çš„éœ€æ±‚ã€‚ä¸ºåº”å¯¹è¿™ä¸€æŒ‘æˆ˜ï¼ŒJava æä¾›äº†ç»å…¸çš„ &lt;code&gt;ThreadLocal&lt;/code&gt; æœºåˆ¶ï¼Œå®ƒé€šè¿‡å·§å¦™åœ°å°†æ•°æ®ä¸æ‰§è¡Œçº¿ç¨‹ç»‘å®šï¼Œå®ç°äº†é«˜æ•ˆçš„æ— é”åŒ–æ•°æ®éš”ç¦»ã€‚ç„¶è€Œï¼Œè¿™ä¸€ç»å…¸æ–¹æ¡ˆå¦‚åŒä¸€æŠŠåŒåˆƒå‰‘ï¼šå…¶ç²¾å·§çš„è®¾è®¡èƒŒåï¼Œæ˜¯å……æ»¡é™·é˜±çš„æ— ç•Œç”Ÿå‘½å‘¨æœŸã€éš¾ä»¥è¿½è¸ªçš„å¯å˜æ€§ï¼Œä»¥åŠåœ¨ç°ä»£çº¿ç¨‹æ± æ¨¡å‹ä¸‹ææ˜“è§¦å‘çš„å†…å­˜æ³„æ¼é£é™©ã€‚&lt;/p&gt;&#xA;&lt;p&gt;éšç€ Project Loom è®¡åˆ’çš„æˆç†Ÿï¼ŒJava å¹¶å‘ç¼–ç¨‹æ­£ç»å†ä¸€åœºæ·±åˆ»çš„èŒƒå¼é©å‘½ã€‚è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰çš„å¼•å…¥ï¼Œä½¿å¾— &lt;code&gt;InheritableThreadLocal&lt;/code&gt; çš„ç»§æ‰¿æˆæœ¬å˜å¾—ä¸å¯æ¥å—ï¼›è€Œç»“æ„åŒ–å¹¶å‘ï¼ˆStructured Concurrencyï¼‰çš„æå‡ºï¼Œåˆ™å‘¼å”¤ä¸€ç§æ›´å®‰å…¨ã€æ›´å…·ç¡®å®šæ€§çš„ä¸Šä¸‹æ–‡ä¼ é€’æœºåˆ¶ã€‚åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œ&lt;code&gt;ScopedValue&lt;/code&gt; åº”è¿è€Œç”Ÿã€‚å®ƒå¹¶é &lt;code&gt;ThreadLocal&lt;/code&gt; çš„ç®€å•æ”¹è‰¯ï¼Œè€Œæ˜¯ä»è®¾è®¡å“²å­¦ä¸Šå¯¹çº¿ç¨‹æœ¬åœ°æ•°æ®çš„ä¸€æ¬¡é‡å¡‘ï¼Œç”¨â€œåŠ¨æ€ä½œç”¨åŸŸâ€çš„ä¸å¯å˜ç»‘å®šï¼Œå–ä»£äº†â€œçº¿ç¨‹å¯„ç”Ÿâ€çš„å¯å˜çŠ¶æ€ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æœ¬æ–‡å°†å¯¹ Java çš„çº¿ç¨‹æœ¬åœ°åŒ–æŠ€æœ¯è¿›è¡Œä¸€æ¬¡ä»ç»å…¸åˆ°ç°ä»£çš„å®Œæ•´ã€æ·±å…¥çš„æ¢ç´¢ã€‚æˆ‘ä»¬å°†é¦–å…ˆè§£æ„ &lt;code&gt;ThreadLocal&lt;/code&gt; çš„å†…éƒ¨æ¶æ„ï¼Œè¯¦å°½å‰–æå…¶ &lt;code&gt;Thread-ThreadLocalMap-ThreadLocal&lt;/code&gt; çš„å§”æ‰˜å…³ç³»æ¨¡å‹ï¼Œå¹¶å¯¹å…¶â€œå¼±å¼•ç”¨Key-å¼ºå¼•ç”¨Valueâ€ç­‰å…³é”®è®¾è®¡å†³ç­–èƒŒåçš„æ·±å±‚æ€è¾¨è¿›è¡Œè®ºè¯ã€‚æ¥ç€ï¼Œæˆ‘ä»¬å°†èšç„¦äº &lt;code&gt;InheritableThreadLocal&lt;/code&gt; åœ¨çº¿ç¨‹æ± å’Œè™šæ‹Ÿçº¿ç¨‹æ—¶ä»£ä¸‹çš„å›°å¢ƒä¸å®¿æ€¨ã€‚éšåï¼Œæ–‡ç« å°†å…¨é¢è½¬å‘ &lt;code&gt;ScopedValue&lt;/code&gt;ï¼Œå°†å…¶ä½œä¸ºé¢å‘æœªæ¥çš„è§£å†³æ–¹æ¡ˆï¼Œé‡ç‚¹é˜è¿°å…¶ä¸ç»“æ„åŒ–å¹¶å‘å¦‚ä½•å¤©ä½œä¹‹åˆèˆ¬åœ°è§£å†³äº†æ•°æ®è‡ªåŠ¨ã€å®‰å…¨ã€é«˜æ•ˆä¼ æ’­çš„æ ¸å¿ƒéš¾é¢˜ã€‚æœ€åï¼Œæœ¬æ–‡é€šè¿‡ä¸€åœºæ¶‰åŠæ­£ç¡®æ€§ã€æ€§èƒ½ä¸å¿ƒæ™ºæ¨¡å‹çš„å…¨æ–¹ä½å¯¹å†³ï¼Œä¸ºå¼€å‘è€…åœ¨æŠ€æœ¯æ¼”è¿›çš„æµªæ½®ä¸­åšå‡ºæ˜æ™ºé€‰æ‹©æä¾›åšå®çš„ç†è®ºä¾æ®ã€‚&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;ç¬¬ä¸€ç« -threadlocal---ä¸€ä¸ªè®¾è®¡ç²¾å·§è€Œåˆå……æ»¡é™·é˜±çš„ç»å…¸&#34;&gt;ç¬¬ä¸€ç« : &lt;code&gt;ThreadLocal&lt;/code&gt; - ä¸€ä¸ªè®¾è®¡ç²¾å·§è€Œåˆå……æ»¡é™·é˜±çš„ç»å…¸&lt;/h3&gt;&#xA;&lt;p&gt;&lt;code&gt;ThreadLocal&lt;/code&gt; çš„æ ¸å¿ƒä½¿å‘½æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›ä¸€ä¸ªä¸“å±çš„æ•°æ®å­˜å‚¨ç©ºé—´ï¼Œä»è€Œå®ç°çº¿ç¨‹çº§åˆ«çš„æ•°æ®éš”ç¦»ã€‚å®ƒè®©å¼€å‘è€…æ„Ÿè§‰å¥½åƒåœ¨ä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„å…¨å±€å˜é‡ï¼Œä½†å®é™…ä¸Šæ¯ä¸ªçº¿ç¨‹æ“ä½œçš„éƒ½æ˜¯è‡ªå·±çš„ç‹¬ç«‹å‰¯æœ¬ã€‚&lt;/p&gt;&#xA;&lt;h4 id=&#34;11-æ ¸å¿ƒæ¶æ„å§”æ‰˜ä¸å¯„ç”Ÿçš„è‰ºæœ¯&#34;&gt;1.1 æ ¸å¿ƒæ¶æ„ï¼šå§”æ‰˜ä¸å¯„ç”Ÿçš„è‰ºæœ¯&lt;/h4&gt;&#xA;&lt;p&gt;è¦ç†è§£ &lt;code&gt;ThreadLocal&lt;/code&gt;ï¼Œé¦–å…ˆå¿…é¡»ç ´é™¤ä¸€ä¸ªè¯¯è§£ï¼šæ•°æ®å¹¶éå­˜å‚¨åœ¨ &lt;code&gt;ThreadLocal&lt;/code&gt; å¯¹è±¡æœ¬èº«ã€‚&lt;code&gt;ThreadLocal&lt;/code&gt; å®ä¾‹æ‰®æ¼”çš„æ˜¯ä¸€ä¸ªâ€œè®¿é—®å·¥å…·â€æˆ–â€œä»£ç†â€çš„è§’è‰²ï¼ŒçœŸæ­£çš„å­˜å‚¨å‘ç”Ÿåœ¨æ‰§è¡Œçº¿ç¨‹ &lt;code&gt;Thread&lt;/code&gt; å¯¹è±¡çš„å†…éƒ¨ã€‚è¿™ç§å…³ç³»å¯ä»¥è¢«ç†è§£ä¸ºä¸€ç§å·§å¦™çš„â€œå§”æ‰˜â€æˆ–â€œå¯„ç”Ÿâ€æ¨¡å‹ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å®ƒä»¬ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;&lt;code&gt;Thread&lt;/code&gt; å¯¹è±¡&lt;/strong&gt;: çº¿ç¨‹çš„å®ä½“ã€‚æ¯ä¸ª &lt;code&gt;Thread&lt;/code&gt; å®ä¾‹å†…éƒ¨éƒ½æœ‰ä¸€ä¸ª &lt;code&gt;ThreadLocal.ThreadLocalMap&lt;/code&gt; ç±»å‹çš„æˆå‘˜å˜é‡ &lt;code&gt;threadLocals&lt;/code&gt;ã€‚è¿™ä¸ª Map æ˜¯æƒ°æ€§åˆ›å»ºçš„ï¼Œåªåœ¨çº¿ç¨‹é¦–æ¬¡éœ€è¦å­˜å‚¨ &lt;code&gt;ThreadLocal&lt;/code&gt; æ•°æ®æ—¶æ‰è¢«å®ä¾‹åŒ–ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;&lt;code&gt;ThreadLocalMap&lt;/code&gt;&lt;/strong&gt;: &lt;code&gt;ThreadLocal&lt;/code&gt; çš„ä¸€ä¸ªå†…éƒ¨é™æ€ç±»ï¼Œæ˜¯ä¸€ä¸ªä¸º &lt;code&gt;ThreadLocal&lt;/code&gt; é‡èº«å®šåˆ¶çš„ã€éé€šç”¨çš„å“ˆå¸Œè¡¨ã€‚å®ƒæ‰æ˜¯çœŸæ­£å­˜å‚¨æ•°æ®çš„å®¹å™¨ï¼Œå…¶æ‰€æœ‰æƒå®Œå…¨å½’å±äº &lt;code&gt;Thread&lt;/code&gt; å¯¹è±¡ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;&lt;code&gt;ThreadLocal&lt;/code&gt; å¯¹è±¡&lt;/strong&gt;: å®ƒåœ¨æ•´ä¸ªä½“ç³»ä¸­æ˜¯â€œå®šä½é”®â€å’Œâ€œè®¿é—®å…¥å£â€ã€‚ä½ çš„ä»£ç é€šè¿‡è°ƒç”¨ &lt;code&gt;ThreadLocal&lt;/code&gt; å®ä¾‹çš„ &lt;code&gt;set()&lt;/code&gt; æˆ– &lt;code&gt;get()&lt;/code&gt; æ–¹æ³•æ¥æ“ä½œæ•°æ®ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;ç”¨æˆ·æ•°æ® (e.g., &lt;code&gt;RequestData&lt;/code&gt;)&lt;/strong&gt;: æœŸæœ›åœ¨çº¿ç¨‹å†…å…±äº«çš„ä¸šåŠ¡æ•°æ®ï¼Œä½œä¸ºâ€œå€¼â€è¢«å­˜å‚¨ã€‚&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;ä¸€æ¬¡ &lt;code&gt;set&lt;/code&gt; æ“ä½œçš„å®Œæ•´è½¨è¿¹&lt;/strong&gt;:&#xA;å½“ &lt;code&gt;CONTEXT.set(data)&lt;/code&gt; è¢«è°ƒç”¨æ—¶ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>æ·±å…¥ C&#43;&#43; çš„éšç§˜è§’è½ï¼šå½»åº•è§£æå‚æ•°ä¾èµ–æŸ¥æ‰¾ (ADL)</title>
      <link>/posts/%E6%B7%B1%E5%85%A5-c&#43;&#43;-%E7%9A%84%E9%9A%90%E7%A7%98%E8%A7%92%E8%90%BD%E5%BD%BB%E5%BA%95%E8%A7%A3%E6%9E%90%E5%8F%82%E6%95%B0%E4%BE%9D%E8%B5%96%E6%9F%A5%E6%89%BE-adl/</link>
      <pubDate>Mon, 23 Jun 2025 00:00:00 +0800</pubDate>
      <guid>/posts/%E6%B7%B1%E5%85%A5-c&#43;&#43;-%E7%9A%84%E9%9A%90%E7%A7%98%E8%A7%92%E8%90%BD%E5%BD%BB%E5%BA%95%E8%A7%A3%E6%9E%90%E5%8F%82%E6%95%B0%E4%BE%9D%E8%B5%96%E6%9F%A5%E6%89%BE-adl/</guid>
      <description>&lt;h1 id=&#34;æ·±å…¥-c-çš„éšç§˜è§’è½å½»åº•è§£æå‚æ•°ä¾èµ–æŸ¥æ‰¾-adl&#34;&gt;æ·±å…¥ C++ çš„éšç§˜è§’è½ï¼šå½»åº•è§£æå‚æ•°ä¾èµ–æŸ¥æ‰¾ (ADL)&lt;/h1&gt;&#xA;&lt;p&gt;åœ¨ C++ çš„ä¸–ç•Œé‡Œï¼Œæœ‰äº›ç‰¹æ€§å¦‚åŒç©ºæ°”ï¼Œæ— å¤„ä¸åœ¨ï¼Œé»˜é»˜åœ°æ”¯æ’‘ç€æˆ‘ä»¬ä»£ç çš„ä¼˜é›…ä¸ç®€æ´ï¼Œä½†æˆ‘ä»¬å´å¾ˆå°‘å»æ¢ç©¶å…¶èƒŒåçš„åŸç†ã€‚&lt;code&gt;std::cout &amp;lt;&amp;lt; &amp;quot;Hello, World!&amp;quot;;&lt;/code&gt; è¿™è¡Œä»£ç å¯¹äºæ¯ä¸ª C++ å¼€å‘è€…æ¥è¯´éƒ½å†ç†Ÿæ‚‰ä¸è¿‡ã€‚ä½†æ˜¯ï¼Œä½ æ˜¯å¦æ›¾åœä¸‹æ¥æƒ³è¿‡ï¼Œ&lt;code&gt;operator&amp;lt;&amp;lt;&lt;/code&gt; å‡½æ•°æ˜æ˜å®šä¹‰åœ¨ &lt;code&gt;std&lt;/code&gt; å‘½åç©ºé—´ä¸­ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨è°ƒç”¨å®ƒæ—¶ï¼Œå¹¶ä¸éœ€è¦å†™æˆ &lt;code&gt;std::operator&amp;lt;&amp;lt;(std::cout, &amp;quot;Hello, World!&amp;quot;);&lt;/code&gt; è¿™ç§å†—é•¿ç¹ççš„å½¢å¼ï¼Ÿ&lt;/p&gt;&#xA;&lt;p&gt;è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œå°±éšè—åœ¨ C++ è¯­è¨€ä¸€ä¸ªå¼ºå¤§è€Œåˆå¾®å¦™çš„æœºåˆ¶ä¸­â€”â€”&lt;strong&gt;å‚æ•°ä¾èµ–æŸ¥æ‰¾ï¼ˆArgument-Dependent Lookupï¼‰&lt;/strong&gt;ï¼Œé€šå¸¸è¢«ç¼©å†™ä¸º &lt;strong&gt;ADL&lt;/strong&gt;ã€‚å®ƒè¿˜æœ‰ä¸€ä¸ªå¹¿ä¸ºäººçŸ¥çš„åå­—ï¼Œå« &lt;strong&gt;Koenig æŸ¥æ‰¾ï¼ˆKoenig Lookupï¼‰&lt;/strong&gt;ï¼Œä»¥å…¶å‘ç°è€… Andrew Koenig çš„åå­—å‘½åã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Scott_Meyers.jpg/500px-Scott_Meyers.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ADL æ˜¯ C++ åç§°æŸ¥æ‰¾è§„åˆ™çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚å®ƒæå¤§åœ°æå‡äº†æ³›å‹ç¼–ç¨‹å’Œæ“ä½œç¬¦é‡è½½çš„å¯ç”¨æ€§ï¼Œä½¿å¾—ä»£ç æ›´ç¬¦åˆäººç±»çš„ç›´è§‰ã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿæ˜¯ä¸€æŸ„åŒåˆƒå‰‘ï¼Œå¦‚æœä¸äº†è§£å…¶å·¥ä½œåŸç†ï¼Œæœ‰æ—¶ä¼šå¯¼è‡´ä¸€äº›ä»¤äººå›°æƒ‘çš„ç¼–è¯‘é”™è¯¯æˆ–æ„æƒ³ä¸åˆ°çš„è¡Œä¸ºã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™ç¯‡è¶…è¿‡5000å­—çš„é•¿æ–‡ï¼Œå°†ä½œä¸ºä¸€ä»½è¯¦å°½çš„æŒ‡å—ï¼Œå¸¦ä½ æ‹¨å¼€ ADL çš„å±‚å±‚è¿·é›¾ã€‚æˆ‘ä»¬å°†ä»æ²¡æœ‰ ADL çš„ä¸–ç•Œå¼€å§‹ï¼Œé€æ­¥æ­ç¤º ADL çš„æ ¸å¿ƒæœºåˆ¶ã€è¯¦ç»†è§„åˆ™ã€ä¸æ¨¡æ¿å’Œâ€œéšè—å‹å…ƒâ€ç­‰ç°ä»£ C++ æŠ€æœ¯çš„ååŒå·¥ä½œï¼Œå¹¶æœ€ç»ˆæ¢è®¨å¦‚ä½•è§„é¿å…¶å¸¦æ¥çš„é™·é˜±ï¼Œç¼–å†™å‡ºæ›´å¥å£®ã€æ›´å¯ç»´æŠ¤çš„ C++ ä»£ç ã€‚&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;ç›®å½•&#34;&gt;ç›®å½•&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;ç¬¬ä¸€ç« ï¼šå‰ ADL æ—¶ä»£ â€”â€” å¸¸è§„çš„æ— é™å®šåç§°æŸ¥æ‰¾&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;1.1 åç§°æŸ¥æ‰¾çš„åŸºæœ¬åŸåˆ™&lt;/li&gt;&#xA;&lt;li&gt;1.2 å‘½åç©ºé—´å¸¦æ¥çš„æŒ‘æˆ˜&lt;/li&gt;&#xA;&lt;li&gt;1.3 æ²¡æœ‰ ADL çš„ä»£ç ä¹‹ç—›&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;ç¬¬äºŒç« ï¼šADL çš„è¯ç”Ÿä¸æ ¸å¿ƒæœºåˆ¶&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;2.1 ADL çš„æ­£å¼å®šä¹‰&lt;/li&gt;&#xA;&lt;li&gt;2.2 å…³é”®æ¦‚å¿µï¼šå…³è”å‘½åç©ºé—´ (Associated Namespaces)&lt;/li&gt;&#xA;&lt;li&gt;2.3 ä¸¤é˜¶æ®µæŸ¥æ‰¾çš„åä½œ&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;ç¬¬ä¸‰ç« ï¼šæ·±å…¥ ADL çš„è§„åˆ™ä¸ç»†èŠ‚&lt;/strong&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“Œæ·±å…¥ C&#43;&#43; å•ä¾‹æ¨¡å¼ï¼šåŸç†ã€å®ç°æ–¹å¼å¯¹æ¯”ä¸ shared_ptr æ¶æ„è®¾è®¡</title>
      <link>/posts/%E6%B7%B1%E5%85%A5-c&#43;&#43;-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94%E4%B8%8E-shared_ptr-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/</link>
      <pubDate>Fri, 06 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/%E6%B7%B1%E5%85%A5-c&#43;&#43;-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94%E4%B8%8E-shared_ptr-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/</guid>
      <description>&lt;h1 id=&#34;æ·±å…¥-c-å•ä¾‹æ¨¡å¼åŸç†å®ç°æ–¹å¼å¯¹æ¯”ä¸-shared_ptr-æ¶æ„è®¾è®¡&#34;&gt;ğŸ“Œæ·±å…¥ C++ å•ä¾‹æ¨¡å¼ï¼šåŸç†ã€å®ç°æ–¹å¼å¯¹æ¯”ä¸ shared_ptr æ¶æ„è®¾è®¡&lt;/h1&gt;&#xA;&lt;h2 id=&#34;1-ä»€ä¹ˆæ˜¯å•ä¾‹åŸºæœ¬è¯­ä¹‰ä¸ä½¿ç”¨åœºæ™¯&#34;&gt;1ï¸âƒ£ ä»€ä¹ˆæ˜¯å•ä¾‹ï¼ŸåŸºæœ¬è¯­ä¹‰ä¸ä½¿ç”¨åœºæ™¯&lt;/h2&gt;&#xA;&lt;p&gt;å•ä¾‹ï¼ˆ[[Singleton]]ï¼‰æ˜¯å¯¹è±¡åˆ›å»ºæ¨¡å¼ä¸­æœ€å¸¸è§çš„ä¸€ç§ï¼Œå…¶ç›®æ ‡æ˜¯ç¡®ä¿ç±»åœ¨ç³»ç»Ÿä¸­&lt;strong&gt;åªæœ‰ä¸€ä¸ªå®ä¾‹&lt;/strong&gt;ï¼Œå¹¶æä¾›å…¨å±€è®¿é—®å…¥å£ã€‚&lt;/p&gt;&#xA;&lt;h3 id=&#34;-å¸¸è§ä½¿ç”¨åœºæ™¯&#34;&gt;âœ… å¸¸è§ä½¿ç”¨åœºæ™¯ï¼š&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;é…ç½®ä¸­å¿ƒï¼ˆConfigManagerï¼‰&lt;/li&gt;&#xA;&lt;li&gt;æ—¥å¿—ç³»ç»Ÿï¼ˆLoggerï¼‰&lt;/li&gt;&#xA;&lt;li&gt;èµ„æºæ± ï¼ˆå¦‚å†…å­˜æ± ã€çº¿ç¨‹æ± ï¼‰&lt;/li&gt;&#xA;&lt;li&gt;è°ƒåº¦å™¨ã€ä¼šè¯ç®¡ç†å™¨&lt;/li&gt;&#xA;&lt;li&gt;æ¡†æ¶æ³¨å†Œè¡¨ã€æ’ä»¶ç³»ç»Ÿ&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2-å•ä¾‹çš„äº”ç§å¸¸è§å®ç°æ–¹å¼&#34;&gt;2ï¸âƒ£ å•ä¾‹çš„äº”ç§å¸¸è§å®ç°æ–¹å¼&lt;/h2&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;æ¨èä½¿ç”¨æ–¹å¼ï¼š&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;æ‡’æ±‰å¼ + çº¿ç¨‹å®‰å…¨ï¼ˆC++11 æ ‡å‡†ï¼‰å±€éƒ¨é™æ€å˜é‡ï¼ˆMeyers Singletonï¼‰&amp;mdash; ã€æ¨èä½¿ç”¨ã€‘&lt;/li&gt;&#xA;&lt;li&gt;shared_ptr å•ä¾‹ï¼ˆæ›´çµæ´»ï¼‰&lt;/li&gt;&#xA;&lt;/ol&gt;&lt;/blockquote&gt;&#xA;&lt;h3 id=&#34;1-é¥¿æ±‰å¼å•ä¾‹early-instantiation&#34;&gt;ğŸƒ1. é¥¿æ±‰å¼å•ä¾‹ï¼ˆEarly Instantiationï¼‰&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Singleton&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; instance() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; inst;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton() {}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton inst;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Singleton Singleton&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;inst;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;âœ… ç®€å•æ˜“æ‡‚ï¼Œçº¿ç¨‹å®‰å…¨ï¼ˆç”± C++ é™æ€å¯¹è±¡åˆå§‹åŒ–ä¿éšœï¼‰&lt;/li&gt;&#xA;&lt;li&gt;âŒ èµ„æºå¯èƒ½æµªè´¹ï¼Œç¨‹åºå¯åŠ¨å°±æ„é€ å®ä¾‹&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;2-æ‡’æ±‰å¼lazy-initialization-éçº¿ç¨‹å®‰å…¨&#34;&gt;ğŸƒ2. æ‡’æ±‰å¼ï¼ˆLazy Initializationï¼‰+ éçº¿ç¨‹å®‰å…¨&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Singleton&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; getInstance() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;instance_)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            instance_ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Singleton;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; instance_;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton() {}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; instance_;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Singleton&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;instance_ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nullptr&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;âœ… ä»…åœ¨éœ€è¦æ—¶åˆ›å»ºå®ä¾‹&lt;/li&gt;&#xA;&lt;li&gt;âŒ éçº¿ç¨‹å®‰å…¨ï¼Œå¤šä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶æ„é€ å¤šä¸ªå®ä¾‹&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;3-æ‡’æ±‰å¼--çº¿ç¨‹å®‰å…¨c11-æ ‡å‡†å±€éƒ¨é™æ€å˜é‡meyers-singleton-æ¨èä½¿ç”¨&#34;&gt;ğŸƒ3. æ‡’æ±‰å¼ + çº¿ç¨‹å®‰å…¨ï¼ˆC++11 æ ‡å‡†ï¼‰å±€éƒ¨é™æ€å˜é‡ï¼ˆMeyers Singletonï¼‰&amp;mdash; ã€æ¨èä½¿ç”¨ã€‘&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Singleton&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; instance() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton inst;  &lt;span style=&#34;color:#75715e&#34;&gt;// C++11 ä¿è¯çº¿ç¨‹å®‰å…¨&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; inst;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton(&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;operator&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;âœ… æ¨èä½¿ç”¨ï¼šçº¿ç¨‹å®‰å…¨ã€æ‡’åŠ è½½ã€æ— é”å¼€é”€&lt;/li&gt;&#xA;&lt;li&gt;âœ… ææ„è‡ªåŠ¨ç®¡ç†ï¼Œä¾èµ– C++ é™æ€å±€éƒ¨å˜é‡ç‰¹æ€§&lt;/li&gt;&#xA;&lt;li&gt;â— ç¦æ­¢æ‹·è´æ„é€ ã€èµ‹å€¼è¿ç®—ï¼Œé˜²æ­¢å®ä¾‹å¤åˆ¶&lt;/li&gt;&#xA;&lt;li&gt;âœ… æœ€ç®€æ´ã€å®‰å…¨ã€é«˜æ•ˆçš„æ–¹å¼ï¼ˆé»˜è®¤æ¨èï¼‰&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;åé¢ä¼šæœ‰è¿™ç§æ–¹å¼çš„è¯­æ³•è¯­ä¹‰ä¸åº•å±‚æºç è§£æ&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“Œ C&#43;&#43;ç±»æˆå‘˜å‡½æ•° static ä¸ const çš„å£°æ˜ä¸å®šä¹‰è§„åˆ™è§£æ</title>
      <link>/posts/-c&#43;&#43;-%E7%B1%BB%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0-static-%E4%B8%8E-const-%E7%9A%84%E5%A3%B0%E6%98%8E%E4%B8%8E%E5%AE%9A%E4%B9%89%E8%A7%84%E5%88%99%E8%A7%A3%E6%9E%90/</link>
      <pubDate>Wed, 04 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/-c&#43;&#43;-%E7%B1%BB%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0-static-%E4%B8%8E-const-%E7%9A%84%E5%A3%B0%E6%98%8E%E4%B8%8E%E5%AE%9A%E4%B9%89%E8%A7%84%E5%88%99%E8%A7%A3%E6%9E%90/</guid>
      <description>&lt;h1 id=&#34;-cç±»æˆå‘˜å‡½æ•°static-ä¸-const-çš„å£°æ˜ä¸å®šä¹‰è§„åˆ™è§£æ&#34;&gt;ğŸ“Œ C++ç±»æˆå‘˜å‡½æ•°ï¼š&lt;code&gt;static&lt;/code&gt; ä¸ &lt;code&gt;const&lt;/code&gt; çš„å£°æ˜ä¸å®šä¹‰è§„åˆ™è§£æ&lt;/h1&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;ä¸ºä»€ä¹ˆå¤´æ–‡ä»¶å£°æ˜è¦å†™ &lt;code&gt;static/const&lt;/code&gt;ï¼Œè€Œå®ç°æ—¶ &lt;code&gt;static&lt;/code&gt; è¦çœç•¥ã€&lt;code&gt;const&lt;/code&gt; å¿…é¡»ä¿ç•™ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;-æ ¸å¿ƒè§„åˆ™å¯¹æ¯”è¡¨&#34;&gt;ğŸ” æ ¸å¿ƒè§„åˆ™å¯¹æ¯”è¡¨&lt;/h2&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;&lt;strong&gt;å…³é”®å­—&lt;/strong&gt;&lt;/th&gt;&#xA;          &lt;th&gt;&lt;strong&gt;å¤´æ–‡ä»¶ï¼ˆ.hï¼‰å£°æ˜&lt;/strong&gt;&lt;/th&gt;&#xA;          &lt;th&gt;&lt;strong&gt;æºæ–‡ä»¶ï¼ˆ.cppï¼‰å®šä¹‰&lt;/strong&gt;&lt;/th&gt;&#xA;          &lt;th&gt;&lt;strong&gt;åº•å±‚åŸå› &lt;/strong&gt;&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;&lt;code&gt;static&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;å¿…é¡»æ˜¾å¼å£°æ˜ï¼š&lt;code&gt;static void func();&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;strong&gt;ç¦æ­¢é‡å¤&lt;/strong&gt;ï¼šç›´æ¥å†™ &lt;code&gt;void Class::func()&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;code&gt;static&lt;/code&gt; æ ‡è¯†å‡½æ•°å½’å±ç±»è€Œéå¯¹è±¡ï¼›å®šä¹‰æ—¶ &lt;code&gt;ClassName::&lt;/code&gt; å·²éšå«ä½œç”¨åŸŸï¼Œå†å†™ &lt;code&gt;static&lt;/code&gt; ä¼šè¢«è§£é‡Šä¸ºæ–‡ä»¶ä½œç”¨åŸŸå‡½æ•°ï¼Œç ´åå°è£…æ€§ã€‚&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;&lt;code&gt;const&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;å¿…é¡»æ˜¾å¼å£°æ˜ï¼š&lt;code&gt;int get() const;&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;strong&gt;å¿…é¡»ä¿ç•™&lt;/strong&gt;ï¼š&lt;code&gt;int Class::get() const&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;code&gt;const&lt;/code&gt; æ˜¯å‡½æ•°ç­¾åçš„ä¸€éƒ¨åˆ†ï¼Œå£°æ˜ä¸å®šä¹‰å¿…é¡»ä¸¥æ ¼ä¸€è‡´ï¼Œå¦åˆ™ç¼–è¯‘å™¨è§†ä¸ºä¸åŒå‡½æ•°ï¼Œå¯¼è‡´é“¾æ¥é”™è¯¯ã€‚&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;-ä¸€static-å…³é”®å­—çš„å£°æ˜ä¸å®šä¹‰åˆ†ç¦»&#34;&gt;âš™ï¸ ä¸€ã€&lt;code&gt;static&lt;/code&gt; å…³é”®å­—çš„å£°æ˜ä¸å®šä¹‰åˆ†ç¦»&lt;/h2&gt;&#xA;&lt;h3 id=&#34;1-å£°æ˜æ—¶éœ€&#34;&gt;1. &lt;strong&gt;å£°æ˜æ—¶éœ€ &lt;code&gt;static&lt;/code&gt;&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;p&gt;åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œ&lt;code&gt;static&lt;/code&gt; æ˜ç¡®æ ‡è¯†è¯¥å‡½æ•°æ˜¯&lt;strong&gt;ç±»çº§åˆ«å…±äº«&lt;/strong&gt;çš„ï¼Œä¸ä¾èµ–å¯¹è±¡å®ä¾‹ï¼ˆæ—  &lt;code&gt;this&lt;/code&gt; æŒ‡é’ˆï¼‰ï¼š&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// MyClass.h&#xA;class MyClass {&#xA;public:&#xA;    static void sharedFunc(); // âœ… å£°æ˜ä¸ºé™æ€&#xA;};&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;2-å®šä¹‰æ—¶ç¦æ­¢&#34;&gt;2. &lt;strong&gt;å®šä¹‰æ—¶ç¦æ­¢ &lt;code&gt;static&lt;/code&gt;&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;p&gt;åœ¨æºæ–‡ä»¶ä¸­ï¼Œ&lt;code&gt;ClassName::&lt;/code&gt; å·²æŒ‡æ˜å‡½æ•°å½’å±ç±»ä½œç”¨åŸŸã€‚è‹¥æ·»åŠ  &lt;code&gt;static&lt;/code&gt;ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ä¼šè¢«ç¼–è¯‘å™¨è§£é‡Šä¸º&lt;strong&gt;æ–‡ä»¶ä½œç”¨åŸŸçš„é™æ€å‡½æ•°&lt;/strong&gt;ï¼ˆä»…å½“å‰ &lt;code&gt;.cpp&lt;/code&gt; å¯è§ï¼‰ï¼›&lt;/li&gt;&#xA;&lt;li&gt;å¯¼è‡´æ— æ³•é€šè¿‡ &lt;code&gt;MyClass::sharedFunc()&lt;/code&gt; å…¨å±€è®¿é—®ï¼Œç ´åå°è£…æ€§ã€‚&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;âœ… æ­£ç¡®å†™æ³•ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“Œå°å¯¹è±¡ä¼˜åŒ–ï¼ˆSmall Object Optimizationï¼‰æ·±åº¦è§£æï¼šC&#43;&#43;å®¹å™¨çš„æ€§èƒ½åˆ©å™¨</title>
      <link>/posts/%E5%B0%8F%E5%AF%B9%E8%B1%A1%E4%BC%98%E5%8C%96small-object-optimization%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90c&#43;&#43;%E5%AE%B9%E5%99%A8%E7%9A%84%E6%80%A7%E8%83%BD%E5%88%A9%E5%99%A8/</link>
      <pubDate>Wed, 04 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/%E5%B0%8F%E5%AF%B9%E8%B1%A1%E4%BC%98%E5%8C%96small-object-optimization%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90c&#43;&#43;%E5%AE%B9%E5%99%A8%E7%9A%84%E6%80%A7%E8%83%BD%E5%88%A9%E5%99%A8/</guid>
      <description>&lt;h1 id=&#34;å°å¯¹è±¡ä¼˜åŒ–small-object-optimizationæ·±åº¦è§£æcå®¹å™¨çš„æ€§èƒ½åˆ©å™¨&#34;&gt;å°å¯¹è±¡ä¼˜åŒ–ï¼ˆSmall Object Optimizationï¼‰æ·±åº¦è§£æï¼šC++å®¹å™¨çš„æ€§èƒ½åˆ©å™¨&lt;/h1&gt;&#xA;&lt;h2 id=&#34;å¼•è¨€&#34;&gt;å¼•è¨€&lt;/h2&gt;&#xA;&lt;p&gt;åœ¨ç°ä»£C++å¼€å‘ä¸­ï¼Œ&lt;code&gt;std::string&lt;/code&gt;å’Œ&lt;code&gt;std::vector&lt;/code&gt;ç­‰æ ‡å‡†å®¹å™¨çš„é«˜æ•ˆæ€§å¾€å¾€è¢«å¼€å‘è€…è§†ä¸ºç†æ‰€å½“ç„¶ã€‚ç„¶è€Œï¼Œè¿™äº›å®¹å™¨åœ¨å¤„ç†å°å¯¹è±¡æ—¶çš„å“è¶Šæ€§èƒ½èƒŒåï¼Œéšè—ç€ä¸€é¡¹é‡è¦çš„ä¼˜åŒ–æŠ€æœ¯â€”â€”&lt;strong&gt;å°å¯¹è±¡ä¼˜åŒ–ï¼ˆSmall Object Optimization, SOOï¼‰&lt;/strong&gt;ã€‚å¯¹äºè¿½æ±‚é«˜æ€§èƒ½çš„C++å¼€å‘è€…è€Œè¨€ï¼Œç†è§£SOOçš„å·¥ä½œåŸç†ä¸ä»…æœ‰åŠ©äºç¼–å†™æ›´é«˜æ•ˆçš„ä»£ç ï¼Œæ›´èƒ½å¯å‘æˆ‘ä»¬åœ¨è®¾è®¡è‡ªå®šä¹‰å®¹å™¨æ—¶é‡‡ç”¨ç±»ä¼¼çš„ä¼˜åŒ–ç­–ç•¥ã€‚&lt;/p&gt;&#xA;&lt;h2 id=&#34;é—®é¢˜èƒŒæ™¯å°å¯¹è±¡çš„æ€§èƒ½å›°å¢ƒ&#34;&gt;é—®é¢˜èƒŒæ™¯ï¼šå°å¯¹è±¡çš„æ€§èƒ½å›°å¢ƒ&lt;/h2&gt;&#xA;&lt;h3 id=&#34;å †åˆ†é…çš„æ€§èƒ½å¼€é”€&#34;&gt;å †åˆ†é…çš„æ€§èƒ½å¼€é”€&lt;/h3&gt;&#xA;&lt;p&gt;å½“æˆ‘ä»¬ä½¿ç”¨&lt;code&gt;std::string&lt;/code&gt;æˆ–&lt;code&gt;std::vector&lt;/code&gt;å­˜å‚¨æ•°æ®æ—¶ï¼Œè¿™äº›å®¹å™¨é€šå¸¸éœ€è¦åŠ¨æ€åˆ†é…å†…å­˜æ¥å­˜å‚¨å®é™…æ•°æ®ã€‚å¯¹äºå¤§å‹å¯¹è±¡ï¼Œå †åˆ†é…çš„å¼€é”€ç›¸å¯¹äºæ•°æ®å¤„ç†æˆæœ¬è€Œè¨€æ˜¯å¯ä»¥æ¥å—çš„ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬é¢‘ç¹å¤„ç†å°å¯¹è±¡æ—¶ï¼Œæƒ…å†µå°±æˆªç„¶ä¸åŒäº†ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;åˆ†é…å™¨å¼€é”€&lt;/strong&gt;ï¼šæ¯æ¬¡è°ƒç”¨&lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;æˆ–&lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt;éƒ½æ¶‰åŠå¤æ‚çš„å†…å­˜ç®¡ç†ç®—æ³•ï¼ŒåŒ…æ‹¬å¯»æ‰¾åˆé€‚å¤§å°çš„å†…å­˜å—ã€ç»´æŠ¤ç©ºé—²åˆ—è¡¨ç­‰&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;å†…å­˜ç¢ç‰‡&lt;/strong&gt;ï¼šå¤§é‡å°å†…å­˜å—çš„åˆ†é…å’Œé‡Šæ”¾ä¼šå¯¼è‡´å †å†…å­˜ç¢ç‰‡åŒ–ï¼Œé™ä½å†…å­˜åˆ©ç”¨ç‡&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;ç¼“å­˜å±€éƒ¨æ€§å·®&lt;/strong&gt;ï¼šå †ä¸Šåˆ†é…çš„å°å¯¹è±¡åœ¨å†…å­˜ä¸­åˆ†å¸ƒæ•£ä¹±ï¼Œè®¿é—®æ—¶ç¼“å­˜å‘½ä¸­ç‡ä½&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆçš„å±€é™&#34;&gt;ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆçš„å±€é™&lt;/h3&gt;&#xA;&lt;p&gt;æ ˆä¸Šåˆ†é…è™½ç„¶é€Ÿåº¦æå¿«ï¼Œä½†å—é™äºç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ— æ³•æ»¡è¶³å®¹å™¨éœ€è¦åŠ¨æ€è°ƒæ•´å¤§å°çš„éœ€æ±‚ã€‚è€Œçº¯ç²¹çš„å †åˆ†é…è™½ç„¶çµæ´»ï¼Œä½†åœ¨å¤„ç†çŸ­å­—ç¬¦ä¸²ã€å°å®¹é‡å‘é‡ç­‰é«˜é¢‘åœºæ™¯æ—¶ï¼Œæ€§èƒ½å¼€é”€å˜å¾—ä¸å¯å¿½è§†ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒé—®é¢˜&lt;/strong&gt;ï¼šå¦‚ä½•ä¸ºéœ€è¦åŠ¨æ€å†…å­˜ç®¡ç†çš„å®¹å™¨ä¼˜åŒ–å°å¯¹è±¡çš„å­˜å‚¨æ€§èƒ½ï¼Ÿ&lt;/p&gt;&#xA;&lt;h2 id=&#34;sooæ ¸å¿ƒåŸç†æ™ºèƒ½çš„ç©ºé—´æ¢æ—¶é—´ç­–ç•¥&#34;&gt;SOOæ ¸å¿ƒåŸç†ï¼šæ™ºèƒ½çš„ç©ºé—´æ¢æ—¶é—´ç­–ç•¥&lt;/h2&gt;&#xA;&lt;h3 id=&#34;åŸºæœ¬æ€æƒ³&#34;&gt;åŸºæœ¬æ€æƒ³&lt;/h3&gt;&#xA;&lt;p&gt;&lt;strong&gt;å°å¯¹è±¡ä¼˜åŒ–çš„æ ¸å¿ƒç­–ç•¥&lt;/strong&gt;æ˜¯åœ¨å®¹å™¨å¯¹è±¡å†…éƒ¨é¢„ç•™ä¸€ä¸ª&lt;strong&gt;å›ºå®šå¤§å°çš„å†…éƒ¨ç¼“å†²åŒºï¼ˆInternal Bufferï¼‰&lt;/strong&gt;ã€‚è¿™ä¸ªç¼“å†²åŒºä½œä¸º&amp;quot;å¿«é€Ÿé€šé“&amp;quot;ï¼Œä¸“é—¨ç”¨äºå­˜å‚¨å°å¯¹è±¡çš„æ•°æ®ã€‚&lt;/p&gt;&#xA;&lt;h3 id=&#34;å¤§å°åˆ¤å®šé€»è¾‘&#34;&gt;å¤§å°åˆ¤å®šé€»è¾‘&lt;/h3&gt;&#xA;&lt;p&gt;SOOçš„å·¥ä½œæœºåˆ¶å¯ä»¥ç”¨ç®€å•çš„æ¡ä»¶åˆ¤æ–­æ¥æè¿°ï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (required_size &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; internal_buffer_size) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// ä½¿ç”¨å†…éƒ¨ç¼“å†²åŒºï¼Œæ— éœ€å †åˆ†é…&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    store_in_internal_buffer(data);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// é€€å›åˆ°ä¼ ç»Ÿçš„å †å†…å­˜åˆ†é…&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    allocate_on_heap(data);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;zero-overheadæŠ½è±¡&#34;&gt;Zero-OverheadæŠ½è±¡&lt;/h3&gt;&#xA;&lt;p&gt;SOOçš„ç²¾å¦™ä¹‹å¤„åœ¨äºå¯¹ä½¿ç”¨è€…å®Œå…¨é€æ˜ã€‚æ— è®ºåº•å±‚ä½¿ç”¨çš„æ˜¯å†…éƒ¨ç¼“å†²åŒºè¿˜æ˜¯å †å†…å­˜ï¼Œå®¹å™¨æä¾›çš„æ¥å£è¡Œä¸ºå®Œå…¨ä¸€è‡´ï¼Œè¿™ä½“ç°äº†C++ä¸­&amp;quot;Zero-Overhead&amp;quot;æŠ½è±¡çš„è®¾è®¡ç†å¿µã€‚&lt;/p&gt;&#xA;&lt;h2 id=&#34;å®ç°å‰–æä»¥stdstringä¸ºä¾‹&#34;&gt;å®ç°å‰–æï¼šä»¥std::stringä¸ºä¾‹&lt;/h2&gt;&#xA;&lt;h3 id=&#34;å…¸å‹æ•°æ®ç»“æ„è®¾è®¡&#34;&gt;å…¸å‹æ•°æ®ç»“æ„è®¾è®¡&lt;/h3&gt;&#xA;&lt;p&gt;ä¸€ä¸ªæ”¯æŒSOOçš„&lt;code&gt;std::string&lt;/code&gt;å†…éƒ¨ç»“æ„å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;optimized_string&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;constexpr&lt;/span&gt; size_t INTERNAL_BUFFER_SIZE &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;union&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// å¤§å¯¹è±¡æ¨¡å¼ï¼šæŒ‡å‘å †å†…å­˜&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; ptr;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            size_t size;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            size_t capacity;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } heap_data;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// å°å¯¹è±¡æ¨¡å¼ï¼šç›´æ¥å­˜å‚¨åœ¨å¯¹è±¡å†…éƒ¨&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; buffer[INTERNAL_BUFFER_SIZE &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]; &lt;span style=&#34;color:#75715e&#34;&gt;// +1 for null terminator&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; remaining_size; &lt;span style=&#34;color:#75715e&#34;&gt;// ç”¨äºæ ‡è¯†å½“å‰æ¨¡å¼å’Œå‰©ä½™ç©ºé—´&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        } stack_data;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    };&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; is_using_soo() &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// é€šè¿‡ç‰¹å®šä½æˆ–å€¼åˆ¤æ–­å½“å‰ä½¿ç”¨çš„å­˜å‚¨æ¨¡å¼&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; stack_data.remaining_size &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; INTERNAL_BUFFER_SIZE;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; is_using_soo() &lt;span style=&#34;color:#f92672&#34;&gt;?&lt;/span&gt; stack_data.buffer : heap_data.ptr;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    size_t &lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; is_using_soo() &lt;span style=&#34;color:#f92672&#34;&gt;?&lt;/span&gt; &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               (INTERNAL_BUFFER_SIZE &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; stack_data.remaining_size) &lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               heap_data.size;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;çŠ¶æ€åŒºåˆ†æœºåˆ¶&#34;&gt;çŠ¶æ€åŒºåˆ†æœºåˆ¶&lt;/h3&gt;&#xA;&lt;p&gt;åŒºåˆ†å½“å‰ä½¿ç”¨å†…éƒ¨ç¼“å†²åŒºè¿˜æ˜¯å †å†…å­˜æ˜¯SOOå®ç°çš„å…³é”®æŠ€æœ¯ç‚¹ã€‚å¸¸è§ç­–ç•¥åŒ…æ‹¬ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“Œæ·±å…¥åˆ†æ =delete ä¸ç§æœ‰åŒ–æ„é€ å’Œææ„å‡½æ•°çš„æœ¬è´¨åŒºåˆ«</title>
      <link>/posts/%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90-delete-%E4%B8%8E%E7%A7%81%E6%9C%89%E5%8C%96%E6%9E%84%E9%80%A0%E5%92%8C%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%8C%BA%E5%88%AB/</link>
      <pubDate>Wed, 04 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90-delete-%E4%B8%8E%E7%A7%81%E6%9C%89%E5%8C%96%E6%9E%84%E9%80%A0%E5%92%8C%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%8C%BA%E5%88%AB/</guid>
      <description>&lt;p&gt;[[c++]] [[delete]] [[æ„é€ å‡½æ•°]] [[ææ„å‡½æ•°]]&lt;/p&gt;&#xA;&lt;h2 id=&#34;æ·±å…¥åˆ†æ-delete-ä¸ç§æœ‰åŒ–æ„é€ å’Œææ„å‡½æ•°çš„æœ¬è´¨åŒºåˆ«&#34;&gt;æ·±å…¥åˆ†æï¼š= delete ä¸ç§æœ‰åŒ–æ„é€ å’Œææ„å‡½æ•°çš„æœ¬è´¨åŒºåˆ«&lt;/h2&gt;&#xA;&lt;p&gt;â€‹&lt;strong&gt;ç›´æ¥ç»“è®º&lt;/strong&gt;â€‹ï¼š&lt;br&gt;&#xA;ç»å¯¹ä¸èƒ½å°†æ„é€ å‡½æ•°å’Œææ„å‡½æ•°å†™ä¸º = delete è¿™ä¼šç›´æ¥ç ´åå•ä¾‹æ¨¡å¼çš„æ ¸å¿ƒåŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†æŠ€æœ¯åˆ†æï¼š&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;ä¸€è¯­æ³•å±‚é¢çš„æ ¹æœ¬å·®å¼‚&#34;&gt;ä¸€ã€è¯­æ³•å±‚é¢çš„æ ¹æœ¬å·®å¼‚&lt;/h3&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;æ–¹æ¡ˆ&lt;/th&gt;&#xA;          &lt;th&gt;å¯è®¿é—®æ€§&lt;/th&gt;&#xA;          &lt;th&gt;ç¼–è¯‘å™¨è¡Œä¸º&lt;/th&gt;&#xA;          &lt;th&gt;å¯¹å•ä¾‹æ¨¡å¼çš„å½±å“&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;â€‹&lt;strong&gt;ç§æœ‰æ„é€ å‡½æ•°&lt;/strong&gt;â€‹&lt;/td&gt;&#xA;          &lt;td&gt;ä»…ç±»å†…éƒ¨å¯è®¿é—®&lt;/td&gt;&#xA;          &lt;td&gt;å…è®¸ç±»å†…éƒ¨ä»£ç æ„é€ å¯¹è±¡&lt;/td&gt;&#xA;          &lt;td&gt;å®ç°å•ä¾‹çš„æ ¸å¿ƒæ‰‹æ®µ&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;code&gt;Singleton() = delete&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;å‡½æ•°è¢«å½»åº•åˆ é™¤&lt;/td&gt;&#xA;          &lt;td&gt;ä»»ä½•æ„é€ å°è¯•ç›´æ¥æŠ¥é”™&lt;/td&gt;&#xA;          &lt;td&gt;å®Œå…¨æ— æ³•åˆ›å»ºå¯¹è±¡&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;æ–¹æ¡ˆ&lt;/th&gt;&#xA;          &lt;th&gt;å¯è®¿é—®æ€§&lt;/th&gt;&#xA;          &lt;th&gt;ç¼–è¯‘å™¨è¡Œä¸º&lt;/th&gt;&#xA;          &lt;th&gt;å¯¹å•ä¾‹æ¨¡å¼çš„å½±å“&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;â€‹&lt;strong&gt;ç§æœ‰ææ„å‡½æ•°&lt;/strong&gt;â€‹&lt;/td&gt;&#xA;          &lt;td&gt;ä»…ç±»å†…éƒ¨å¯è®¿é—®&lt;/td&gt;&#xA;          &lt;td&gt;å…è®¸ç±»å†…éƒ¨ææ„å¯¹è±¡&lt;/td&gt;&#xA;          &lt;td&gt;é˜²æ­¢å¤–éƒ¨deleteæ“ä½œ&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;code&gt;~Singleton() = delete&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;å‡½æ•°è¢«å½»åº•åˆ é™¤&lt;/td&gt;&#xA;          &lt;td&gt;å¯¹è±¡é”€æ¯æ—¶ç›´æ¥æŠ¥é”™&lt;/td&gt;&#xA;          &lt;td&gt;å¯¹è±¡æ— æ³•è¢«æ­£ç¡®é‡Šæ”¾&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;äºŒå…³é”®é”™è¯¯åœºæ™¯æ¼”ç¤º&#34;&gt;äºŒã€å…³é”®é”™è¯¯åœºæ™¯æ¼”ç¤º&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Singleton&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; getInstance() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton instance;  &lt;span style=&#34;color:#75715e&#34;&gt;// è¿™é‡Œä¼šç¼–è¯‘å¤±è´¥ï¼&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; instance;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;    &lt;span style=&#34;color:#75715e&#34;&gt;// æ„é€ å‡½æ•°è¢«åˆ é™¤&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;Singleton() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;   &lt;span style=&#34;color:#75715e&#34;&gt;// ææ„å‡½æ•°è¢«åˆ é™¤&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ç¼–è¯‘å™¨æŠ¥é”™ä¿¡æ¯&#34;&gt;ç¼–è¯‘å™¨æŠ¥é”™ä¿¡æ¯&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;error: use of deleted &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Singleton::Singleton()&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;         static Singleton instance;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            ^&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;note: declared here&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     Singleton&lt;span style=&#34;color:#f92672&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; delete;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     ^~~~~~~~~~~&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;error: use of deleted &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Singleton::~Singleton()&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;         static Singleton instance;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            ^&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;note: declared here&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     ~Singleton&lt;span style=&#34;color:#f92672&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; delete;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     ^&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h3 id=&#34;ä¸‰æŠ€æœ¯åŸç†æ·±åº¦è§£æ&#34;&gt;ä¸‰ã€æŠ€æœ¯åŸç†æ·±åº¦è§£æ&lt;/h3&gt;&#xA;&lt;h4 id=&#34;æ„é€ å‡½æ•°åˆ é™¤çš„è‡´å‘½é—®é¢˜&#34;&gt;æ„é€ å‡½æ•°åˆ é™¤çš„è‡´å‘½é—®é¢˜&lt;/h4&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;é™æ€å±€éƒ¨å˜é‡åˆå§‹åŒ–&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;code&gt;static Singleton instance&lt;/code&gt;æœ¬è´¨éœ€è¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œä½†æ„é€ å‡½æ•°å·²è¢«åˆ é™¤ â†’ ç¼–è¯‘å¤±è´¥&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;å•ä¾‹æ¨¡å¼åŸºç¡€ç ´å&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;åˆ é™¤æ„é€ å‡½æ•°æ„å‘³ç€è¯¥ç±»æ— æ³•è¢«å®ä¾‹åŒ–ï¼Œå®Œå…¨å¤±å»å•ä¾‹å­˜åœ¨çš„æ„ä¹‰&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h4 id=&#34;ææ„å‡½æ•°åˆ é™¤çš„è¿é”ååº”&#34;&gt;ææ„å‡½æ•°åˆ é™¤çš„è¿é”ååº”&lt;/h4&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;é™æ€å˜é‡é”€æ¯é—®é¢˜&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;ç¨‹åºé€€å‡ºæ—¶ï¼Œé™æ€å˜é‡&lt;code&gt;instance&lt;/code&gt;éœ€è¦è°ƒç”¨ææ„å‡½æ•° â†’ å› ææ„å‡½æ•°è¢«åˆ é™¤å¯¼è‡´é“¾æ¥é”™è¯¯&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;å†…å­˜æ³„æ¼ä¼ªè£…è€…&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;å³ä½¿é€šè¿‡ç‰¹æ®Šæ‰‹æ®µæ„é€ å¯¹è±¡ï¼Œä¹Ÿæ— æ³•æ­£å¸¸é‡Šæ”¾èµ„æº â†’ è¿åRAIIåŸåˆ™&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;å››æ­£ç¡®æ–¹æ¡ˆå¯¹æ¯”éªŒè¯&#34;&gt;å››ã€æ­£ç¡®æ–¹æ¡ˆå¯¹æ¯”éªŒè¯&lt;/h3&gt;&#xA;&lt;h4 id=&#34;æ­£ç¡®å®ç°ç§æœ‰æ„é€ ææ„&#34;&gt;æ­£ç¡®å®ç°ï¼ˆç§æœ‰æ„é€ /ææ„ï¼‰&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Singleton&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; getInstance() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Singleton instance;  &lt;span style=&#34;color:#75715e&#34;&gt;// æ­£ç¡®ï¼šè°ƒç”¨ç§æœ‰æ„é€ å‡½æ•°&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; instance;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// ç¦ç”¨æ‹·è´æ“ä½œ&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    Singleton(&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;operator&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; Singleton&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Singleton() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;;   &lt;span style=&#34;color:#75715e&#34;&gt;// æ­£ç¡®ï¼šç§æœ‰é»˜è®¤æ„é€ &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;Singleton() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;;  &lt;span style=&#34;color:#75715e&#34;&gt;// æ­£ç¡®ï¼šç§æœ‰ææ„&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å…³é”®ä¼˜åŠ¿&#34;&gt;å…³é”®ä¼˜åŠ¿&lt;/h4&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;æ„é€ å¯æ§æ€§&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;é€šè¿‡ç§æœ‰æ„é€ å‡½æ•°é™åˆ¶å¯¹è±¡åˆ›å»ºé€”å¾„ï¼Œç¡®ä¿å”¯ä¸€å®ä¾‹&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;ææ„å®‰å…¨æ€§&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;ç§æœ‰ææ„å‡½æ•°é˜»æ­¢å¤–éƒ¨&lt;code&gt;delete&lt;/code&gt;æ“ä½œï¼Œä¾èµ–ç³»ç»Ÿè‡ªåŠ¨é‡Šæ”¾&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;â€‹&lt;strong&gt;èµ„æºç®¡ç†åˆè§„&lt;/strong&gt;â€‹&#xA;&lt;ol&gt;&#xA;&lt;li&gt;é™æ€å±€éƒ¨å˜é‡åœ¨ç¨‹åºç»“æŸæ—¶è‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ï¼Œç¬¦åˆRAIIè§„èŒƒ&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;äº”ç‰¹æ®Šåœºæ™¯æ‰©å±•è®¨è®º&#34;&gt;äº”ã€ç‰¹æ®Šåœºæ™¯æ‰©å±•è®¨è®º&lt;/h3&gt;&#xA;&lt;h4 id=&#34;qå¦‚æœç¡®å®éœ€è¦å®Œå…¨ç¦æ­¢æŸä¸ªç±»çš„å®ä¾‹åŒ–&#34;&gt;Qï¼šå¦‚æœç¡®å®éœ€è¦å®Œå…¨ç¦æ­¢æŸä¸ªç±»çš„å®ä¾‹åŒ–ï¼Ÿ&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UtilityClass&lt;/span&gt; {  &lt;span style=&#34;color:#75715e&#34;&gt;// å·¥å…·ç±»ï¼Œä»…åŒ…å«é™æ€æ–¹æ³•&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    UtilityClass() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;UtilityClass() &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;helper1&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;helper2&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;â€‹&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;â€‹ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“Œæ·±å…¥ç†è§£ C&#43;&#43; ä¸­çš„ std ref å’Œ cref çš„å¼•ç”¨å°è£…æœºåˆ¶</title>
      <link>/posts/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-c&#43;&#43;-%E4%B8%AD%E7%9A%84-std-ref-%E5%92%8C-cref-%E7%9A%84%E5%BC%95%E7%94%A8%E5%B0%81%E8%A3%85%E6%9C%BA%E5%88%B6/</link>
      <pubDate>Wed, 04 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-c&#43;&#43;-%E4%B8%AD%E7%9A%84-std-ref-%E5%92%8C-cref-%E7%9A%84%E5%BC%95%E7%94%A8%E5%B0%81%E8%A3%85%E6%9C%BA%E5%88%B6/</guid>
      <description>&lt;h1 id=&#34;æ·±å…¥ç†è§£-c-ä¸­çš„-std-ref-å’Œ-cref-çš„å¼•ç”¨å°è£…æœºåˆ¶&#34;&gt;æ·±å…¥ç†è§£ C++ ä¸­çš„ std ref å’Œ cref çš„å¼•ç”¨å°è£…æœºåˆ¶&lt;/h1&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;åœ¨ç°ä»£ C++ ç¼–ç¨‹ä¸­ï¼Œ&lt;strong&gt;æŒ‰å€¼ä¼ å‚æ˜¯å¸¸æ€ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬ç¡®å®éœ€è¦ä¼ å¼•ç”¨&lt;/strong&gt;ã€‚å°¤å…¶æ˜¯åœ¨ä½¿ç”¨ &lt;code&gt;std::bind&lt;/code&gt;ã€&lt;code&gt;std::thread&lt;/code&gt;ã€æ ‡å‡†ç®—æ³•ç­‰åœºæ™¯ä¸‹ï¼Œå¦‚æœä¸åŠ æ³¨æ„ï¼ŒåŸæœ¬å¸Œæœ›ä¼ å¼•ç”¨çš„å˜é‡å´è¢«å¤åˆ¶ï¼Œå¯¼è‡´é€»è¾‘å¤±æ•ˆç”šè‡³ç¨‹åºå´©æºƒã€‚&lt;br&gt;&#xA;æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ç†è§£ &lt;code&gt;std::ref&lt;/code&gt; å’Œ &lt;code&gt;std::cref&lt;/code&gt; çš„è®¾è®¡åŸç†ã€ä½¿ç”¨åœºæ™¯ä»¥åŠæ˜“è¸©çš„å‘ã€‚&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;ä¸ºä»€ä¹ˆéœ€è¦å¼•ç”¨å°è£…å™¨&#34;&gt;ä¸ºä»€ä¹ˆéœ€è¦å¼•ç”¨å°è£…å™¨&lt;/h2&gt;&#xA;&lt;p&gt;å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;increment&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; x) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    x&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; a &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;thread&lt;/span&gt; t(increment, a);  &lt;span style=&#34;color:#75715e&#34;&gt;// âŒ ç¼–è¯‘å¤±è´¥&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    t.join();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å¯èƒ½ä»¥ä¸ºæŠŠ &lt;code&gt;a&lt;/code&gt; ä¼ è¿›å»å°±æ˜¯å¼•ç”¨äº†ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚&lt;code&gt;std::thread&lt;/code&gt; é»˜è®¤æŒ‰å€¼å¤åˆ¶å‚æ•°ã€‚å®ƒå°è¯•å°† &lt;code&gt;a&lt;/code&gt; æ‹·è´ä¸€ä»½ä¼ é€’ç»™ &lt;code&gt;increment&lt;/code&gt;ï¼Œè€Œ &lt;code&gt;increment&lt;/code&gt; æœŸæœ›çš„æ˜¯ &lt;code&gt;int&amp;amp;&lt;/code&gt;ï¼Œäºæ˜¯ç¼–è¯‘å™¨æŠ¥é”™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™ä¸ªæ—¶å€™ï¼Œ&lt;code&gt;std::ref(a)&lt;/code&gt; å°±æ´¾ä¸Šäº†ç”¨åœºï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;thread&lt;/span&gt; t(increment, std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;ref(a));  &lt;span style=&#34;color:#75715e&#34;&gt;// âœ… ä¼ å¼•ç”¨æˆåŠŸ&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h2 id=&#34;std-ref-å’Œ-cref-æ˜¯ä»€ä¹ˆ&#34;&gt;std ref å’Œ cref æ˜¯ä»€ä¹ˆ&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;code&gt;std::ref(obj)&lt;/code&gt;ï¼šè¿”å›ä¸€ä¸ª &lt;strong&gt;å¯ä¿®æ”¹å¼•ç”¨&lt;/strong&gt; çš„åŒ…è£…å™¨ã€‚&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;code&gt;std::cref(obj)&lt;/code&gt;ï¼šè¿”å›ä¸€ä¸ª &lt;strong&gt;const å¼•ç”¨&lt;/strong&gt; çš„åŒ…è£…å™¨ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“˜ C&#43;&#43;éä¾µå…¥æ€§ç¼–ç¨‹èŒƒå¼</title>
      <link>/posts/-c&#43;&#43;%E9%9D%9E%E4%BE%B5%E5%85%A5%E6%80%A7%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F/</link>
      <pubDate>Wed, 04 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/-c&#43;&#43;%E9%9D%9E%E4%BE%B5%E5%85%A5%E6%80%A7%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F/</guid>
      <description>&lt;h2 id=&#34;céä¾µå…¥æ€§ç¼–ç¨‹èŒƒå¼&#34;&gt;C++éä¾µå…¥æ€§ç¼–ç¨‹èŒƒå¼&lt;/h2&gt;&#xA;&lt;p&gt;æ–‡æ¡£ç¼–å·: Cpp-Tech-NIP-20250624-Final&lt;/p&gt;&#xA;&lt;h3 id=&#34;1-æ‘˜è¦&#34;&gt;1. æ‘˜è¦&lt;/h3&gt;&#xA;&lt;p&gt;æœ¬æ–‡æ¡£ä¸ºC++å¼€å‘è€…æä¾›äº†ä¸€ä»½å…³äº&lt;strong&gt;éä¾µå…¥æ€§ (Non-Intrusive)&lt;/strong&gt; ç¼–ç¨‹èŒƒå¼çš„å…¨é¢ã€æ·±å…¥çš„æŠ€æœ¯æŒ‡å—ã€‚æ–‡æ¡£ä»æ ¸å¿ƒå®šä¹‰å‡ºå‘ï¼Œç³»ç»Ÿæ€§åœ°é˜è¿°äº†éä¾µå…¥æ€§è®¾è®¡çš„ç†å¿µã€åŸºçŸ³ä¸å…³é”®æŠ€æœ¯ã€‚å†…å®¹æ¶µç›–æ³›å‹ç¼–ç¨‹ã€éæˆå‘˜å‡½æ•°çš„ç­–ç•¥æ€§ä½¿ç”¨ã€æ“ä½œç¬¦é‡è½½çš„å¤–éƒ¨å®ç°æœºåˆ¶ï¼ˆåŒ…æ‹¬å‚æ•°ä¾èµ–æŸ¥æ‰¾ADLä¸å‡½æ•°é‡è½½ï¼‰ï¼Œä»¥åŠç±»å‹èƒå–å’Œæ™ºèƒ½æŒ‡é’ˆç­‰é«˜çº§åº”ç”¨ã€‚æœ¬æ–‡æ—¨åœ¨é€šè¿‡ä¸°å¯Œçš„ä»£ç ç¤ºä¾‹å’Œè¯¦å°½çš„åŸç†å‰–æï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡å¹¶åº”ç”¨éä¾µå…¥æ€§åŸåˆ™ï¼Œä»¥æ„å»ºæ¾è€¦åˆã€é«˜å¤ç”¨æ€§ä¸”æ˜“äºç»´æŠ¤çš„ç°ä»£C++è½¯ä»¶ç³»ç»Ÿã€‚&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;2-ä½•ä¸ºéä¾µå…¥æ€§ç¼–ç¨‹&#34;&gt;2. ä½•ä¸ºéä¾µå…¥æ€§ç¼–ç¨‹ï¼Ÿ&lt;/h3&gt;&#xA;&lt;p&gt;åœ¨C++ä¸­ï¼Œ&lt;strong&gt;éä¾µå…¥æ€§ (Non-Intrusive)&lt;/strong&gt; æ˜¯ä¸€ç§æ ¸å¿ƒè®¾è®¡å“²å­¦ï¼Œå…¶åŸºæœ¬åŸåˆ™æ˜¯ï¼š&lt;strong&gt;åœ¨ä¸ºç°æœ‰ç±»å‹ï¼ˆå¦‚ç±»ã€ç»“æ„ä½“ï¼‰å¢åŠ æ–°åŠŸèƒ½ï¼Œæˆ–ä½¿å…¶ä¸æŸä¸ªæ¡†æ¶ã€åº“åä½œæ—¶ï¼Œæ— éœ€ä¿®æ”¹è¯¥ç±»å‹è‡ªèº«çš„æºä»£ç ã€‚&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;ä¸ä¹‹ç›¸å¯¹çš„æ˜¯â€œä¾µå…¥æ€§ (Intrusive)â€è®¾è®¡ï¼Œå®ƒè¦æ±‚è¢«æ“ä½œçš„ç±»å‹å¿…é¡»åšå‡ºâ€œå†…åœ¨â€çš„æ”¹å˜ï¼Œä¾‹å¦‚ç»§æ‰¿è‡ªç‰¹å®šçš„åŸºç±»ã€åŒ…å«ç‰¹å®šçš„æˆå‘˜å˜é‡æˆ–å®ç°ç‰¹å®šçš„æˆå‘˜å‡½æ•°ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³å¯¹æ¯”:&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;éä¾µå…¥æ€§ (Non-Intrusive):&lt;/strong&gt; åŠŸèƒ½æ˜¯â€œå¤–åŠ â€äºç±»å‹ä¹‹ä¸Šçš„ã€‚å¦‚åŒä¸ºä¸€éƒ¨æ ‡å‡†æ‰‹æœºé…ä¸Šä¸€ä¸ªå¤šåŠŸèƒ½æ‰‹æœºå£³ï¼Œæ‰‹æœºæœ¬èº«æ— éœ€ä»»ä½•æ”¹é€ ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;ä¾µå…¥æ€§ (Intrusive):&lt;/strong&gt; åŠŸèƒ½æ˜¯â€œå†…å»ºâ€åœ¨ç±»å‹ä¹‹ä¸­çš„ã€‚å¦‚åŒæ‰‹æœºåœ¨è®¾è®¡åˆ¶é€ æ—¶å°±å†…ç½®äº†é˜²æ°´å’Œæ— çº¿å……ç”µåŠŸèƒ½ã€‚&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;ç°ä»£C++æ¨å´‡éä¾µå…¥æ€§è®¾è®¡ï¼Œå› ä¸ºå®ƒæå¤§åœ°å¢å¼ºäº†ä»£ç çš„&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;ä¸&lt;strong&gt;å¯å¤ç”¨æ€§&lt;/strong&gt;ï¼Œå…è®¸å¼€å‘è€…å°†æ— æ³•ä¿®æ”¹çš„ç¬¬ä¸‰æ–¹ç±»å‹ã€æ ‡å‡†åº“ç±»å‹æˆ–é—ç•™ä»£ç æ— ç¼é›†æˆåˆ°æ–°ç³»ç»Ÿä¸­ã€‚&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;3-åŸºçŸ³æ³›å‹ç¼–ç¨‹ä¸æ¨¡æ¿&#34;&gt;3. åŸºçŸ³ï¼šæ³›å‹ç¼–ç¨‹ä¸æ¨¡æ¿&lt;/h3&gt;&#xA;&lt;p&gt;C++æ¨¡æ¿æ˜¯éä¾µå…¥æ€§è®¾è®¡çš„åŸºçŸ³ã€‚é€šè¿‡æ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™å‡ºç‹¬ç«‹äºä»»ä½•å…·ä½“ç±»å‹çš„ç®—æ³•å’Œæ•°æ®ç»“æ„ã€‚è¿™äº›ä»£ç ä»…å¯¹ç±»å‹æå‡ºä¸€ç»„â€œæ¦‚å¿µâ€ä¸Šçš„è¦æ±‚ï¼ˆä¾‹å¦‚ï¼Œå¯è¢«å¤åˆ¶ã€å¯è¢«æ¯”è¾ƒï¼‰ï¼Œè€Œéç»“æ„ä¸Šçš„å¼ºåˆ¶è¦æ±‚ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;std::sort&lt;/code&gt; ç®—æ³•ä¾¿æ˜¯éä¾µå…¥æ€§çš„å…¸èŒƒã€‚å®ƒå¯ä»¥å¯¹ä»»ä½•æ»¡è¶³å…¶è¦æ±‚çš„è¿­ä»£å™¨èŒƒå›´è¿›è¡Œæ’åºï¼Œè€Œå…ƒç´ ç±»å‹æœ¬èº«å®Œå…¨æ— éœ€çŸ¥æ™“æ’åºç®—æ³•çš„å­˜åœ¨ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ï¼šä¸ºä¸€ä¸ªæ— æ³•ä¿®æ”¹çš„ &lt;code&gt;Product&lt;/code&gt; ç±»æä¾›æ’åºèƒ½åŠ›&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// third_party_library.h - æºç æ— æ³•ä¿®æ”¹&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#pragma once&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Product&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Product(std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;string id, &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; price) &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; id_(std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;move(id)), price_(price) {}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;string&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; getId() &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; id_; }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;getPrice&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; price_; } &lt;span style=&#34;color:#75715e&#34;&gt;// æä¾›ä¸€ä¸ªç¨³å®šçš„å…¬å…±æ¥å£&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;string id_;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; price_;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬æ— æ³•ä¿®æ”¹ &lt;code&gt;Product&lt;/code&gt; ç±»ï¼Œä½†æˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨ä¸ºå…¶æ·»åŠ æ¯”è¾ƒåŠŸèƒ½ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“˜ PingPong Buffer è®¾è®¡æ–‡æ¡£</title>
      <link>/posts/-pingpong-buffer-%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3/</link>
      <pubDate>Wed, 04 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/-pingpong-buffer-%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3/</guid>
      <description>&lt;h1 id=&#34;-pingpong-buffer-è®¾è®¡æ–‡æ¡£&#34;&gt;ğŸ“˜ PingPong Buffer è®¾è®¡æ–‡æ¡£&lt;/h1&gt;&#xA;&lt;h2 id=&#34;ä¸€è®¾è®¡ç›®æ ‡&#34;&gt;ä¸€ã€è®¾è®¡ç›®æ ‡&lt;/h2&gt;&#xA;&lt;p&gt;PingPongBufferï¼ˆåŒç¼“å†²åŒºï¼‰æ—¨åœ¨è§£å†³ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…å¼‚æ­¥å¤„ç†æ•°æ®æ—¶çš„æ•°æ®ä¸€è‡´æ€§ä¸æ€§èƒ½é—®é¢˜ã€‚é€‚ç”¨äº&lt;strong&gt;å®æ—¶æ•°æ®ä¼ è¾“&lt;/strong&gt;ã€&lt;strong&gt;ä¸­æ–­é‡‡é›†&lt;/strong&gt;ã€&lt;strong&gt;å¤šçº¿ç¨‹é€šä¿¡&lt;/strong&gt;ç­‰åœºæ™¯ï¼Œå…·å¤‡å¦‚ä¸‹æ ¸å¿ƒç›®æ ‡ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ä¿è¯&lt;strong&gt;è¯»å†™äº’ä¸å¹²æ‰°&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;æ”¯æŒ&lt;strong&gt;é«˜ååã€ä½å»¶è¿Ÿ&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;èƒ½å¤Ÿåº”å¯¹&lt;strong&gt;é€Ÿç‡ä¸åŒ¹é…&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;å¯ç»´æŠ¤ã€å¯è°ƒè¯•ã€å¯æ‰©å±•&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;äºŒæ ¸å¿ƒè®¾è®¡ç†å¿µ&#34;&gt;äºŒã€æ ¸å¿ƒè®¾è®¡ç†å¿µ&lt;/h2&gt;&#xA;&lt;h3 id=&#34;21-åŒç¼“å†²ç»“æ„&#34;&gt;2.1 åŒç¼“å†²ç»“æ„&lt;/h3&gt;&#xA;&lt;p&gt;ä½¿ç”¨ä¸¤ä¸ªå›ºå®šå¤§å°çš„ç¼“å†²åŒº &lt;code&gt;buffer[0]&lt;/code&gt; å’Œ &lt;code&gt;buffer[1]&lt;/code&gt;ï¼Œé€šè¿‡ç´¢å¼•æˆ–æ ‡å¿—ä½æ§åˆ¶è¯»å†™æŒ‡å‘ä¸åŒç¼“å†²åŒºã€‚&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;Buffer Index&lt;/th&gt;&#xA;          &lt;th&gt;ç”¨é€”&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;code&gt;write_idx&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;å½“å‰å†™å…¥ç¼“å†²åŒºç´¢å¼•&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;code&gt;read_idx&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td&gt;å½“å‰è¯»å–ç¼“å†²åŒºç´¢å¼•&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;é€šè¿‡åŸå­æ“ä½œï¼ˆæˆ–é”ï¼‰åˆ‡æ¢è¿™ä¸¤ä¸ªç¼“å†²åŒºï¼Œå®ç°æ— é”æˆ–ä½é”ç«äº‰çš„æ•°æ®äº¤æ›¿ä½¿ç”¨ã€‚&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;22-åŸå­åˆ‡æ¢æœºåˆ¶&#34;&gt;2.2 åŸå­åˆ‡æ¢æœºåˆ¶&lt;/h3&gt;&#xA;&lt;p&gt;é‡‡ç”¨ &lt;code&gt;std::atomic&amp;lt;int&amp;gt;&lt;/code&gt; ç´¢å¼•å˜é‡é…åˆ &lt;code&gt;memory_order_release/acquire&lt;/code&gt; ä¿è¯è·¨çº¿ç¨‹æˆ–ä¸­æ–­çš„æ•°æ®å¯è§æ€§ä¸ä¸€è‡´æ€§ã€‚&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;write_idx.store(new_index, std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;memory_order_release);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;read_idx.store(old_write_index, std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;memory_order_acquire);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h3 id=&#34;23-æ•°æ®å®Œæ•´æ€§æ§åˆ¶&#34;&gt;2.3 æ•°æ®å®Œæ•´æ€§æ§åˆ¶&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ä½¿ç”¨ &lt;code&gt;BeginWrite/EndWrite&lt;/code&gt; å’Œ &lt;code&gt;BeginRead/EndRead&lt;/code&gt; ä¿éšœå¸§çº§æ•°æ®å®Œæ•´æ€§&lt;/li&gt;&#xA;&lt;li&gt;ä½¿ç”¨ &lt;code&gt;frame_valid&lt;/code&gt; æ ‡å¿—ä½æ ‡è¯† buffer æ˜¯å¦å†™æ»¡å¯è¯»&lt;/li&gt;&#xA;&lt;li&gt;æ”¯æŒ &lt;code&gt;frame_id&lt;/code&gt;ã€æ—¶é—´æˆ³ç­‰é™„åŠ ä¿¡æ¯è¿½è¸ªæ•°æ®æ¥æºåŠä¸€è‡´æ€§&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;ä¸‰å¼‚å¸¸ä¸è¿‡è½½å¤„ç†æœºåˆ¶&#34;&gt;ä¸‰ã€å¼‚å¸¸ä¸è¿‡è½½å¤„ç†æœºåˆ¶&lt;/h2&gt;&#xA;&lt;h3 id=&#34;31-ç”Ÿäº§è€…å¿«äºæ¶ˆè´¹è€…overrun&#34;&gt;3.1 ç”Ÿäº§è€…å¿«äºæ¶ˆè´¹è€…ï¼ˆoverrunï¼‰&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;å½“å‰å†™ buffer flip åï¼Œè‹¥æ—§ buffer å°šæœªæ¶ˆè´¹ â†’ è®°å½•è¦†ç›–è¡Œä¸º&lt;/li&gt;&#xA;&lt;li&gt;å¼•å…¥ &lt;code&gt;overrun_counter&lt;/code&gt;ï¼Œå¹¶æä¾›å¼‚å¸¸æç¤ºæ¥å£&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;buffer_valid[read_idx]) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    overrun_counter&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;32-å¼‚å¸¸å¸§æ£€æµ‹&#34;&gt;3.2 å¼‚å¸¸å¸§æ£€æµ‹&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;frame_id&lt;/code&gt; ä¸è¿ç»­æ—¶æç¤ºä¸¢å¸§&lt;/li&gt;&#xA;&lt;li&gt;æ—¶é—´æˆ³å·®è·è¿‡å¤§å¯è®¤ä¸ºæ•°æ®é˜»å¡&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;å››çŠ¶æ€é‡ç½®ä¸é…ç½®å˜æ›´&#34;&gt;å››ã€çŠ¶æ€é‡ç½®ä¸é…ç½®å˜æ›´&lt;/h2&gt;&#xA;&lt;p&gt;æ”¯æŒ &lt;code&gt;reset()&lt;/code&gt; æ“ä½œï¼Œåœ¨åº•å±‚ç¡¬ä»¶é‡é…ç½®ï¼ˆå¦‚åˆ†è¾¨ç‡ã€é¢‘ç‡ï¼‰æˆ–ç³»ç»Ÿçƒ­åˆ‡æ¢åœºæ™¯ä¸­æ¸…ç©ºç¼“å†²çŠ¶æ€ï¼Œé˜²æ­¢æ—§æ•°æ®å¹²æ‰°ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>ğŸ“˜ ç°ä»£C&#43;&#43;ä¸­ç±»å‹æ“¦é™¤æŠ€æœ¯çš„å…¨é¢è§£æï¼šåŸç†ã€æ¨¡å¼ä¸æ€§èƒ½</title>
      <link>/posts/-%E7%8E%B0%E4%BB%A3c&#43;&#43;%E4%B8%AD%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4%E6%8A%80%E6%9C%AF%E7%9A%84%E5%85%A8%E9%9D%A2%E8%A7%A3%E6%9E%90%E5%8E%9F%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8E%E6%80%A7%E8%83%BD/</link>
      <pubDate>Wed, 04 Jun 2025 02:30:00 +0800</pubDate>
      <guid>/posts/-%E7%8E%B0%E4%BB%A3c&#43;&#43;%E4%B8%AD%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4%E6%8A%80%E6%9C%AF%E7%9A%84%E5%85%A8%E9%9D%A2%E8%A7%A3%E6%9E%90%E5%8E%9F%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8E%E6%80%A7%E8%83%BD/</guid>
      <description>&lt;h1 id=&#34;ç°ä»£cä¸­ç±»å‹æ“¦é™¤æŠ€æœ¯çš„å…¨é¢è§£æåŸç†æ¨¡å¼ä¸æ€§èƒ½&#34;&gt;ğŸ“˜ç°ä»£C++ä¸­ç±»å‹æ“¦é™¤æŠ€æœ¯çš„å…¨é¢è§£æï¼šåŸç†ã€æ¨¡å¼ä¸æ€§èƒ½&lt;/h1&gt;&#xA;&lt;h2 id=&#34;ç¬¬ä¸€éƒ¨åˆ†ç±»å‹æ“¦é™¤çš„èµ·æºè¿æ¥é™æ€ä¸åŠ¨æ€å¤šæ€&#34;&gt;ç¬¬ä¸€éƒ¨åˆ†ï¼šç±»å‹æ“¦é™¤çš„èµ·æºï¼šè¿æ¥é™æ€ä¸åŠ¨æ€å¤šæ€&lt;/h2&gt;&#xA;&lt;p&gt;æœ¬éƒ¨åˆ†æ—¨åœ¨é˜æ˜[[ç±»å‹æ“¦é™¤]]æŠ€æœ¯æ‰€è§£å†³çš„æ ¹æœ¬é—®é¢˜ï¼Œå°†å…¶å®šä½ä¸ºä¸€ç§æ—¨åœ¨å…‹æœä¼ ç»ŸC++[[å¤šæ€]]æŠ€æœ¯å±€é™æ€§çš„é«˜çº§[[è§£å†³æ–¹æ¡ˆ]]ã€‚&lt;/p&gt;&#xA;&lt;h3 id=&#34;11-cä¸­çš„å¤šæ€å›°å¢ƒ&#34;&gt;1.1 C++ä¸­çš„å¤šæ€å›°å¢ƒ&lt;/h3&gt;&#xA;&lt;p&gt;åœ¨C++ä¸­ï¼Œ[[å¤šæ€]]æ€§â€”â€”å³&lt;strong&gt;ä»¥ç»Ÿä¸€æ¥å£å¤„ç†ä¸åŒç±»å‹å¯¹è±¡çš„èƒ½åŠ›&lt;/strong&gt;â€”â€”æ˜¯æ„å»ºçµæ´»ã€å¯æ‰©å±•è½¯ä»¶ç³»ç»Ÿçš„åŸºçŸ³ã€‚ç„¶è€Œï¼Œå®ç°å¤šæ€çš„ä¼ ç»Ÿæ–¹æ³•å„è‡ªå­˜åœ¨å›ºæœ‰çš„å±€é™æ€§ï¼Œè¿™ä¸ºç±»å‹æ“¦é™¤æŠ€æœ¯çš„å‡ºç°æä¾›äº†åŠ¨æœºã€‚&lt;/p&gt;&#xA;&lt;h4 id=&#34;void--æ–¹æ³•-cé£æ ¼å¤šæ€&#34;&gt;&lt;code&gt;void *&lt;/code&gt; æ–¹æ³• (Cé£æ ¼å¤šæ€)&lt;/h4&gt;&#xA;&lt;p&gt;æœ€åŸå§‹çš„ç±»å‹æ“¦é™¤å½¢å¼æ˜¯é€šè¿‡ &lt;code&gt;void *&lt;/code&gt; æŒ‡é’ˆå®ç°çš„ã€‚Cæ ‡å‡†åº“ä¸­çš„ &lt;code&gt;qsort&lt;/code&gt; å‡½æ•°ä¾¿æ˜¯å…¸å‹èŒƒä¾‹ï¼Œå®ƒèƒ½å¤Ÿå¯¹ä»»æ„ç±»å‹çš„æ•°ç»„è¿›è¡Œæ’åºï¼Œæ­£æ˜¯å› ä¸ºå®ƒé€šè¿‡ &lt;code&gt;void *&lt;/code&gt; æ¥å—æ•°æ®ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™ç§æ–¹æ³•çš„æœ¬è´¨åœ¨äºå°†ä»»ä½•ç±»å‹çš„æŒ‡é’ˆè½¬æ¢ä¸ºä¸€ä¸ªé€šç”¨çš„ã€æ— ç±»å‹çš„æŒ‡é’ˆï¼Œä»è€Œâ€œæ“¦é™¤â€äº†ç¼–è¯‘æ—¶çš„ç±»å‹ä¿¡æ¯ã€‚ç„¶è€Œï¼Œè¿™ç§æè‡´çš„çµæ´»æ€§å¸¦æ¥äº†&lt;strong&gt;å·¨å¤§çš„ä»£ä»·&lt;/strong&gt;ï¼š&lt;strong&gt;ç±»å‹å®‰å…¨çš„å®Œå…¨ä¸§å¤±&lt;/strong&gt;ã€‚ç¨‹åºå‘˜å¿…é¡»æ‰¿æ‹…å°† &lt;code&gt;void *&lt;/code&gt; æ‰‹åŠ¨ &lt;code&gt;reinterpret_cast&lt;/code&gt; å›åŸå§‹æ­£ç¡®ç±»å‹çš„è´£ä»»ã€‚è¿™æ˜¯ä¸€ä¸ªææ˜“å‡ºé”™çš„è¿‡ç¨‹ï¼Œä¸€æ—¦ç±»å‹ä¸åŒ¹é…ï¼Œä¾¿ä¼šç«‹å³å¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼ˆ[[Undefined Behavior]], UBï¼‰ã€‚æ­¤å¤–ï¼Œç”±äº[[ç¼–è¯‘å™¨]]åœ¨å¤„ç† &lt;code&gt;void *&lt;/code&gt; æ—¶å¯¹åº•å±‚æ•°æ®ç±»å‹ä¸€æ— æ‰€çŸ¥ï¼Œå®ƒ&lt;strong&gt;æ— æ³•è¿›è¡Œä»»ä½•æœ‰æ„ä¹‰çš„ç±»å‹é©±åŠ¨ä¼˜åŒ–&lt;/strong&gt;ï¼Œå¯èƒ½å¯¼è‡´&lt;strong&gt;æ€§èƒ½ä¸‹é™&lt;/strong&gt;ã€‚&lt;/p&gt;&#xA;&lt;h4 id=&#34;é¢å‘å¯¹è±¡å¤šæ€-ç»§æ‰¿ä¸è™šå‡½æ•°&#34;&gt;é¢å‘å¯¹è±¡å¤šæ€ (ç»§æ‰¿ä¸è™šå‡½æ•°)&lt;/h4&gt;&#xA;&lt;p&gt;é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰æä¾›äº†C++ä¸­å®ç°è¿è¡Œæ—¶å¤šæ€çš„æƒ¯ç”¨æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¾èµ–äºä¸€ä¸ªåŒ…å«è™šå‡½æ•°ï¼ˆvirtual functionsï¼‰çš„å…¬å…±åŸºç±»ï¼Œå„ä¸ªå…·ä½“ç±»é€šè¿‡ç»§æ‰¿è¯¥åŸºç±»å¹¶é‡å†™è™šå‡½æ•°æ¥å®ç°å¤šæ€è¡Œä¸ºã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™ç§æ¨¡å¼çš„ä¸»è¦å±€é™æ€§åœ¨äºå…¶ &lt;strong&gt;ä¾µå…¥æ€§ï¼ˆintrusiveï¼‰&lt;/strong&gt;ã€‚ä»»ä½•å¸Œæœ›ä»¥å¤šæ€æ–¹å¼ä½¿ç”¨çš„å…·ä½“ç±»å‹éƒ½ &lt;strong&gt;å¿…é¡»&lt;/strong&gt; å…¬å¼€ç»§æ‰¿è‡ªè¿™ä¸ªå…±åŒçš„åŸºç±»ã€‚è¿™åœ¨è®¸å¤šåœºæ™¯ä¸‹æ˜¯ä¸å¯è¡Œæˆ–ä¸ç†æƒ³çš„ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬æ— æ³•ä¿®æ”¹[[æ ‡å‡†åº“ç±»å‹]]ï¼ˆå¦‚ &lt;code&gt;std::string&lt;/code&gt;ï¼‰ã€[[å†…å»ºç±»å‹]]ï¼ˆå¦‚ &lt;code&gt;int&lt;/code&gt;ï¼‰æˆ–æ¥è‡ªç¬¬ä¸‰æ–¹åº“çš„ç±»å‹ï¼Œè®©å®ƒä»¬å»ç»§æ‰¿æˆ‘ä»¬çš„åŸºç±»ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æ­¤å¤–ï¼Œè¿™ç§æ–¹æ³•å­˜åœ¨â€œç±»å‹ä¸¢å¤±â€é—®é¢˜ã€‚å½“ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡é€šè¿‡åŸºç±»å¼•ç”¨æˆ–æŒ‡é’ˆä¼ é€’æ—¶ï¼Œç¼–è¯‘å™¨åœ¨å‡½æ•°å†…éƒ¨å°±â€œä¸¢å¤±â€äº†è¯¥å¯¹è±¡çš„çœŸå®ç±»å‹ä¿¡æ¯ã€‚ä»ç¼–è¯‘å™¨çš„è§’åº¦çœ‹ï¼Œå®ƒåªçŸ¥é“è¿™æ˜¯ä¸€ä¸ªåŸºç±»å¯¹è±¡ã€‚è¿™ä½¿å¾—æŸäº›æ“ä½œå˜å¾—å¼‚å¸¸å›°éš¾ï¼Œå°¤å…¶æ˜¯å¤šæ€å¤åˆ¶ã€‚è‹¥è¦å¤åˆ¶ä¸€ä¸ªåŸºç±»æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ï¼Œå¿…é¡»ä¾èµ–äºé¢å¤–çš„æ ·æ¿ä»£ç ï¼Œå¦‚ &lt;code&gt;clone()&lt;/code&gt; è™šå‡½æ•°æ¨¡å¼ï¼Œå› ä¸ºæ— æ³•ç›´æ¥è°ƒç”¨æ´¾ç”Ÿç±»çš„æ‹·è´æ„é€ å‡½æ•°ã€‚è¿™ç§è®¾è®¡è¿˜ä¼šåœ¨æœ¬ä¸ç›¸å…³çš„ç±»å‹ä¹‹é—´å»ºç«‹ç´§å¯†çš„è€¦åˆå…³ç³»ï¼Œè¿«ä½¿å®ƒä»¬éµä»åŒä¸€ä¸ªåŸºç±»æ¥å£ã€‚&lt;/p&gt;&#xA;&lt;h4 id=&#34;é™æ€å¤šæ€-æ¨¡æ¿&#34;&gt;é™æ€å¤šæ€ (æ¨¡æ¿)&lt;/h4&gt;&#xA;&lt;p&gt;ä¸è¿è¡Œæ—¶å¤šæ€ç›¸å¯¹çš„æ˜¯é™æ€å¤šæ€ï¼Œä¸»è¦é€šè¿‡C++[[æ¨¡æ¿]]ï¼ˆ[[Templates]]ï¼‰å®ç°ã€‚æ¨¡æ¿åœ¨ç¼–è¯‘æœŸä¸ºæ¯ä¸ªä½¿ç”¨çš„å…·ä½“ç±»å‹ç”Ÿæˆç‰¹åŒ–ä»£ç ï¼Œä»è€Œä¿ç•™äº†å®Œæ•´çš„ç±»å‹ä¿¡æ¯ã€‚è¿™ä½¿å¾—ç¼–è¯‘å™¨èƒ½å¤Ÿæ‰§è¡Œæ·±åº¦ä¼˜åŒ–ï¼Œå¦‚å‡½æ•°[[å†…è”]]ï¼Œä»è€Œè·å¾—&lt;strong&gt;æé«˜çš„æ€§èƒ½&lt;/strong&gt;ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ç„¶è€Œï¼Œæ¨¡æ¿çš„å¼ºå¤§èƒ½åŠ›ä¹Ÿä¼´éšç€ä¸€ä¸ªæ ¸å¿ƒé™åˆ¶ï¼šæ— æ³•åˆ›å»º [[å¼‚è´¨å®¹å™¨]]ï¼ˆheterogeneous collectionsï¼‰ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;std::vector&amp;lt;MyClass&amp;lt;int&amp;gt;&amp;gt;&lt;/code&gt; å’Œ &lt;code&gt;std::vector&amp;lt;MyClass&amp;lt;double&amp;gt;&amp;gt;&lt;/code&gt; æ˜¯ä¸¤ç§å®Œå…¨ä¸åŒä¸”ä¸ç›¸å…³çš„ç±»å‹ï¼Œå®ƒä»¬ä¸èƒ½è¢«å­˜å‚¨åœ¨åŒä¸€ä¸ªå®¹å™¨ä¸­ã€‚ä¸ºäº†å¤„ç†ä¸åŒç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šå¯¹æ¨¡æ¿è¿›è¡Œâ€œå•æ€åŒ–â€ï¼ˆmonomorphizationï¼‰ï¼Œä¸ºæ¯ä¸ªç±»å‹å‚æ•°ç”Ÿæˆä¸€ä»½ç‹¬ç«‹çš„ä»£ç å®ä¾‹ï¼Œè¿™å¯èƒ½å¯¼è‡´æœ€ç»ˆäºŒè¿›åˆ¶æ–‡ä»¶ä½“ç§¯è†¨èƒ€ï¼Œå³æ‰€è°“çš„â€œä»£ç è†¨èƒ€â€ï¼ˆcode bloatï¼‰ã€‚&lt;/p&gt;&#xA;&lt;h3 id=&#34;12-åœ¨ç°ä»£cè¯­å¢ƒä¸‹å®šä¹‰ç±»å‹æ“¦é™¤&#34;&gt;1.2 åœ¨ç°ä»£C++è¯­å¢ƒä¸‹å®šä¹‰ç±»å‹æ“¦é™¤&lt;/h3&gt;&#xA;&lt;p&gt;â€œç±»å‹æ“¦é™¤â€è¿™ä¸€æœ¯è¯­æœ¬èº«åœ¨C++ç¤¾åŒºä¸­å­˜åœ¨ä¸€å®šçš„æ¨¡ç³Šæ€§ï¼Œå®ƒå¹¶éä¸€ä¸ªå•ä¸€ã€è¢«ä¸¥æ ¼å®šä¹‰çš„è¯­è¨€ç‰¹æ€§ï¼Œè€Œæ˜¯ä¸€ç³»åˆ—æŠ€æœ¯å’Œæ¨¡å¼çš„ç»Ÿç§° 1ã€‚å¹¿ä¹‰ä¸Šï¼Œ&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;void *&lt;/code&gt; å’Œç»§æ‰¿éƒ½å¯ä»¥è¢«è§†ä¸ºæŸç§å½¢å¼çš„ç±»å‹æ“¦é™¤ã€‚ç„¶è€Œï¼Œåœ¨ç°ä»£C++çš„è®¨è®ºä¸­ï¼Œå°¤å…¶æ˜¯åœ¨[[Sean Parent]]å’Œ[[Klaus Iglberger]]ç­‰ä¸“å®¶çš„å½±å“ä¸‹ï¼Œè¯¥æœ¯è¯­é€šå¸¸æŒ‡ä»£ä¸€ç§æ›´å…·ä½“ã€æ›´å¼ºå¤§çš„è®¾è®¡æ¨¡å¼ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æŠ¥å‘Šçš„æ ¸å¿ƒç„¦ç‚¹ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒåŸåˆ™&lt;/strong&gt;ï¼šç°ä»£C++ç±»å‹æ“¦é™¤æ˜¯ä¸€ç§æ—¨åœ¨ &lt;strong&gt;å°†æ¥å£ä¸å…¶å®ç°è§£è€¦&lt;/strong&gt; çš„æŠ€æœ¯ï¼Œå®ƒä¸º &lt;strong&gt;ä¸ç›¸å…³çš„ç±»å‹&lt;/strong&gt; æä¾›äº† &lt;strong&gt;éä¾µå…¥å¼&lt;/strong&gt; çš„ &lt;strong&gt;è¿è¡Œæ—¶å¤šæ€&lt;/strong&gt;ï¼ŒåŒæ—¶ä¿æŒäº† &lt;strong&gt;å€¼è¯­ä¹‰ï¼ˆvalue semanticsï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>asan</title>
      <link>/posts/asan/</link>
      <pubDate>Thu, 01 Jun 2023 09:30:01 +0800</pubDate>
      <guid>/posts/asan/</guid>
      <description>&lt;script src=&#34;https://gist.github.com/luyoungcn/b544977db493d7016f87ae60c51cc4cd.js&#34;&gt;&lt;/script&gt;</description>
    </item>
    <item>
      <title>C&#43;&#43; å‰å‘å£°æ˜ä¸æŒ‡é’ˆä½¿ç”¨æŒ‡å—</title>
      <link>/posts/c&#43;&#43;-%E5%89%8D%E5%90%91%E5%A3%B0%E6%98%8E%E4%B8%8E%E6%8C%87%E9%92%88%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</link>
      <pubDate>Thu, 01 Jan 1970 00:00:00 +0800</pubDate>
      <guid>/posts/c&#43;&#43;-%E5%89%8D%E5%90%91%E5%A3%B0%E6%98%8E%E4%B8%8E%E6%8C%87%E9%92%88%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;c++ ä¸ºä»€ä¹ˆæœ‰äº›ç±»å±æ€§ä½¿ç”¨æ™®é€šçš„æŒ‡é’ˆå®šä¹‰ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ&#xA;&lt;code&gt;DogClass *ptr;&lt;/code&gt; è€Œä¸æ˜¯ &lt;code&gt;std::unique_ptr&amp;lt;DogClass&amp;gt; ptr&lt;/code&gt;;&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h1 id=&#34;c-å‰å‘å£°æ˜ä¸æŒ‡é’ˆä½¿ç”¨æŒ‡å—&#34;&gt;C++ å‰å‘å£°æ˜ä¸æŒ‡é’ˆä½¿ç”¨æŒ‡å—&lt;/h1&gt;&#xA;&lt;h2 id=&#34;å‰å‘å£°æ˜ä¸ä¸å®Œæ•´ç±»å‹&#34;&gt;å‰å‘å£°æ˜ä¸ä¸å®Œæ•´ç±»å‹&lt;/h2&gt;&#xA;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œ&lt;strong&gt;å‰å‘å£°æ˜&lt;/strong&gt;ï¼ˆForward Declarationï¼‰å…è®¸æˆ‘ä»¬åœ¨ä¸åŒ…å«å®Œæ•´ç±»å®šä¹‰çš„æƒ…å†µä¸‹å¼•ç”¨ä¸€ä¸ªç±»ã€‚è¿™å¯¹äºå‡å°‘ç¼–è¯‘ä¾èµ–å’Œè§£å†³å¾ªç¯ä¾èµ–é—®é¢˜éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å‰å‘å£°æ˜ç¤ºä¾‹&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MyClass&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// åªå£°æ˜å­˜åœ¨æ€§ï¼Œä¸æä¾›å®šä¹‰&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ—¶ï¼Œ&lt;code&gt;MyClass&lt;/code&gt; è¢«ç§°ä¸º&lt;strong&gt;ä¸å®Œæ•´ç±»å‹&lt;/strong&gt;ï¼ˆIncomplete Typeï¼‰ï¼Œå› ä¸ºç¼–è¯‘å™¨åªçŸ¥é“è¯¥ç±»å­˜åœ¨ï¼Œä½†ä¸çŸ¥é“å®ƒçš„å¤§å°ã€æˆå‘˜æˆ–æ–¹æ³•ã€‚&lt;/p&gt;&#xA;&lt;h2 id=&#34;stdunique_ptr-ä¸ä¸å®Œæ•´ç±»å‹&#34;&gt;std::unique_ptr ä¸ä¸å®Œæ•´ç±»å‹&lt;/h2&gt;&#xA;&lt;p&gt;å½“ä½¿ç”¨ &lt;code&gt;std::unique_ptr&lt;/code&gt; ç®¡ç†å‰å‘å£°æ˜ç±»çš„å¯¹è±¡æ—¶ï¼Œä¼šå‡ºç°é—®é¢˜ï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¤´æ–‡ä»¶ä¸­&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MyForwardDeclaredClass&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// å‰å‘å£°æ˜&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Container&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;unique_ptr&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;MyForwardDeclaredClass&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; ptr_; &lt;span style=&#34;color:#75715e&#34;&gt;// ç¼–è¯‘é”™è¯¯!&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šè¿°ä»£ç åœ¨ç¼–è¯‘æ—¶ä¼šå¤±è´¥ï¼Œé”™è¯¯ç±»ä¼¼äºï¼š&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;error: invalid application of &amp;#39;sizeof&amp;#39; to incomplete type &amp;#39;MyForwardDeclaredClass&amp;#39;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åŸå› åˆ†æ&#34;&gt;åŸå› åˆ†æ&lt;/h3&gt;&#xA;&lt;p&gt;è¿™ä¸ªé—®é¢˜å‡ºç°çš„åŸå› æ˜¯ï¼š&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;code&gt;std::unique_ptr&lt;/code&gt; çš„ææ„å‡½æ•°éœ€è¦çŸ¥é“å¦‚ä½•åˆ é™¤å®ƒç®¡ç†çš„å¯¹è±¡&lt;/li&gt;&#xA;&lt;li&gt;ä¸ºæ­¤ï¼Œç¼–è¯‘å™¨éœ€è¦åœ¨ç¼–è¯‘ &lt;code&gt;Container&lt;/code&gt; ç±»æ—¶çŸ¥é“ &lt;code&gt;MyForwardDeclaredClass&lt;/code&gt; çš„å®Œæ•´å®šä¹‰&lt;/li&gt;&#xA;&lt;li&gt;å½“ç¼–è¯‘å™¨å°è¯•è®¡ç®—ä¸å®Œæ•´ç±»å‹çš„ &lt;code&gt;sizeof&lt;/code&gt; æ—¶ï¼Œæ— æ³•ç¡®å®šå…¶å¤§å°ï¼Œå› æ­¤æŠ¥é”™&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;å…·ä½“æ¥è¯´ï¼Œ&lt;code&gt;std::unique_ptr&lt;/code&gt; çš„é»˜è®¤åˆ é™¤å™¨ &lt;code&gt;std::default_delete&lt;/code&gt; åœ¨ææ„æ—¶ä¼šæ‰§è¡Œï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;template&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;typename&lt;/span&gt; T&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;default_delete&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;::&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;operator&lt;/span&gt;()(T&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; ptr) &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static_assert&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;sizeof&lt;/span&gt;(T) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Type must be complete&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;delete&lt;/span&gt; ptr;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å½“ç±»å‹ä¸å®Œæ•´æ—¶ï¼Œ&lt;code&gt;sizeof(T)&lt;/code&gt; æ— æ³•è®¡ç®—ï¼Œè§¦å‘ &lt;code&gt;static_assert&lt;/code&gt; å¤±è´¥ã€‚&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
