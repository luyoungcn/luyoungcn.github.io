<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>MMWAVE on Hugo Zen theme</title>
    <link>https://example.org/tags/mmwave/</link>
    <description>Recent content in MMWAVE on Hugo Zen theme</description>
    <generator>Hugo</generator>
    <language>en-GB</language>
    <lastBuildDate>Thu, 01 Jan 1970 00:00:00 +0800</lastBuildDate>
      <atom:link href="https://example.org/tags/mmwave/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>关于雷达 AWR2243 ADC OVER CSI HSI</title>
      <link>https://example.org/post/awr2243_adc/</link>
      <pubDate>Thu, 01 Jan 1970 00:00:00 +0800</pubDate>
      <guid>https://example.org/post/awr2243_adc/</guid>
      <description>&lt;h1 id=&#34;关于雷达-awr2243-adc-over-csi-hsi&#34;&gt;关于雷达 AWR2243 ADC OVER CSI HSI&lt;/h1&gt;&#xA;&lt;p&gt;AWR2243 的 CSI2 支持最高数据位速率（Data bit rate）为 600Mbps，DDR 时钟最高为 300Mhz。外部处理器 CSI2 支持的最高时钟至少要等于 AWR2243 配置的 CSI2 输出时钟。&lt;/p&gt;&#xA;&lt;h2 id=&#34;awr2243-data-sources&#34;&gt;AWR2243 Data Sources&lt;/h2&gt;&#xA;&lt;h3 id=&#34;input-sources&#34;&gt;Input Sources&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;DFE(digital front-end) &amp;mdash; 设备实时数据&lt;/li&gt;&#xA;&lt;li&gt;HIL(hardware in the loop) &amp;mdash; 数据回放&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;interleaved-and-non-interleaved-modes&#34;&gt;Interleaved and Non-Interleaved Modes&lt;/h3&gt;&#xA;&lt;p&gt;在 AWR12xx, AWR22xx, 和 XWR14xx 器件变体上，建议使用&lt;strong&gt;交织存储模式&lt;/strong&gt;，因为它还有助于通过相应通道轻松映射和传输每个 RX 通道数据。&lt;/p&gt;&#xA;&lt;p&gt;AWR2243 的 ADC 存储器对于数据存储可以配置为交织模式或者是非交织模式。&lt;/p&gt;&#xA;&lt;p&gt;在交织模式下，ADC 数据是以&lt;strong&gt;采样点为间隔&lt;/strong&gt;在不同接收通道下交织输出。对于非交织模式，ADC 数据按照接收通道把一个接收通道的完整的一个 chirp 数据输出后再输出另一个接收通道的数据。对于不同的模式，外部处理器在获取数据后，需要使用 EDMA 或者其他处理代码，正确重组数据，进行处理。在 &lt;code&gt;mmwave_mcuplus_sdk_04_02_00_02&lt;/code&gt; 的例程里，DDMA 的例程使用了交织模式，TDMA 的例程使用了非交织模式。&lt;/p&gt;&#xA;&lt;p&gt;下面是不同模式数据数据输出的一个例子，Rx0、Rx1、Rx2、 Rx3 表示不同的接收通道。接收通道后面的数字表示采样点个数。N+1为每个 chirp 的采样点数。&lt;/p&gt;&#xA;&lt;h4 id=&#34;交织模式&#34;&gt;交织模式&lt;/h4&gt;&#xA;&lt;p&gt;Rx00 Rx10 Rx20 Rx30 Rx01 Rx11 Rx21 Rx31&amp;hellip;&amp;hellip;.Rx3N&lt;/p&gt;&#xA;&lt;h4 id=&#34;非交织模式&#34;&gt;非交织模式&lt;/h4&gt;&#xA;&lt;p&gt;Rx00 Rx01 Rx02 Rx03&amp;hellip;..Rx0N  Rx10 Rx11 Rx12 Rx13&amp;hellip;&amp;hellip;.Rx3N&lt;/p&gt;&#xA;&lt;h2 id=&#34;awr2243-csi2-接口输出的原始-adc-数据格式&#34;&gt;AWR2243 CSI2 接口输出的原始 ADC 数据格式&lt;/h2&gt;&#xA;&lt;p&gt;外部处理器的 CSI2 数据格式配置需要和AWR2243的ADC数据位数匹配。如果ADC数据位12位，外部处理器的CSI2的数据格式要配置为RAW12。如果ADC数据位14位，外部处理器的CSI2的数据格式要配置为RAW14。如果ADC数据为16位，外部处理器的CSI2数据格式要配置为RAW8。&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://e2e.ti.com/support/sensors-group/sensors/f/sensors-forum/1021021/awr2243-awr2243-csi2-pixel-format-problem&#34;&gt;It depends on the configuration set on the AWR2243 side. If you set 16bit ADC mode, RAW8 mode is used. If you set 12bit ADC mode RAW12 is used , in 14 bit ADC mode RAW14 is used.&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;如果ADC数据为16位复数，对于一个采样点，AWR2243的CSI2接口上会先输出16位实部数据的低8位，然后输出实部数据的高8位，接下来输出虚部数据的低8位，最后是虚部的高8位。&lt;/p&gt;&#xA;&lt;p&gt;CSI是Camera Serial Interface的缩写，也就是摄像头串行接口，这个接口设计之初是用于摄像头传感器。在AWR2243上把一帧毫米波的数据模拟成宽度x高度的图像帧通过CSI2输出。一帧毫米波数据通过CSI2输出的帧的宽度和高度可以根据下面的公式进行计算。外部处理器可以根据下面的公式判断采集到的CSI2数据的数量是否和毫米波射频配置一致。&lt;/p&gt;&#xA;&lt;h2 id=&#34;分辨率配置&#34;&gt;分辨率配置&lt;/h2&gt;&#xA;&lt;p&gt;CSI2帧的宽度（单位：位） = 每个chirp的采样点数 x 接收通道数 x 2（复数采样）或者1（实时采样）x 每个采样点的位数&lt;/p&gt;&#xA;&lt;p&gt;CSI2帧的高度 = 每帧包含的chirp个数&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;图像格式：RAW14，分辨率 3072 * 512&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Width = 384 * 4(CH) * 2(复数采样) * 14 (每个采样点的位数 RAW14) = 3072 * 14 (bits）&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Height = 512&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img src=&#34;Interleaved_Mode_of_Storage.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;raw-data-over-d-phy&#34;&gt;RAW Data Over D-PHY&lt;/h2&gt;&#xA;&lt;p&gt;RAW10 格式具有 10 位像素值，但 CSI-2 标准指定最小数据宽度为 1 字节。由于无法传输部分像素数据，因此 CSI-2 根据所使用的像素格式具有各种像素打包标准。 10 位 RAW 像素数据的传输是通过将 4 个 10 位像素值打包到 5 个字节（5 * 8 位（1 字节）= 40 位）来完成的。&lt;strong&gt;这种情况下的最小数据包长度始终为 5 个字节&lt;/strong&gt;。该标准以每像素位数值为基础，并查找必须是 1 字节（8 位）倍数的值。如果要平移的行的像素宽度不能被五整除，则多余的像素将用零填充。下表显示了 CSI-2 支持的格式数据包数据大小限制。&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th style=&#34;text-align: center&#34;&gt;Data format 数据格式&lt;/th&gt;&#xA;          &lt;th style=&#34;text-align: center&#34;&gt;Bits per Pixel (bpp) 每像素位数 (bpp)&lt;/th&gt;&#xA;          &lt;th style=&#34;text-align: center&#34;&gt;Pixels per packet (min) 每个数据包的像素（分钟）&lt;/th&gt;&#xA;          &lt;th style=&#34;text-align: center&#34;&gt;Packet length (byte) 数据包长度（字节）&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;YUV420 8-bit (legacy) YUV420 8 位（传统）&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;12&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;3&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;YUV420 8-bit YUV420 8 位&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;12&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;2/4&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;YUV420 10-bit YUV420 10 位&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;15&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;4&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;5/10&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;YUV422 8-bit YUV422 8 位&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;16&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;4&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;YUV422 10-bit YUV422 10 位&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;20&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;5&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;RGB888 RGB888&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;24&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;1&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;3&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;RGB666 RGB666&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;18&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;4&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;9&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;RGB565 RGB565&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;16&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;1&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;RGB555 RGB555&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;15&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;1&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;RGB444 RGB444&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;12&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;1&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;RAW6 RAW6&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;6&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;4&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;3&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;RAW7 RAW7&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;7&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;8&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;7&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;RAW8 RAW8&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;8&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;1&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;1&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;RAW10 原始10&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;10&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;4&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;5&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;RAW12 RAW12&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;12&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;3&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;RAW14 RAW14&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;14&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;4&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;7&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h3 id=&#34;awr2243-package&#34;&gt;AWR2243 package&lt;/h3&gt;&#xA;&lt;p&gt;&lt;img src=&#34;CSI-2_Transmission_Format.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;如上图，AWR2243 MIPI package，一个 Long Package DATA 包含了 1 整个 chirp 的数据。&lt;/p&gt;&#xA;&lt;h3 id=&#34;data-payload&#34;&gt;Data Payload&lt;/h3&gt;&#xA;&lt;p&gt;The data payload is constructed with the following three types of information:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Chirp profile information&lt;/li&gt;&#xA;&lt;li&gt;The actual chirp number&lt;/li&gt;&#xA;&lt;li&gt;ADC data corresponding to chirps of all four channels&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Interleaved fashion&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Chirp quality data (configurable)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;The payload is then split across the four physical data lanes and transmitted to the receiving D-PHY&lt;/strong&gt;. The data&#xA;packet packing format is shown in&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;Data_Packet_Packing_Format_for_12-Bit_Complex_Configuration.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;packet-formats-awr22xxawr12xx&#34;&gt;Packet Formats (AWR22xx/AWR12xx)&lt;/h3&gt;&#xA;&lt;p&gt;The packet formats supported on AWR22xx/AWR12xx devices is shown below and is selected by issuing&#xA;the data path configuration API.&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Packet 0&#xA;• On CSI2, the data can be RAW8/RAW12/RAW14 format and sent on any of the four configured virtual channels.&#xA;• On LVDS, the data format can be 12/14/16 bit and are mapped onto the different lanes based on a format mapping selection done (using LVDS configuration API).&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img src=&#34;PACKET0-format.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;参考资料&#34;&gt;参考资料&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://www.ti.com.cn/cn/lit/pdf/swra555&#34;&gt;AWR1xx and AWR22xx Data Path Programmer’s Guide (Rev. A)&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://www.ti.com.cn/cn/lit/gpn/awr2243&#34;&gt;AWR2243 单芯片、76GHz 至 81GHz FMCW 收发器 数据表 (Rev. C)&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;[&lt;a href=&#34;https://e2echina.ti.com/blogs_/b/the_process/posts/awr2243-csi2&#34;&gt;AWR2243 CSI2接口详解&lt;/a&gt;](&lt;a href=&#34;https://e2echina.ti.com/blogs_/b/the_process/posts/awr2243-csi2?keyMatch=MMWAVE%20PACKET%20FORMAT&amp;amp;_ticdt=MTY5MTQ3NTA1M3wwMTg5OTUxYTNkMzMwMDE3OTY5ZGVlMDYxMmIzMDUwNmYwMDE2MDY3MDBjOTl8W29iamVjdCBPYmplY3Rd&#34;&gt;https://e2echina.ti.com/blogs_/b/the_process/posts/awr2243-csi2?keyMatch=MMWAVE%20PACKET%20FORMAT&amp;amp;_ticdt=MTY5MTQ3NTA1M3wwMTg5OTUxYTNkMzMwMDE3OTY5ZGVlMDYxMmIzMDUwNmYwMDE2MDY3MDBjOTl8W29iamVjdCBPYmplY3Rd&lt;/a&gt;)&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://www.ti.com/lit/gpn/awr2243&#34;&gt;AWR2243 datasheet &lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://www.ti.com/licreg/docs/swlicexportcontrol.tsp?form_type=2&amp;amp;prod_no=mmwave_dfp_02_02_03_01_win32.exe&#34;&gt;MMWAVE-DFP-2G 02.02.03.01&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://e2e.ti.com/support/sensors-group/sensors/f/sensors-forum/1021021/awr2243-awr2243-csi2-pixel-format-problem&#34;&gt;AWR2243: AWR2243 CSI2 pixel format problem - Sensors forum - Sensors - TI E2E support forums&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://e2e.ti.com/support/sensors-group/sensors/f/sensors-forum/693093/awr1243-data-packet-packing-format-for-raw8-mode-8-bit&#34;&gt;AWR1243: data packet packing format for RAW8 mode (8-bit) - Sensors forum - Sensors - TI E2E support forums&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://e2e.ti.com/support/sensors-group/sensors/f/sensors-forum/611352/awr1243-clarifications-on-modes-and-frames&#34;&gt;AWR1243: Clarifications on modes and frames - Sensors forum - Sensors - TI E2E support forums&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://e2e.ti.com/support/sensors-group/sensors/f/sensors-forum/1066195/awr2243-relation-between-csi-lane-position-and-csi-pin/3944701#3944701&#34;&gt;AWR2243: Relation between CSI lane position and CSI pin - Sensors forum - Sensors - TI E2E support forums&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://e2e.ti.com/support/sensors-group/sensors/f/sensors-forum/615695/iwr1443-output-width-and-height-of-csi-frame&#34;&gt;IWR1443: output width and height of CSI frame - Sensors forum - Sensors - TI E2E support forums&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://developer.ridgerun.com/wiki/index.php/Camera_Sensor_Basics&#34;&gt;https://developer.ridgerun.com/wiki/index.php/Camera_Sensor_Basics&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://www.graniteriverlabs.com.cn/technical-blog/mipi-csi-2-d-phy/&#34;&gt;https://www.graniteriverlabs.com.cn/technical-blog/mipi-csi-2-d-phy/&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;</description>
    </item>
  </channel>
</rss>
