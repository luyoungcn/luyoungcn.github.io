<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Mipi on LuyangのBlog</title>
    <link>https://luyoungcn.github.io/tags/mipi/</link>
    <description>Recent content in Mipi on LuyangのBlog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Thu, 01 Jan 1970 00:00:00 +0800</lastBuildDate><atom:link href="https://luyoungcn.github.io/tags/mipi/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ADI GMSL2 SERDES SPI</title>
      <link>https://luyoungcn.github.io/posts/adi_gmsl2_serdes_spi/</link>
      <pubDate>Thu, 01 Jan 1970 00:00:00 +0800</pubDate>
      
      <guid>https://luyoungcn.github.io/posts/adi_gmsl2_serdes_spi/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/user-guides/gmsl2-general-user-guide.pdf&#34;&gt;https://www.analog.com/media/en/technical-documentation/user-guides/gmsl2-general-user-guide.pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/data-sheets/max96752.pdf&#34;&gt;https://www.analog.com/media/en/technical-documentation/data-sheets/max96752.pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/data-sheets/max9295d.pdf&#34;&gt;https://www.analog.com/media/en/technical-documentation/data-sheets/max9295d.pdf&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;gmsl2-general-user-guide&#34;&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/user-guides/gmsl2-general-user-guide.pdf&#34;&gt;GMSL2 General User Guide&lt;/a&gt;&lt;/h1&gt;
&lt;h2 id=&#34;key-features&#34;&gt;Key Features&lt;/h2&gt;
&lt;p&gt;• Four-wire main (connects to remote peripheral) or four-wire subordinate (connects to µC/SoC).&lt;/p&gt;
&lt;p&gt;• Remote-side SPI bus supports SPI modes 0 or 3; local-side SPI bus supports SPI mode 0.&lt;/p&gt;
&lt;p&gt;• Device filtering on (multiple SPI interfaces with different SPI IDs) or off (point-to-point SPI
interface).&lt;/p&gt;
&lt;p&gt;• Subordinate Select active low or high.&lt;/p&gt;
&lt;p&gt;• 600kHz to 25MHz or 50MHz SPI clock (depending on device).&lt;/p&gt;
&lt;p&gt;• MSB first (for control commands).&lt;/p&gt;
&lt;p&gt;• Pin or I2C control of RO and BNE input/output.&lt;/p&gt;
&lt;h2 id=&#34;18serial-peripheral-interface&#34;&gt;18.Serial Peripheral Interface&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_1.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;18331-spi-burst-write&#34;&gt;18.3.3.1 SPI Burst Write&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Set RO.&lt;/li&gt;
&lt;li&gt;Send 0xA0 (Set SPI Target = 0, optional if only one device).&lt;/li&gt;
&lt;li&gt;Send 0xA4/A5 (Assert SS1/SS2).&lt;/li&gt;
&lt;li&gt;Clear RO.&lt;/li&gt;
&lt;li&gt;Send Cmd Byte (Read/Write and Address MS bit).&lt;/li&gt;
&lt;li&gt;Send Addrs Byte.&lt;/li&gt;
&lt;li&gt;Send Write Byte.&lt;/li&gt;
&lt;li&gt;Set RO.&lt;/li&gt;
&lt;li&gt;Wait for BNE = 1.&lt;/li&gt;
&lt;li&gt;Send 0xA6/Read Byte (Discard).&lt;/li&gt;
&lt;li&gt;Clear RO.&lt;/li&gt;
&lt;li&gt;Repeat 7 - 11 until all data is written.&lt;/li&gt;
&lt;li&gt;Set RO.&lt;/li&gt;
&lt;li&gt;Wait for BNE = 1.&lt;/li&gt;
&lt;li&gt;Send 0xA6/Read Byte (Discard) (Clear SS).&lt;/li&gt;
&lt;li&gt;Send 0xA6/Read Byte (Discard) (Clear SS).&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;18332-spi-burst-read&#34;&gt;18.3.3.2 SPI Burst Read&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Set RO.&lt;/li&gt;
&lt;li&gt;Send 0xA0 (Set SPI Target = 0, optional if only one device).&lt;/li&gt;
&lt;li&gt;Send 0xA4/A5 (Assert SS1/SS2).&lt;/li&gt;
&lt;li&gt;Clear RO.&lt;/li&gt;
&lt;li&gt;Send Cmd Byte (Read/Write and Address MS bit).&lt;/li&gt;
&lt;li&gt;Send Addrs Byte.&lt;/li&gt;
&lt;li&gt;Set RO.&lt;/li&gt;
&lt;li&gt;Wait for BNE = 1.&lt;/li&gt;
&lt;li&gt;Send 0xA7/Read Byte (Read Data) (Discard first two reads, remaining are valid).&lt;/li&gt;
&lt;li&gt;Repeat Steps 8 - 9 until all but two bytes are read.&lt;/li&gt;
&lt;li&gt;Wait for BNE = 1.&lt;/li&gt;
&lt;li&gt;Send 0xA6/Read Byte (Valid Data) (Clear SS).&lt;/li&gt;
&lt;li&gt;Send 0xA6/Read Byte (Last Valid Data) (Clear SS).&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;硬件框图&#34;&gt;硬件框图&lt;/h1&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_2.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;spi-初始化&#34;&gt;SPI 初始化&lt;/h1&gt;
&lt;p&gt;详细寄存器描述可以参考官网提供的 DataSheet&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Index&lt;/th&gt;
          &lt;th&gt;Device&lt;/th&gt;
          &lt;th&gt;Reg&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
          &lt;th&gt;Desc&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;MAX9295D&lt;/td&gt;
          &lt;td&gt;0x173&lt;/td&gt;
          &lt;td&gt;0xFA&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;2&lt;/td&gt;
          &lt;td&gt;MAX9295D&lt;/td&gt;
          &lt;td&gt;0x174&lt;/td&gt;
          &lt;td&gt;0xFA&lt;/td&gt;
          &lt;td&gt;SCK 600KHz&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;3&lt;/td&gt;
          &lt;td&gt;MAX9295D&lt;/td&gt;
          &lt;td&gt;0x175&lt;/td&gt;
          &lt;td&gt;0xFA&lt;/td&gt;
          &lt;td&gt;SCK 600KHz&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;4&lt;/td&gt;
          &lt;td&gt;MAX9295D&lt;/td&gt;
          &lt;td&gt;0x176&lt;/td&gt;
          &lt;td&gt;0x0C&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;5&lt;/td&gt;
          &lt;td&gt;MAX96752&lt;/td&gt;
          &lt;td&gt;0x4E6&lt;/td&gt;
          &lt;td&gt;0x03&lt;/td&gt;
          &lt;td&gt;0x4E6 0x4F6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;6&lt;/td&gt;
          &lt;td&gt;MAX96752&lt;/td&gt;
          &lt;td&gt;0x4E9&lt;/td&gt;
          &lt;td&gt;0x00&lt;/td&gt;
          &lt;td&gt;0x4E9 0x4F9&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;7&lt;/td&gt;
          &lt;td&gt;MAX9295D&lt;/td&gt;
          &lt;td&gt;0x172&lt;/td&gt;
          &lt;td&gt;0x00&lt;/td&gt;
          &lt;td&gt;#SPI mode 0&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;8&lt;/td&gt;
          &lt;td&gt;MAX96752&lt;/td&gt;
          &lt;td&gt;0x4E0&lt;/td&gt;
          &lt;td&gt;0x09&lt;/td&gt;
          &lt;td&gt;0x4E0 0x4F0&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;9&lt;/td&gt;
          &lt;td&gt;MAX9295D&lt;/td&gt;
          &lt;td&gt;0X170&lt;/td&gt;
          &lt;td&gt;0X0B&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;spi-mode-0-的波形&#34;&gt;SPI mode 0 的波形&lt;/h1&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_1.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_2.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_3.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_4.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;spi-mode-3-配置&#34;&gt;SPI mode 3 配置&lt;/h2&gt;
&lt;h3 id=&#34;0x172-设置-0x0c-ok&#34;&gt;0x172 设置 0x0C OK&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_2_1.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_2_2.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_2_3.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;错误的配置0x172-设置-0x04&#34;&gt;错误的配置：0x172 设置 0x04&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_3_1.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_3_1.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ADI_GMSL2_SERDES_SPI_IMG_SIG_3_1.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>GMSL SERDES 笔记</title>
      <link>https://luyoungcn.github.io/posts/adi_serdes/</link>
      <pubDate>Thu, 01 Jan 1970 00:00:00 +0800</pubDate>
      
      <guid>https://luyoungcn.github.io/posts/adi_serdes/</guid>
      <description>&lt;h1 id=&#34;max96724&#34;&gt;MAX96724&lt;/h1&gt;
&lt;h1 id=&#34;max96724-相关资源&#34;&gt;MAX96724 相关资源&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.analog.com/cn/products/max96724.html#product-overview&#34;&gt;product overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/data-sheets/max96724.pdf&#34;&gt;MAX96724/F/R 英文数据手册 Rev.4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/user-guides/max96724fr-user-guide.pdf&#34;&gt;MAX96724/F/R Users Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/user-guides/gmsl2-channel-specification-user-guide.pdf&#34;&gt;GMSL2 Channel Specification User Guide Rev 1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/data-sheets/max96717f.pdf&#34; title=&#34;Open Data Sheet in PDF&#34;&gt;MAX96717F: CSI-2 to GMSL2 Serializer Data Sheet (Rev. 5)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;max96724-max9295d-pipes-and-csi2&#34;&gt;MAX96724 MAX9295D pipes and csi2&lt;/h2&gt;
&lt;script src=&#34;https://gist.github.com/luyoungcn/7b0f38d4f4ed39299afb48a3ac34295a.js&#34;&gt;&lt;/script&gt;

&lt;h2 id=&#34;gmsl2-forward-link-and-reverse-link&#34;&gt;GMSL2 forward link and reverse link&lt;/h2&gt;
&lt;p&gt;In GMSL2, the [[forward link]] transmits data from the serializer (e.g., a camera) to the deserializer (e.g., a display or processor), while the [[[reverse link]]] transmits data in the opposite direction, from the deserializer to the serializer.&lt;/p&gt;
&lt;p&gt;GMSL2 uses a full-duplex, bidirectional architecture, meaning both channels operate simultaneously.&lt;/p&gt;
&lt;h3 id=&#34;forward-channel&#34;&gt;Forward Channel&lt;/h3&gt;
&lt;p&gt;Transmits video and other data from the serializer to the deserializer.
Operates at a fixed data rate of either 3 Gbps or 6 Gbps.&lt;/p&gt;
&lt;h3 id=&#34;reverse-channel&#34;&gt;Reverse Channel&lt;/h3&gt;
&lt;p&gt;Transmits control signals, status information, and sometimes audio data from the deserializer to the serializer.
Operates at a fixed data rate of 187.5 Mbps.&lt;/p&gt;
&lt;h1 id=&#34;如何确认-dev_id&#34;&gt;如何确认 DEV_ID&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;0xD&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;max96724_reg_d.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;如何配置并确认-gmsl-mode-和-gmsl-rx-rate&#34;&gt;如何配置并确认 GMSL mode 和 GMSL RX rate&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;0x6&lt;/li&gt;
&lt;li&gt;0x10&lt;/li&gt;
&lt;li&gt;0x11&lt;/li&gt;
&lt;li&gt;0x18&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;max96724_reg_6.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;max96724_reg_10.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;max96724_reg_11.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;max96724_reg_11_2.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;如何确认-gmsl-link-lock-status&#34;&gt;如何确认 GMSL Link Lock Status&lt;/h1&gt;
&lt;p&gt;&lt;img src=&#34;max96724_reg_1A.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;max96724_reg_A_B_C.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;max96724_reg_18_1.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;max96724_reg_18_2.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;max96724_reg_18_3.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;p&gt;配置流程：&lt;/p&gt;
&lt;p&gt;max96724fr-user-guide.pdf&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;link_config_flow_1.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;p&gt;gmsl2-general-user-guide.pdf&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;max96724_reg_11_2.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;p&gt;实际调试中，系统开机内核初始化 serdes 之后，通过脚本去修改 GMSL2 link rate 为 6G&lt;/p&gt;
&lt;p&gt;参考 gmsl2-general-user-guide.pdf 描述的流程：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;修改 serializer and deserializer 为 6G&lt;/li&gt;
&lt;li&gt;对 seserializer 执行一次 GMSL link one-shot reset 即可 (我的实验中通过对 deser GMSL link 做了一次 one-shot reset，因此对 ser 或者 deser 其中之一做一次 GMSL Link one-shot reset 即可)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;gmsl2-general-user-guide.pdf
&lt;img src=&#34;link_config.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;如何确认serializer-是否收到了mipi-数据以及-mipi-数据量是否超过了-gmsl-的带宽&#34;&gt;如何确认serializer 是否收到了mipi 数据以及 mipi 数据量是否超过了 GMSL 的带宽&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://www.analog.com/media/en/technical-documentation/data-sheets/max96717f.pdf&#34;&gt;https://www.analog.com/media/en/technical-documentation/data-sheets/max96717f.pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;MAX96717 有 1 个 pipe line: pipe Z, 其他 serdes 自行查看相应数据手册。
VID_TX Z 包含的寄存器就是关于 PIPE Z 的寄存器。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;max96717_reg_112_1.png&#34; alt=&#34;&#34;&gt;
&lt;img src=&#34;max96717_reg_112_2.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;BIT 7: PCLKDET 用于标识是否收到 mipi 数据，如果该位为 1，表示收到了 mipi 数据。&lt;/p&gt;
&lt;p&gt;BIT 5: OVERFLOW 用于标识 mipi 数据量是否超过了 GMSL 带宽，如果该位为 1，表示收到了 mipi 数据量超过了 GMSL 带宽。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果当前 GMSL 带宽配置为 3G 则可以尝试调试 GMSL 为 6G。&lt;/li&gt;
&lt;li&gt;如果 GMSL 已经为 6G 就只能优化 mipi 带宽或调整方案。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;e.g. MAX9295D 为例：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; w2@&amp;lt;slave address&amp;gt; 0x01 0x02 r1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; w2@&amp;lt;slave address&amp;gt; 0x01 0x0A r1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; w2@&amp;lt;slave address&amp;gt; 0x01 0x12 r1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; w2@&amp;lt;slave address&amp;gt; 0x01 0x1A r1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;没数据返回结果：0x0A
有数据返回结果：0x8A&lt;/p&gt;
&lt;h1 id=&#34;关于解串器别名摄像头&#34;&gt;关于解串器别名摄像头&lt;/h1&gt;
&lt;p&gt;MAX96717 提供了两组别名寄存器，请注意这些寄存器 bit0 reserved&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;reg&lt;/th&gt;
          &lt;th&gt;description&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;0x42&lt;/td&gt;
          &lt;td&gt;SRC_A[6:0]&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x43&lt;/td&gt;
          &lt;td&gt;DST_A[6:0]&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x44&lt;/td&gt;
          &lt;td&gt;SRC_B[6:0]&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x45&lt;/td&gt;
          &lt;td&gt;DST_B[6:0]&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;注意： SRC &amp;mdash; ALIAS ADDR, DST &amp;mdash; ORIGIN ADDR&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When an 12c transaction across the GiISLlink has a device address ma!ching 1zcSRc A the dewce address as seen on theremote side is replaced by the deviceaddress in 12C DSTA&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;max96717_0x42_i2c_alias.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;max96717_0x43_i2c_alias.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;max96717_0x44_i2c_alias.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;max96717_0x45_i2c_alias.png&#34; alt=&#34;Untitled&#34;&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# i2ctransfer -y -f 0 w2@0x44 0x00 0x42 r1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;0xa8 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; 0x54 &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt; 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;# i2ctransfer -y -f 0 w2@0x44 0x00 0x43 r1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;0x52 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; 0x29 &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt; 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;# i2ctransfer -y -f 0 w2@0x44 0x00 0x44 r1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;0xaa &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; 0x55 &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt; 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;# i2ctransfer -y -f 0 w2@0x44 0x00 0x45 r1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;0x50 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; 0x28 &amp;lt;&amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;手动控制-ser-mfp-对外输出高低电平&#34;&gt;手动控制 SER MFP 对外输出高低电平&lt;/h1&gt;
&lt;p&gt;MAX96717 MFP ctrl register&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// MFP0 ~ MFP16
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; max96717_mfp_ctrl_regs[] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x02BE&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02C1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02C4&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02C7&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x02CA&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02CD&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02D0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02D3&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x02D6&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02D9&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02DC&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02DF&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02E2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02E5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02E8&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x02EB&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;0x2EE&lt;/span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;输出低电平，value 设置为 0x80&lt;/p&gt;
&lt;p&gt;输出高电平，value 设置为 0x90&lt;/p&gt;
&lt;p&gt;serializer device i2c address （如果已经别名请使用alias i2c address）&lt;/p&gt;
&lt;p&gt;命令格式：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &amp;lt;i2c_bus&amp;gt; w3@&amp;lt;i2c_addr&amp;gt; &amp;lt;reg_high_8bit&amp;gt; &amp;lt;reg_low_8bit&amp;gt; &amp;lt;value&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;假设 i2c bus 0, i2c alias address 0x44，MFP6, MFP7 输出低电平&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; w3@0x44 0x02 0xD0 0x80
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; w3@0x44 0x02 0xD3 0x80
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;假设 i2c bus 0, i2c alias address 0x44，MFP6, MFP7 输出高电平&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; w3@0x44 0x02 0xD0 0x90
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; w3@0x44 0x02 0xD3 0x90
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;max96724-max96717-i2c-速率配置&#34;&gt;MAX96724 MAX96717 I2C 速率配置&lt;/h1&gt;
&lt;p&gt;Fast-mode Plus&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# DES&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; w3@0x05 0x06 0x40 0x06
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; w3@0x05 0x06 0x41 0x76
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# SER&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; w3@0x44 0x00 0x40 0x06
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;i2ctransfer -y -f &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; w3@0x44 0x00 0x41 0x76
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;max96724-1&#34;&gt;MAX96724&lt;/h2&gt;
&lt;p&gt;![[Pasted image 20240827225310.png]]
![[Pasted image 20240827225321.png]]
![[Pasted image 20240827225333.png]]&lt;/p&gt;
&lt;h2 id=&#34;max96717&#34;&gt;MAX96717&lt;/h2&gt;
&lt;p&gt;![[Pasted image 20240827225457.png]]
![[Pasted image 20240827225505.png]]
![[Pasted image 20240827225513.png]]&lt;/p&gt;
&lt;h1 id=&#34;关于-gmsl2-soft-datatype-definition&#34;&gt;关于 GMSL2 Soft DataType definition&lt;/h1&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;像素格式代码&lt;/th&gt;
          &lt;th&gt;描述&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;0x10&lt;/td&gt;
          &lt;td&gt;GENERIC8&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x11&lt;/td&gt;
          &lt;td&gt;GENERIC8&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x12&lt;/td&gt;
          &lt;td&gt;EMBEDDED&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x1E&lt;/td&gt;
          &lt;td&gt;YUV422 8-bit&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x1F&lt;/td&gt;
          &lt;td&gt;YUV422 10-bit&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x22&lt;/td&gt;
          &lt;td&gt;RGB565&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x23&lt;/td&gt;
          &lt;td&gt;RGB666&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x24&lt;/td&gt;
          &lt;td&gt;RGB888&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x2A&lt;/td&gt;
          &lt;td&gt;RAW8&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x2B&lt;/td&gt;
          &lt;td&gt;RAW10&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x2C&lt;/td&gt;
          &lt;td&gt;RAW12&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x2D&lt;/td&gt;
          &lt;td&gt;RAW14&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x2E&lt;/td&gt;
          &lt;td&gt;RAW16&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x2F&lt;/td&gt;
          &lt;td&gt;RAW20&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x30&lt;/td&gt;
          &lt;td&gt;YUV422 12-bit&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x31&lt;/td&gt;
          &lt;td&gt;UDP8&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x32&lt;/td&gt;
          &lt;td&gt;UDP8&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x33&lt;/td&gt;
          &lt;td&gt;UDP8&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x34&lt;/td&gt;
          &lt;td&gt;UDP8&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x35&lt;/td&gt;
          &lt;td&gt;UDP8&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x36&lt;/td&gt;
          &lt;td&gt;UDP8&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;0x37&lt;/td&gt;
          &lt;td&gt;UDP8&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
    </item>
    
    <item>
      <title>关于雷达 AWR2243 ADC OVER CSI HSI</title>
      <link>https://luyoungcn.github.io/posts/awr2243_adc/</link>
      <pubDate>Thu, 01 Jan 1970 00:00:00 +0800</pubDate>
      
      <guid>https://luyoungcn.github.io/posts/awr2243_adc/</guid>
      <description>&lt;h1 id=&#34;关于雷达-awr2243-adc-over-csi-hsi&#34;&gt;关于雷达 AWR2243 ADC OVER CSI HSI&lt;/h1&gt;
&lt;p&gt;AWR2243 的 CSI2 支持最高数据位速率（Data bit rate）为 600Mbps，DDR 时钟最高为 300Mhz。外部处理器 CSI2 支持的最高时钟至少要等于 AWR2243 配置的 CSI2 输出时钟。&lt;/p&gt;
&lt;h2 id=&#34;awr2243-data-sources&#34;&gt;AWR2243 Data Sources&lt;/h2&gt;
&lt;h3 id=&#34;input-sources&#34;&gt;Input Sources&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;DFE(digital front-end) &amp;mdash; 设备实时数据&lt;/li&gt;
&lt;li&gt;HIL(hardware in the loop) &amp;mdash; 数据回放&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;interleaved-and-non-interleaved-modes&#34;&gt;Interleaved and Non-Interleaved Modes&lt;/h3&gt;
&lt;p&gt;在 AWR12xx, AWR22xx, 和 XWR14xx 器件变体上，建议使用&lt;strong&gt;交织存储模式&lt;/strong&gt;，因为它还有助于通过相应通道轻松映射和传输每个 RX 通道数据。&lt;/p&gt;
&lt;p&gt;AWR2243 的 ADC 存储器对于数据存储可以配置为交织模式或者是非交织模式。&lt;/p&gt;
&lt;p&gt;在交织模式下，ADC 数据是以&lt;strong&gt;采样点为间隔&lt;/strong&gt;在不同接收通道下交织输出。对于非交织模式，ADC 数据按照接收通道把一个接收通道的完整的一个 chirp 数据输出后再输出另一个接收通道的数据。对于不同的模式，外部处理器在获取数据后，需要使用 EDMA 或者其他处理代码，正确重组数据，进行处理。在 &lt;code&gt;mmwave_mcuplus_sdk_04_02_00_02&lt;/code&gt; 的例程里，DDMA 的例程使用了交织模式，TDMA 的例程使用了非交织模式。&lt;/p&gt;
&lt;p&gt;下面是不同模式数据数据输出的一个例子，Rx0、Rx1、Rx2、 Rx3 表示不同的接收通道。接收通道后面的数字表示采样点个数。N+1为每个 chirp 的采样点数。&lt;/p&gt;
&lt;h4 id=&#34;交织模式&#34;&gt;交织模式&lt;/h4&gt;
&lt;p&gt;Rx00 Rx10 Rx20 Rx30 Rx01 Rx11 Rx21 Rx31&amp;hellip;&amp;hellip;.Rx3N&lt;/p&gt;
&lt;h4 id=&#34;非交织模式&#34;&gt;非交织模式&lt;/h4&gt;
&lt;p&gt;Rx00 Rx01 Rx02 Rx03&amp;hellip;..Rx0N  Rx10 Rx11 Rx12 Rx13&amp;hellip;&amp;hellip;.Rx3N&lt;/p&gt;
&lt;h2 id=&#34;awr2243-csi2-接口输出的原始-adc-数据格式&#34;&gt;AWR2243 CSI2 接口输出的原始 ADC 数据格式&lt;/h2&gt;
&lt;p&gt;外部处理器的 CSI2 数据格式配置需要和AWR2243的ADC数据位数匹配。如果ADC数据位12位，外部处理器的CSI2的数据格式要配置为RAW12。如果ADC数据位14位，外部处理器的CSI2的数据格式要配置为RAW14。如果ADC数据为16位，外部处理器的CSI2数据格式要配置为RAW8。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://e2e.ti.com/support/sensors-group/sensors/f/sensors-forum/1021021/awr2243-awr2243-csi2-pixel-format-problem&#34;&gt;It depends on the configuration set on the AWR2243 side. If you set 16bit ADC mode, RAW8 mode is used. If you set 12bit ADC mode RAW12 is used , in 14 bit ADC mode RAW14 is used.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果ADC数据为16位复数，对于一个采样点，AWR2243的CSI2接口上会先输出16位实部数据的低8位，然后输出实部数据的高8位，接下来输出虚部数据的低8位，最后是虚部的高8位。&lt;/p&gt;
&lt;p&gt;CSI是Camera Serial Interface的缩写，也就是摄像头串行接口，这个接口设计之初是用于摄像头传感器。在AWR2243上把一帧毫米波的数据模拟成宽度x高度的图像帧通过CSI2输出。一帧毫米波数据通过CSI2输出的帧的宽度和高度可以根据下面的公式进行计算。外部处理器可以根据下面的公式判断采集到的CSI2数据的数量是否和毫米波射频配置一致。&lt;/p&gt;
&lt;h2 id=&#34;分辨率配置&#34;&gt;分辨率配置&lt;/h2&gt;
&lt;p&gt;CSI2帧的宽度（单位：位） = 每个chirp的采样点数 x 接收通道数 x 2（复数采样）或者1（实时采样）x 每个采样点的位数&lt;/p&gt;
&lt;p&gt;CSI2帧的高度 = 每帧包含的chirp个数&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;图像格式：RAW14，分辨率 3072 * 512&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Width = 384 * 4(CH) * 2(复数采样) * 14 (每个采样点的位数 RAW14) = 3072 * 14 (bits）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Height = 512&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;Interleaved_Mode_of_Storage.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;raw-data-over-d-phy&#34;&gt;RAW Data Over D-PHY&lt;/h2&gt;
&lt;p&gt;RAW10 格式具有 10 位像素值，但 CSI-2 标准指定最小数据宽度为 1 字节。由于无法传输部分像素数据，因此 CSI-2 根据所使用的像素格式具有各种像素打包标准。 10 位 RAW 像素数据的传输是通过将 4 个 10 位像素值打包到 5 个字节（5 * 8 位（1 字节）= 40 位）来完成的。&lt;strong&gt;这种情况下的最小数据包长度始终为 5 个字节&lt;/strong&gt;。该标准以每像素位数值为基础，并查找必须是 1 字节（8 位）倍数的值。如果要平移的行的像素宽度不能被五整除，则多余的像素将用零填充。下表显示了 CSI-2 支持的格式数据包数据大小限制。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;Data format 数据格式&lt;/th&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;Bits per Pixel (bpp) 每像素位数 (bpp)&lt;/th&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;Pixels per packet (min) 每个数据包的像素（分钟）&lt;/th&gt;
          &lt;th style=&#34;text-align: center&#34;&gt;Packet length (byte) 数据包长度（字节）&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;YUV420 8-bit (legacy) YUV420 8 位（传统）&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;12&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;YUV420 8-bit YUV420 8 位&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;12&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;2/4&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;YUV420 10-bit YUV420 10 位&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;15&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;4&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;5/10&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;YUV422 8-bit YUV422 8 位&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;16&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;4&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;YUV422 10-bit YUV422 10 位&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;20&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;5&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;RGB888 RGB888&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;24&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;1&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;RGB666 RGB666&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;18&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;4&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;9&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;RGB565 RGB565&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;16&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;1&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;RGB555 RGB555&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;15&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;1&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;RGB444 RGB444&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;12&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;1&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;RAW6 RAW6&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;6&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;4&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;RAW7 RAW7&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;7&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;8&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;7&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;RAW8 RAW8&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;8&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;1&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;1&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;RAW10 原始10&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;10&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;4&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;5&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;RAW12 RAW12&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;12&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;2&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;RAW14 RAW14&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;14&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;4&lt;/td&gt;
          &lt;td style=&#34;text-align: center&#34;&gt;7&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;awr2243-package&#34;&gt;AWR2243 package&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;CSI-2_Transmission_Format.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;如上图，AWR2243 MIPI package，一个 Long Package DATA 包含了 1 整个 chirp 的数据。&lt;/p&gt;
&lt;h3 id=&#34;data-payload&#34;&gt;Data Payload&lt;/h3&gt;
&lt;p&gt;The data payload is constructed with the following three types of information:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chirp profile information&lt;/li&gt;
&lt;li&gt;The actual chirp number&lt;/li&gt;
&lt;li&gt;ADC data corresponding to chirps of all four channels
&lt;ul&gt;
&lt;li&gt;Interleaved fashion&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Chirp quality data (configurable)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;The payload is then split across the four physical data lanes and transmitted to the receiving D-PHY&lt;/strong&gt;. The data
packet packing format is shown in&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;Data_Packet_Packing_Format_for_12-Bit_Complex_Configuration.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;packet-formats-awr22xxawr12xx&#34;&gt;Packet Formats (AWR22xx/AWR12xx)&lt;/h3&gt;
&lt;p&gt;The packet formats supported on AWR22xx/AWR12xx devices is shown below and is selected by issuing
the data path configuration API.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Packet 0
• On CSI2, the data can be RAW8/RAW12/RAW14 format and sent on any of the four configured virtual channels.
• On LVDS, the data format can be 12/14/16 bit and are mapped onto the different lanes based on a format mapping selection done (using LVDS configuration API).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;PACKET0-format.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;参考资料&#34;&gt;参考资料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.ti.com.cn/cn/lit/pdf/swra555&#34;&gt;AWR1xx and AWR22xx Data Path Programmer’s Guide (Rev. A)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.ti.com.cn/cn/lit/gpn/awr2243&#34;&gt;AWR2243 单芯片、76GHz 至 81GHz FMCW 收发器 数据表 (Rev. C)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[&lt;a href=&#34;https://e2echina.ti.com/blogs_/b/the_process/posts/awr2243-csi2&#34;&gt;AWR2243 CSI2接口详解&lt;/a&gt;](&lt;a href=&#34;https://e2echina.ti.com/blogs_/b/the_process/posts/awr2243-csi2?keyMatch=MMWAVE%20PACKET%20FORMAT&amp;amp;_ticdt=MTY5MTQ3NTA1M3wwMTg5OTUxYTNkMzMwMDE3OTY5ZGVlMDYxMmIzMDUwNmYwMDE2MDY3MDBjOTl8W29iamVjdCBPYmplY3Rd&#34;&gt;https://e2echina.ti.com/blogs_/b/the_process/posts/awr2243-csi2?keyMatch=MMWAVE%20PACKET%20FORMAT&amp;amp;_ticdt=MTY5MTQ3NTA1M3wwMTg5OTUxYTNkMzMwMDE3OTY5ZGVlMDYxMmIzMDUwNmYwMDE2MDY3MDBjOTl8W29iamVjdCBPYmplY3Rd&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.ti.com/lit/gpn/awr2243&#34;&gt;AWR2243 datasheet &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.ti.com/licreg/docs/swlicexportcontrol.tsp?form_type=2&amp;amp;prod_no=mmwave_dfp_02_02_03_01_win32.exe&#34;&gt;MMWAVE-DFP-2G 02.02.03.01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://e2e.ti.com/support/sensors-group/sensors/f/sensors-forum/1021021/awr2243-awr2243-csi2-pixel-format-problem&#34;&gt;AWR2243: AWR2243 CSI2 pixel format problem - Sensors forum - Sensors - TI E2E support forums&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://e2e.ti.com/support/sensors-group/sensors/f/sensors-forum/693093/awr1243-data-packet-packing-format-for-raw8-mode-8-bit&#34;&gt;AWR1243: data packet packing format for RAW8 mode (8-bit) - Sensors forum - Sensors - TI E2E support forums&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://e2e.ti.com/support/sensors-group/sensors/f/sensors-forum/611352/awr1243-clarifications-on-modes-and-frames&#34;&gt;AWR1243: Clarifications on modes and frames - Sensors forum - Sensors - TI E2E support forums&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://e2e.ti.com/support/sensors-group/sensors/f/sensors-forum/1066195/awr2243-relation-between-csi-lane-position-and-csi-pin/3944701#3944701&#34;&gt;AWR2243: Relation between CSI lane position and CSI pin - Sensors forum - Sensors - TI E2E support forums&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://e2e.ti.com/support/sensors-group/sensors/f/sensors-forum/615695/iwr1443-output-width-and-height-of-csi-frame&#34;&gt;IWR1443: output width and height of CSI frame - Sensors forum - Sensors - TI E2E support forums&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.ridgerun.com/wiki/index.php/Camera_Sensor_Basics&#34;&gt;https://developer.ridgerun.com/wiki/index.php/Camera_Sensor_Basics&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.graniteriverlabs.com.cn/technical-blog/mipi-csi-2-d-phy/&#34;&gt;https://www.graniteriverlabs.com.cn/technical-blog/mipi-csi-2-d-phy/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>摄像头图像数据格式从cmos到mipi</title>
      <link>https://luyoungcn.github.io/posts/camera_%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F_%E4%BB%8Ecmos%E5%88%B0mipi/</link>
      <pubDate>Thu, 01 Jan 1970 00:00:00 +0800</pubDate>
      
      <guid>https://luyoungcn.github.io/posts/camera_%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F_%E4%BB%8Ecmos%E5%88%B0mipi/</guid>
      <description>&lt;p&gt;&lt;img src=&#34;camera_%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F_%E4%BB%8Ecmos%E5%88%B0mipi.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
