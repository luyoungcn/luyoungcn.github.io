<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Dracut on Luyangã®Blog</title>
    <link>/tags/dracut/</link>
    <description>Recent content in Dracut on Luyangã®Blog</description>
    <generator>Hugo</generator>
    <language>en-US</language>
    <lastBuildDate>Sat, 11 Oct 2025 23:30:00 +0800</lastBuildDate>
    <atom:link href="/tags/dracut/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ğŸ§©  Dracut vs Initramfs-tools ä¸€åœºLinuxæ—©æœŸå¼•å¯¼çš„æ·±åº¦å˜é©</title>
      <link>/posts/--dracut-vs-initramfs-tools-%E4%B8%80%E5%9C%BAlinux%E6%97%A9%E6%9C%9F%E5%BC%95%E5%AF%BC%E7%9A%84%E6%B7%B1%E5%BA%A6%E5%8F%98%E9%9D%A9/</link>
      <pubDate>Sat, 11 Oct 2025 23:30:00 +0800</pubDate>
      <guid>/posts/--dracut-vs-initramfs-tools-%E4%B8%80%E5%9C%BAlinux%E6%97%A9%E6%9C%9F%E5%BC%95%E5%AF%BC%E7%9A%84%E6%B7%B1%E5%BA%A6%E5%8F%98%E9%9D%A9/</guid>
      <description>&lt;h1 id=&#34;dracut-vs-initramfs-tools-ä¸€åœºlinuxæ—©æœŸå¼•å¯¼çš„æ·±åº¦å˜é©&#34;&gt;ğŸ§©Dracut vs. Initramfs-tools: ä¸€åœºLinuxæ—©æœŸå¼•å¯¼çš„æ·±åº¦å˜é©&lt;/h1&gt;&#xA;&lt;p&gt;åœ¨Linuxç³»ç»Ÿçš„å¯åŠ¨é“¾æ¡ä¸­ï¼Œä¸€ä¸ªçœ‹ä¼¼çŸ­æš‚å´è‡³å…³é‡è¦çš„é˜¶æ®µæ˜¯&lt;code&gt;initramfs&lt;/code&gt;ï¼ˆInitial RAM Filesystemï¼‰çš„åŠ è½½å’Œæ‰§è¡Œã€‚å®ƒçš„æ ¸å¿ƒä»»åŠ¡æ˜¯æ­å»ºä¸€ä¸ªä¸´æ—¶çš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ŒåŠ è½½å¿…è¦çš„é©±åŠ¨ï¼ˆå¦‚å­˜å‚¨ã€æ–‡ä»¶ç³»ç»Ÿã€åŠ å¯†æ¨¡å—ï¼‰ï¼Œå¹¶æœ€ç»ˆæŒ‚è½½çœŸå®çš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œå°†æ§åˆ¶æƒäº¤ç»™ç³»ç»Ÿçš„&lt;code&gt;init&lt;/code&gt;è¿›ç¨‹ï¼ˆå¦‚&lt;code&gt;systemd&lt;/code&gt;ï¼‰ã€‚é•¿æœŸä»¥æ¥ï¼ŒDebianåŠå…¶è¡ç”Ÿç‰ˆï¼ˆå¦‚Ubuntuï¼‰ä¾èµ–&lt;code&gt;initramfs-tools&lt;/code&gt;æ¥ç”Ÿæˆè¿™ä¸ªåˆå§‹ç¯å¢ƒï¼Œè€ŒRed Hatç”Ÿæ€åˆ™é€‰æ‹©äº†æ›´ä¸ºç°ä»£çš„&lt;code&gt;dracut&lt;/code&gt;ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å¦‚ä»Šï¼Œéšç€Debian 13 (&amp;ldquo;Trixie&amp;rdquo;) å’Œ Ubuntu 24.04 LTS ç­‰ä¸»æµå‘è¡Œç‰ˆçº·çº·è½¬å‘&lt;code&gt;dracut&lt;/code&gt;ä½œä¸ºé»˜è®¤é€‰é¡¹ï¼Œè¿™åœºå…³äºæ—©æœŸå¼•å¯¼å·¥å…·çš„å˜é©å·²ç»ä»æŠ€æœ¯è®¨è®ºèµ°å‘äº†å¹¿æ³›å®è·µã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™ä¸¤è€…çš„æŠ€æœ¯æ¶æ„ã€æ ¸å¿ƒå·®å¼‚ï¼Œå¹¶å±•æœ›Linuxæ—©æœŸå¼•å¯¼çš„æœªæ¥ã€‚&lt;/p&gt;&#xA;&lt;h2 id=&#34;1-ä¸¤å¤§ä¸»è§’æŠ€æœ¯æ¶æ„ä¸å“²å­¦&#34;&gt;1. ä¸¤å¤§ä¸»è§’ï¼šæŠ€æœ¯æ¶æ„ä¸å“²å­¦&lt;/h2&gt;&#xA;&lt;p&gt;è¦ç†è§£å®ƒä»¬çš„å·®å¼‚ï¼Œé¦–å…ˆå¿…é¡»ç†è§£å®ƒä»¬å„è‡ªæ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒä»¬çš„è®¾è®¡å“²å­¦ã€‚&lt;/p&gt;&#xA;&lt;h3 id=&#34;initramfs-toolsè„šæœ¬é©±åŠ¨çš„ä¼ ç»Ÿæ´¾&#34;&gt;&lt;code&gt;initramfs-tools&lt;/code&gt;ï¼šè„šæœ¬é©±åŠ¨çš„ä¼ ç»Ÿæ´¾&lt;/h3&gt;&#xA;&lt;p&gt;&lt;code&gt;initramfs-tools&lt;/code&gt;æ˜¯ä¸ºDebianè®¾è®¡çš„&lt;code&gt;initramfs&lt;/code&gt;ç”Ÿæˆæ¡†æ¶ã€‚å®ƒçš„å“²å­¦æ˜¯&lt;strong&gt;ç®€å•ã€é€æ˜ã€åŸºäºé’©å­ï¼ˆHook-basedï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;ç”¨é€”ä¸å“²å­¦:&lt;/strong&gt;&#xA;å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ä¸€ç³»åˆ—æœ‰åºçš„Shellè„šæœ¬ï¼ˆhooksï¼‰æ¥æ„å»º&lt;code&gt;initramfs&lt;/code&gt;ã€‚å¼€å‘è€…æˆ–ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥é€šè¿‡æ·»åŠ è‡ªå®šä¹‰è„šæœ¬æ¥æ‰©å±•å…¶åŠŸèƒ½ã€‚è¿™ç§æ–¹å¼å¯¹äºç†Ÿæ‚‰Shellç¼–ç¨‹çš„ç”¨æˆ·æ¥è¯´éå¸¸ç›´è§‚ï¼Œä¸€åˆ‡çš†ä¸ºè„šæœ¬ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;æŠ€æœ¯æ¶æ„:&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒå‘½ä»¤&lt;/strong&gt;: &lt;code&gt;update-initramfs&lt;/code&gt; æ˜¯ç”¨æˆ·ä¸ä¹‹äº¤äº’çš„ä¸»è¦å·¥å…·ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;é…ç½®ç›®å½•&lt;/strong&gt;: &lt;code&gt;/etc/initramfs-tools/&lt;/code&gt; å­˜æ”¾ä¸»è¦é…ç½®æ–‡ä»¶&lt;code&gt;initramfs.conf&lt;/code&gt;å’Œç”¨æˆ·è‡ªå®šä¹‰æ¨¡å—ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;é’©å­è„šæœ¬ (Hooks)&lt;/strong&gt;: ä½äº&lt;code&gt;/usr/share/initramfs-tools/hooks&lt;/code&gt;å’Œ&lt;code&gt;/etc/initramfs-tools/hooks&lt;/code&gt;ã€‚è¿™äº›è„šæœ¬åœ¨ç”Ÿæˆ&lt;code&gt;initramfs&lt;/code&gt;æ—¶è¢«æ‰§è¡Œï¼Œè´Ÿè´£å°†å¿…è¦çš„æ–‡ä»¶ï¼ˆå¦‚äºŒè¿›åˆ¶ç¨‹åºã€åº“ã€å†…æ ¸æ¨¡å—ï¼‰å¤åˆ¶åˆ°ä¸´æ—¶çš„æ„å»ºç›®å½•ä¸­ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;lvm2&lt;/code&gt;é’©å­ä¼šç¡®ä¿&lt;code&gt;lvm&lt;/code&gt;äºŒè¿›åˆ¶æ–‡ä»¶å’Œç›¸å…³åº“è¢«åŒ…å«è¿›å»ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;å¼•å¯¼è„šæœ¬ (Boot Scripts)&lt;/strong&gt;: ä½äº&lt;code&gt;/usr/share/initramfs-tools/scripts/&lt;/code&gt;ï¼Œè¿™äº›è„šæœ¬è¢«æ‰“åŒ…åˆ°&lt;code&gt;initramfs&lt;/code&gt;å†…éƒ¨ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶äºæ—©æœŸç”¨æˆ·ç©ºé—´ï¼ˆearly userspaceï¼‰ä¸­æ‰§è¡Œï¼Œè´Ÿè´£è®¾å¤‡å‘ç°ã€æ¨¡å—åŠ è½½å’Œæ ¹æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;ç”Ÿæˆè¿‡ç¨‹&lt;/strong&gt;: å½“&lt;code&gt;update-initramfs&lt;/code&gt;è¿è¡Œæ—¶ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œä¾æ¬¡æ‰§è¡Œæ‰€æœ‰é’©å­è„šæœ¬æ¥å¡«å……è¿™ä¸ªç›®å½•ï¼Œç„¶åå°†ç›®å½•å†…å®¹æ‰“åŒ…æˆä¸€ä¸ª&lt;code&gt;cpio&lt;/code&gt;å½’æ¡£ï¼Œå¹¶ç”¨&lt;code&gt;gzip&lt;/code&gt;ï¼ˆæˆ–å…¶ä»–å‹ç¼©å·¥å…·ï¼‰å‹ç¼©ï¼Œæœ€ç»ˆç”Ÿæˆ&lt;code&gt;initrd.img&lt;/code&gt;æ–‡ä»¶ã€‚&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;å…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª&lt;strong&gt;åŠ æ³•è¿‡ç¨‹&lt;/strong&gt;ï¼šé»˜è®¤åŒ…å«ä¸€ä¸ªåŸºç¡€é›†åˆï¼Œç„¶åé€šè¿‡é’©å­ä¸æ–­å‘å…¶ä¸­æ·»åŠ éœ€è¦çš„å†…å®¹ã€‚&lt;/p&gt;&#xA;&lt;h3 id=&#34;dracutäº‹ä»¶é©±åŠ¨çš„ç°ä»£ä¸»ä¹‰è€…&#34;&gt;&lt;code&gt;dracut&lt;/code&gt;ï¼šäº‹ä»¶é©±åŠ¨çš„ç°ä»£ä¸»ä¹‰è€…&lt;/h3&gt;&#xA;&lt;p&gt;&lt;code&gt;dracut&lt;/code&gt; (Generic RAMDisk Creation Tool) ç”±Red Hatå¼€å‘ï¼Œå…¶è®¾è®¡å“²å­¦æ˜¯&lt;strong&gt;æ¨¡å—åŒ–ã€äº‹ä»¶é©±åŠ¨ã€æŒ‰éœ€ç”Ÿæˆ&lt;/strong&gt;ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;ç”¨é€”ä¸å“²å­¦:&lt;/strong&gt;&#xA;&lt;code&gt;dracut&lt;/code&gt;æ—¨åœ¨åˆ›å»ºä¸€ä¸ªå°½å¯èƒ½å°çš„ã€ä»…åŒ…å«å½“å‰ç³»ç»Ÿå¯åŠ¨æ‰€éœ€é©±åŠ¨å’Œå·¥å…·çš„&lt;code&gt;initramfs&lt;/code&gt;ã€‚å®ƒé¿å…ç¡¬ç¼–ç çš„è„šæœ¬é€»è¾‘ï¼Œè½¬è€Œä¸¥é‡ä¾èµ–&lt;code&gt;udev&lt;/code&gt;åœ¨å¯åŠ¨æ—¶åŠ¨æ€å‘ç°å’Œå¤„ç†ç¡¬ä»¶ã€‚å®ƒçš„å£å·æ˜¯ï¼šâ€œDracut contains as little as possible and relies on kernel features and udev to do the rest.â€&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;æŠ€æœ¯æ¶æ„:&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒå‘½ä»¤&lt;/strong&gt;: &lt;code&gt;dracut&lt;/code&gt;ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;æ¨¡å—åŒ–è®¾è®¡&lt;/strong&gt;: &lt;code&gt;dracut&lt;/code&gt;çš„æ ¸å¿ƒæ˜¯æ¨¡å—ã€‚æ‰€æœ‰åŠŸèƒ½éƒ½è¢«ç»„ç»‡åœ¨ä½äº&lt;code&gt;/usr/lib/dracut/modules.d/&lt;/code&gt;çš„æ¨¡å—ä¸­ã€‚æ¯ä¸ªæ¨¡å—æ˜¯ä¸€ä¸ªç›®å½•ï¼ŒåŒ…å«å®šä¹‰å¥½çš„è„šæœ¬ï¼Œå¦‚&lt;code&gt;module-setup.sh&lt;/code&gt;ï¼ˆåœ¨ç”Ÿæˆæ—¶æ‰§è¡Œï¼Œå®‰è£…æ–‡ä»¶ï¼‰ã€&lt;code&gt;install&lt;/code&gt;ï¼ˆå®‰è£…æ–‡ä»¶ï¼‰ã€&lt;code&gt;check&lt;/code&gt;ï¼ˆæ£€æŸ¥ä¾èµ–ï¼‰ç­‰ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;å†…çœå¼ç”Ÿæˆ (Introspection)&lt;/strong&gt;: è¿™æ˜¯&lt;code&gt;dracut&lt;/code&gt;çš„ç‹ç‰Œç‰¹æ€§ã€‚åœ¨é»˜è®¤çš„**â€œHost-Onlyâ€æ¨¡å¼**ä¸‹ï¼Œ&lt;code&gt;dracut&lt;/code&gt;ä¼šæ‰«æå½“å‰æ­£åœ¨è¿è¡Œçš„ç³»ç»Ÿï¼Œç²¾ç¡®åœ°æ‰¾å‡ºå¯åŠ¨åˆ°æ ¹æ–‡ä»¶ç³»ç»ŸæŒ‚è½½è¿™ä¸€æ­¥æ‰€å¿…éœ€çš„å†…æ ¸æ¨¡å—ã€äºŒè¿›åˆ¶æ–‡ä»¶å’Œé…ç½®ã€‚è¿™ä½¿å¾—ç”Ÿæˆçš„&lt;code&gt;initramfs&lt;/code&gt;æå…¶ç²¾ç®€ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;äº‹ä»¶é©±åŠ¨çš„è¿è¡Œæ—¶&lt;/strong&gt;: åœ¨å¯åŠ¨é˜¶æ®µï¼Œ&lt;code&gt;dracut&lt;/code&gt;å†…éƒ¨çš„&lt;code&gt;init&lt;/code&gt;è„šæœ¬ä¼šå¯åŠ¨ä¸€ä¸ªè½»é‡çº§çš„&lt;code&gt;udev&lt;/code&gt;å®ˆæŠ¤è¿›ç¨‹ã€‚å½“å†…æ ¸æ¢æµ‹åˆ°ç¡¬ä»¶ï¼ˆå¦‚ç¡¬ç›˜ï¼‰æ—¶ï¼Œ&lt;code&gt;udev&lt;/code&gt;ä¼šç”Ÿæˆäº‹ä»¶ï¼Œè§¦å‘ç›¸åº”çš„è§„åˆ™å’Œè„šæœ¬ï¼ˆä¾‹å¦‚ï¼ŒLVMå·è¢«å‘ç°åï¼Œè§¦å‘&lt;code&gt;lvm&lt;/code&gt;ç›¸å…³çš„è„šæœ¬è¿›è¡Œæ¿€æ´»ï¼‰ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯åŠ¨æ€å’Œå¹¶è¡Œçš„ã€‚&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;é…ç½®&lt;/strong&gt;: é…ç½®æ–‡ä»¶ä½äº&lt;code&gt;/etc/dracut.conf&lt;/code&gt;å’Œ&lt;code&gt;/etc/dracut.conf.d/&lt;/code&gt;ä¸‹çš„&lt;code&gt;.conf&lt;/code&gt;æ–‡ä»¶ï¼Œç”¨æˆ·é€šè¿‡ç®€å•çš„é…ç½®é¡¹ï¼ˆå¦‚&lt;code&gt;add_drivers+=&amp;quot;nvme&amp;quot;&lt;/code&gt;ï¼‰æ¥æ§åˆ¶ç”Ÿæˆè¿‡ç¨‹ï¼Œè€Œä¸æ˜¯ç¼–å†™å¤æ‚çš„é’©å­è„šæœ¬ã€‚&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;å…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª&lt;strong&gt;æŒ‰éœ€å‘ç°çš„è¿‡ç¨‹&lt;/strong&gt;ï¼šå…ˆç¡®å®šç›®æ ‡ï¼ˆå¯åŠ¨å½“å‰ç³»ç»Ÿï¼‰ï¼Œç„¶åç²¾ç¡®åœ°æ‰“åŒ…è¾¾æˆç›®æ ‡æ‰€éœ€çš„æœ€å°å·¥å…·é›†ã€‚&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
